/******/!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var a=n(1),o=n(2),i=n(3),r=n(4),c=n(5),s=n(6),l=n(7),d=n(8),u=n(9),m=n(10),p=n(11),f=n(12),g=n(13),v=n(14),h=n(15),y=n(16),b=n(17),S=n(18),C=n(19),w=n(20),k=n(21),x=n(22),I=n(23),D=n(24),$=n(25),P=n(26),F=n(29),T=n(30),A=n(31),M=n(32),E=n(33),O=n(34),N=n(35),L=n(36),U=n(37),_=n(38),K=n(39),R=n(40),B=n(41),V=n(42),j=n(43),z=n(44),G=n(45),q=n(46);angular.module("xchange",["ngAnimate","ngTouch","ngCookies","ngSanitize","ngMessages","ngAria","ui.router","ngMaterial","onsen","toastr","infinite-scroll","indexedDB","ngFileSaver","pdf","ngLocalize","angular-inview","ng-currency","angularLazyImg","thatisuday.dropzone","ui.grid","ui.grid.importer"]).constant("CONSTANT",o.constant).value("langConf",R.langConf).config(a.config).config(i.routerConfig).config(r.indexedDBConfig).run(s.runBlock).service("StorageService",c.StorageService).service("documentsService",v.DocumentsService).service("ConfigService",w.ConfigService).service("LoginService",k.LoginService).service("CheckAuthService",x.CheckAuthService).service("LocalAccessService",I.LocalAccessService).service("ViewModeService",D.ViewModeService).controller("MainController",l.MainController).controller("LoginController",d.LoginController).controller("RegisterController",u.RegisterController).controller("ConfirmController",m.ConfirmController).controller("LocalAccessService",I.LocalAccessService).controller("CollectionController",p.CollectionController).controller("SearchController",b.SearchController).controller("CustomerController",g.CustomerController).controller("EditDocumentController",f.EditDocumentController).controller("ChangeLogController",h.ChangeLogController).controller("AccesskeyController",S.AccesskeyController).controller("PartnerController",C.PartnerController).controller("TestController",y.TestController).directive("acmeNavbar",$.NavbarDirective).directive("navtabbar",P.NavtabbarDirective).directive("footerBar",T.FooterbarDirective).directive("sideMenu",A.SidemenuDirective).directive("noScopeRepeat",M.NoScopeRepeatDirective).directive("validateEmail",L.ValidateEmail).directive("appTitle",U.AppTitle).directive("compareTo",_.CompareTo).directive("documentDataValidate",K.DocumentDataValidate).directive("flyingButton",F.FlyingButtonDirective).directive("contactInformation",q.contactInformation).filter("truncate",E.TruncateFilter).filter("collectionFilter",O.CollectionFilter).service("SearchService",N.SearchService).provider("InfinicastWrapper",B.InfinicastWrapper).service("NotificationService",V.NotificationService).service("UploadService",j.UploadService).service("ViewerService",z.ViewerService).service("PartnerService",G.PartnerService)},function(e,t){"use strict";function n(e,t,n,a,o){"ngInject";o.setConfig({host:"https://ws.demo.infinicast.io",scope:"365xchange",role:"myRole",paths:[{name:"userCollection",pathType:o.pathTypes.userCollection,viewType:"notification",pathConfig:{type:"user",dataType:"collection"}},{name:"userChat",pathType:o.pathTypes.userChat,viewType:"chat",pathConfig:{type:"chat",checkMultipleIds:!0,ids:[]}},{name:"userOnline",pathType:o.pathTypes.userOnline,viewType:"online",pathConfig:{type:"online",getData:!0,recurrent:!0,checkMultipleIds:!0,ids:[]}}]}),e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-bottom-right",t.preventDuplicates=!1,t.progressBar=!0,n.definePalette("365xchangeViolet",{50:"ffffff",100:"ffffff",200:"ffffff",300:"4b0082",400:"431862",500:"310055",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),n.definePalette("365xchangeRed",{50:"ca5ba3",100:"ca3395",200:"960061",300:"960061",400:"701c53",500:"61003f",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),n.definePalette("365xchangeGreen",{50:"b8db62",100:"abdb37",200:"82b700",300:"82b700",400:"6b8922",500:"547700",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),n.definePalette("365xchangeYellow",{50:"e0dd65",100:"e0dc38",200:"c2bd00",300:"c2bd00",400:"918f24",500:"7e7b00",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),n.theme("default").primaryPalette("365xchangeViolet"),n.theme("365violet").primaryPalette("365xchangeViolet"),n.theme("365red").primaryPalette("365xchangeRed"),n.theme("365green").primaryPalette("365xchangeGreen"),n.theme("365yellow").primaryPalette("365xchangeYellow"),a.value("themeProvider",n),n.alwaysWatchTheme(!0)}n.$inject=["$logProvider","toastrConfig","$mdThemingProvider","$provide","InfinicastWrapperProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.config=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ENV:"production",BASEURL_PROD:"365xchange.de",BASEURL_DEV:"stage.365xchange.net",API_ENTRY:"/api/",HTTP:"http://",HTTPS:"https://",VERSION:"0.2.2"};t.constant=n},function(e,t){"use strict";function n(e,t,n,a){"ngInject";e.state("home",{url:"/",parentState:null,templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main",data:{pageTitle:"365",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{categories:["documentsService",function(e){return e.callDocumentsCore()}]}}).state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"login",data:{pageTitle:"365 | Login",accessSettings:{"public":!0,accesskey:!1,customPerms:null}}}).state("register",{url:"/register",templateUrl:"app/register/register.html",controller:"RegisterController",controllerAs:"register",data:{pageTitle:"365 | Register",accessSettings:{"public":!0,accesskey:!1,customPerms:null}}}).state("confirm",{url:"/confirm",templateUrl:"app/confirm/confirm.html",controller:"ConfirmController",controllerAs:"confirm",params:{confirmCode:null,squash:!0},data:{pageTitle:"365 | Confirm Registration",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{info:["LoginService","$stateParams",function(e,t){return t.confirmCode?e.registerInformation(t.confirmCode):{}}]}}).state("changelog",{url:"/changelog",templateUrl:"app/changelog/changelog.html",controller:"ChangeLogController",controllerAs:"log",data:{pageTitle:"changelog",accessSettings:{"public":!1,accesskey:!1,customPerms:null}}}).state("search",{url:"/search/:searchPhrase",templateUrl:"app/search/search.html",controller:"SearchController",controllerAs:"search",data:{pageTitle:"365 | Search",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{core_docs:["documentsService","$stateParams",function(e,t){return e.searchDocumentsCore(t.searchPhrase)}],collections:["documentsService","$stateParams",function(e,t){return e.callDocumentRelated("Type")}],docs:["documentsService","$stateParams",function(e,t){return e.filter=null,e.callDocumentByOneCollection(2047)}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyHome",{url:"/ak/home/:accessKey",templateUrl:"app/accesskey/home.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Access Key User Home",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{docs:["storedAccessKey","documentsService","LocalAccessService","$stateParams",function(e,t,n,a){t.filter=null;var o=a.accessKey||(e?n.decryptCredentials(e):"");return t.callDocumentByAccessKey(o)}],storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyDocument",{url:"/ak/document/:accessKey",templateUrl:"app/accesskey/accesskey.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Documents By Access Key",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],docs:["storedAccessKey","LocalAccessService","documentsService","$stateParams",function(e,t,n,a){n.filter=null;var o=a.accessKey||(e?t.decryptCredentials(e):"");return n.callDocumentByAccessKey(o)}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyDocumentView",{url:"/ak/document/:accessKey/:documentId",templateUrl:"app/accesskey/accesskey.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Documents By Access Key",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],docs:["storedAccessKey","LocalAccessService","documentsService","$stateParams",function(e,t,n,a){n.filter=null;var o=a.accessKey||(e?t.decryptCredentials(e):"");return n.callDocumentByAccessKey(o)}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyCollection",{url:"/ak/:accessKey/:collectionId",parentState:"accesskeyHome",templateUrl:"app/collection/collection.html",controller:"CollectionController",controllerAs:"collection",params:{collectionLocale:null},data:{pageTitle:"365 | Collections",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{collection:["documentsService","$stateParams",function(e,t){e.filter=null;var n=t.accessKey||(storedAccessKey?LocalAccessService.decryptCredentials(storedAccessKey):"");return e.callDocumentByAccessKey(n)}]}}).state("accesskeyDocumentFromCollection",{url:"/ak/:accessKey/:collectionId/:customerId",parentState:"accesskeyCollection",templateUrl:"app/accesskey/accesskey.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Documents By Access Key",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],docs:["storedAccessKey","LocalAccessService","documentsService","$stateParams",function(e,t,n,a){n.filter=null,a.customerId&&(n.filter=[{collection:a.customerId}]);var o=a.accessKey||(e?t.decryptCredentials(e):"");return n.callDocumentByAccessKey(o)}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyDocumentViewLong",{url:"/ak/:accessKey/:collectionId/:customerId/:documentId",templateUrl:"app/accesskey/accesskey.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Documents By Access Key",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],docs:["storedAccessKey","LocalAccessService","documentsService","$stateParams",function(e,t,n,a){var o=a.accessKey||(e?t.decryptCredentials(e):"");return n.callDocumentByAccessKey(o)}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("home.collection",{url:":collectionId",parentState:"home",templateUrl:"app/collection/collection.html",controller:"CollectionController",controllerAs:"collection",params:{collectionLocale:null},data:{pageTitle:"365 | Collections",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{collection:["documentsService","$stateParams",function(e,t){return e.callDocumentRelated(t.collectionId)}]}}).state("home.collection.customer",{url:"/:customerId",parentState:"home.collection",templateUrl:"app/customer/customer.html",controller:"CustomerController",controllerAs:"customer",params:{category:"CUSTOMER",collectionLocale:null,locale:"",currentCollection:null},data:{pageTitle:"365 | Documents",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{docs:["documentsService","$stateParams",function(e,t){return e.filter=null,e.callDocumentByOneCollection(t.customerId)}],storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("home.collection.document",{url:"/:customerId/:documentId",parentState:"home.collection",templateUrl:"app/customer/customer.html",controller:"CustomerController",controllerAs:"customer",params:{category:"CUSTOMER",collectionLocale:null,locale:"",currentCollection:null},data:{pageTitle:"365 | Documents",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{docs:["documentsService","$stateParams",function(e,t){return e.filter=null,e.callDocumentByOneCollection(t.customerId)}],storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}),n.html5Mode(!0),t.otherwise("/")}n.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.routerConfig=n},function(e,t){"use strict";function n(e){"ngInject";e.connection("iDB365_").upgradeDatabase(1,function(e,t,n){t.createObjectStore("user",{keyPath:"user_key"})}).upgradeDatabase(2,function(e,t,n){t.createObjectStore("core",{keyPath:"id"})}).upgradeDatabase(3,function(e,t,n){t.createObjectStore("collections",{keyPath:"id"})}).upgradeDatabase(4,function(e,t,n){t.createObjectStore("documents",{keyPath:"id"})}).upgradeDatabase(5,function(e,t,n){t.createObjectStore("document_detail",{keyPath:"id"})}).upgradeDatabase(6,function(e,t,n){t.createObjectStore("expiration",{keyPath:"key"})}).upgradeDatabase(7,function(e,t,n){t.createObjectStore("partner",{keyPath:"id"})})}n.$inject=["$indexedDBProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.indexedDBConfig=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i,r){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$window=o,this.$indexedDB=r,this.$q=i}return e.$inject=["$http","$log","$window","$q","$indexedDB"],a(e,[{key:"getAllRecords",value:function(e){if(e){var t=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.getAll().then(function(e){t.resolve(e)})}),t.promise}}},{key:"cleanSelectedRecords",value:function(e,t){if(e){var n=[],a=this;this.getAllRecords(e).then(function(o){angular.forEach(o,function(e){e[t.subSetName]&&angular.forEach(e[t.subSetName],function(a){a[t.innerIdName]==t.innerIdValue&&-1==n.indexOf(e.id)&&n.push(e.id)})}),n.length>0&&angular.forEach(n,function(t){a.deleteSingleRecord(e,t)})})}}},{key:"cleanSelectedRecordsByCollectionForUser",value:function(e,t,n){if(e){var a=[],o=this,i=function(t,n,a){var o=void 0;o="documents"==e?/^(\w+)_\d+_\d+\/(\d+)$/gim:/^([\/<all\/>|\w]+)\/(\d+)$/gim;var i=o.exec(a);return i&&i.length&&i[1]==t&&i[2]==n?!0:!1};this.getAllRecords(e).then(function(r){r.length&&r.filter(function(e){return i(t,n,e.id)&&a.push(e.id),!0}),a.length>0&&angular.forEach(a,function(t){o.deleteSingleRecord(e,t)})})}}},{key:"updateSelectedRecords",value:function(e,t){function n(e,t){return angular.forEach(t,function(n,a){e[a]&&(e[a]=t[a])}),e}if(e){var a=[],o=this;o.getAllRecords(e).then(function(i){angular.forEach(i,function(i){i[t.subSetName]&&angular.forEach(i[t.subSetName],function(r,c){if(r[t.innerIdName]==t.innerIdValue&&-1==a.indexOf(i.id)){var s=i;s[t.subSetName][c]=n(r,t.data),o.upsertRecord(e,s),a.push(i.id)}})})})}}},{key:"getSingleRecordPromise",value:function(e,t,n){if(e&&t){var a=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.find(t).then(function(e){var t=e.expireDate,o=n&&e[n]?e[n]:e;t&&(new Date).getTime()>=t?a.resolve(null):a.resolve(o)},function(e){a.resolve(null)})}),a.promise}}},{key:"upsertRecord",value:function(e,t){if(e&&t){var n=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.upsert(t).then(function(e){n.resolve(e)})}),n.promise}}},{key:"insertRecord",value:function(e,t){if(e&&t){var n=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.insert(t).then(function(e){n.resolve(e)})}),n.promise}}},{key:"clearStorage",value:function(e){if(e){var t=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.clear().then(function(e){t.resolve(e)})}),t.promise}}},{key:"deleteSingleRecord",value:function(e,t){if(e&&t){var n=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e["delete"](t).then(function(e){n.resolve(e)})}),n.promise}}}]),e}();t.StorageService=o},function(e,t){"use strict";function n(e,t,n,a,o,i,r){"ngInject";n.searchService=o,n.showSplash=!0,n.infinicast=i;var c=n.$on("$stateChangeStart",function(a,o,i,r,s,l){n.title=o.data?o.data.pageTitle:i.locale||i.collectionLocale||"",e.checkAuth().then(function(a){a?(n.infinicast&&(n.infinicast.isUserValid(!0)?n.infinicast.listen():e.getUser().then(function(e){n.infinicast.setUser(e),n.infinicast.listen()})),c()):e.isStateAccessible(o,i)?c():(c(),t.go("login"))})});n.$on("$locationChangeStart",function(){n.previousPage=location.pathname})}n.$inject=["CheckAuthService","$state","$rootScope","LocalAccessService","SearchService","InfinicastWrapper","$window"],Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u,m,p){"ngInject";n(this,o),i.globalState="home",a.documentsService=c;var f=function(e,t,n){return u.dropzone=a.dzMethods.getDropzone(),u.localAcceptHandler(e,t)};a.dzOptions={url:"/",paramName:"files",maxFilesize:"30",addRemoveLinks:!0,dictInvalidFileType:"Invalid file",accept:f,dictDefaultMessage:'<span class="dz-drop-file"><strong>Drop file</strong> or click to upload</span>',previewTemplate:u.template},a.documentsService.searchFilter="",this.docs=e.data.collections,this.$q=l;var g=(this.$q.defer(),this);a.creatableClasses=[{value:"CUSTOMER",locale:"Kunden"},{value:"LEAD",locale:"Lead"},{value:"VENDOR",locale:"Lieferanten"},{value:"PROJECT",locale:"Projekt"}],this.filterClasses=function(e,t){t=t||g.docs;var n=[];return angular.forEach(e,function(e){var a=!1;angular.forEach(t,function(t){t.group.value==e.value&&(a=!0)}),a||n.push(e)}),n},a.applySearchFilter=function(){g.filteredDocs=d("filter")(g.docs,a.searchService.searchCriteria(c.searchFilter))},a.$watch("documentsService.searchFilter",function(e,t){""==e&&(a.filteredDocs=null),e!==t&&a.applySearchFilter()}),a.fbParams={},a.fbParams.creatableClasses=this.filterClasses(a.creatableClasses),a.toggleMode={thisState:r.getState(),alterState:r.getAlterState()},a.cardMode="Card"===(s.getUserSetting("viewMode")||r.getDefaultViewMode()),a.customerStateChangedListener=i.$on("customerStateChanged",function(e,t){a.toggleMode={thisState:t.thisState,alterState:t.alterState},a.cardMode="Card"===(s.getUserSetting("viewMode")||r.getDefaultViewMode())}),a.addListener=i.$on("CallAddMethod",function(e,t){a.addItem(e,t)}),a.checkNewCoreItem=function(e){var t=!0;return angular.forEach(g.docs,function(n,a){return n.group.value==e?void(t=!1):void 0}),t},a.addItem=function(e,t){var n=g.$q.defer();return t&&!function(){t.customErrors=[];var e=t.value;t.resultPromise=n.promise,c.callDocumentsCore(!0).then(function(o){if(o){g.docs=o.data.collections;var i=a.checkNewCoreItem(e);if(i){var r={value:e};t.resultPromise=c.callAddCoreItem(r),t.resultPromise.then(function(e){e&&c.callDocumentsCore(!0).then(function(t){t&&(g.docs=t.data.collections,n.resolve(e))})})}else t.customErrors.push({errorCode:"5001",location:"value",value:e}),n.resolve(null)}})}(),n.promise},a.$on("$destroy",function(){a.addListener(),a.customerStateChangedListener()})};a.$inject=["categories","themeProvider","$scope","$rootScope","ViewModeService","documentsService","LocalAccessService","$q","$filter","UploadService","$state","$stateParams"],t.MainController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u){"ngInject";function m(){t.authenticateUser(p.userInfo).then(function(t){if("200"==t.data.response.errorcode)r.clearStorage("user"),a.accessKeyUser=null,a.setCredentails(p.userInfo),s.success(u("i18n")("user.loggedIn"),"Success"),i.setUser(t.data.user),l.infinicast&&(l.infinicast.setUser(t.data.user),l.infinicast.listen()),l.previousPage&&!l.loggedOut&&"/login"!=l.previousPage&&"/register"!=l.previousPage&&-1==l.previousPage.indexOf("/ak/")?d.path(l.previousPage):e.go("home");else{var n=u("i18n")("error.5009");s.error(n),c.login.loginForm.passWord.$error.server=n,c.login.loginForm.serviceErrorMessage=t.data.response.errormessage,c.login.loginForm.serviceErrorCode=t.data.response.errorcode}})}n(this,o),this.onClickForRegistration=function(){e.go("register")},this.onLogin=function(){this.loginForm.$valid&&m()};var p=this};a.$inject=["$state","LoginService","LocalAccessService","CheckAuthService","StorageService","$scope","toastr","$rootScope","$location","$filter"],t.LoginController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s){"ngInject";function l(n){t.registerUser(n.person).then(function(t){"200"==t.data.response.errorcode?(c.success("Thank You! Please, check your e-mail!","Success"),e.go("confirm")):c.error(t.data.response.errormessage,"Error")})}n(this,o),r.submitToServer=function(){if(this.registration.registrationForm.$valid)if(this.registration.person.iagreewith)l(this.registration);else{var e=s("i18n")("error.5010");c.error(e,"Error")}else{var e=s("i18n")("error.5004");c.error(e,"Error")}}};a.$inject=["$state","LoginService","LocalAccessService","CheckAuthService","$scope","toastr","$filter"],t.RegisterController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s){"ngInject";function l(e){t.registerInformation(e.confirmCode).then(function(t){"200"==t.response.errorcode?(e.eMailName=t.data.response.eMailName,d(e)):c.error(t.response.errormessage,"Error")})}function d(n){t.confirm(n).then(function(t){"200"==t.response.errorcode?(c.success("Thank You! Your account has been confirmed! You can log in now.","Success"),e.go("login")):c.error(t.response.errormessage,"Error")})}n(this,o),r.submitToServer=function(){if(this.registration.confirmForm.$valid)l(this.registration);else{var e=s("i18n")("error.5004");c.error(e,"Error")}}};a.$inject=["$state","LoginService","LocalAccessService","CheckAuthService","$scope","toastr","$filter"],t.ConfirmController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u,m,p,f){"ngInject";n(this,o),c.globalState="home.collection",c.currentCollectionId=l.collectionId,r.ak=l.accessKey,r.params={};var g=function(e,t,n){return p.dropzone=r.dzMethods.getDropzone(),p.localAcceptHandler(e,t)};r.dzOptions={url:"/",paramName:"files",maxFilesize:"30",addRemoveLinks:!0,dictInvalidFileType:"Invalid file",accept:g,dictDefaultMessage:'<span class="dz-drop-file"><strong>Drop file</strong> or click to upload</span>',previewTemplate:p.template},r.documentsService=s,r.viewModeService=a,r.documentsService.searchFilter="",e.data&&e.data.collections?(this.docs=e.data.collections,r.params.currentClass=r.parentClass,e.data.collections.length&&(r.params.currentClass=e.data.collections[0].group.locale,s.currentClass=e.data.collections[0].group)):(this.docs=[],e.data&&e.data.avail_filter&&(this.docs=s.filterToCollections(e.data.avail_filter,l.collectionId),s.akCollections=this.docs,r.params.currentClass=r.parentClass,this.docs.length&&(r.params.currentClass=this.docs[0].group.locale,s.currentClass=this.docs[0].group))),s.currentClass&&(c.stateInfo||(c.stateInfo={}),c.stateInfo.currentClass=s.currentClass,c.stateInfo.currentCollection={},s.currentCollection={}),this.$q=d;var v=this.$q.defer();r.parentClass=l.collectionId;var h=this;r.toggleMode={thisState:a.getState(),alterState:a.getAlterState()},r.applySearchFilter=function(){h.filteredDocs=m("filter")(h.docs,r.searchService.searchCriteria(s.searchFilter,!r.viewModeService.showEmptyCollections))},r.$watch("documentsService.searchFilter",function(e,t){r.applySearchFilter()}),r.emptyCollectionFilter=function(){return function(e){return r.viewModeService.showEmptyCollections?!0:e.count>0}},r.$watch("viewModeService.showEmptyCollections",function(e,t){e!=t&&r.applySearchFilter()}),r.cardMode="Card"===(i.getUserSetting("viewMode")||a.getDefaultViewMode()),r.editTitle=function(e){e.stopPropagation(),e.preventDefault()},h.editDialog=function(e,t){u.show({clickOutsideToClose:!0,controller:["$mdDialog",function(e){if(t&&t.title){this.close=function(){e.cancel()},this.errorMessages={5001:"Collection already exists",5002:"Cannot add collection to given class"},this.errors=[];var n=this;n.value=t.title.value,n.locale=t.title.locale,this.submit=function(){this.errors=[],this.formErrors=[],n.editForm.$valid&&(n.editForm.resultPromise=r.editCollection({form:n.editForm,item:t}),n.editForm.resultPromise&&n.editForm.resultPromise.then(function(t){n.editForm.customErrors&&n.editForm.customErrors.length>0?!function(){var e=n.errorMessages;angular.forEach(n.editForm.customErrors,function(t,a){n.errors.push(e[t.errorCode]),n.formErrors.customError=e[t.errorCode]})}():e.hide()}))}}}],controllerAs:"dialog",templateUrl:"app/collection/editDialog.html",hasBackdrop:!1,targetEvent:e}),e.stopPropagation(),e.preventDefault()},r.customerStateChangedListener=c.$on("customerStateChanged",function(e,t){r.toggleMode={thisState:t.thisState,alterState:t.alterState},r.cardMode="Card"===(i.getUserSetting("viewMode")||a.getDefaultViewMode())}),r.addListener=c.$on("CallAddMethod",function(e,t){r.addItem(e,t)}),r.checkNewItem=function(e){var t=!0;return angular.forEach(h.docs,function(n,a){return n.title.value==e?void(t=!1):void 0}),t},r.addItem=function(e,t){return t&&!function(){t.resultPromise=!0,t.customErrors=[];var e=t.value.$modelValue;t.resultPromise=v.promise;var n=l.collectionId;t.resultPromise=s.callDocumentRelated(n,!0),t.resultPromise.then(function(a){if(a){h.docs=a.data.collections;var o=r.checkNewItem(e);if(o){var i=["Monat","NEW"];if(-1==i.indexOf(r.parentClass)){var c={value:e};s.callAddCollectionItem(n,c).then(function(e){e&&s.callDocumentRelated(n,!0).then(function(t){t&&(h.docs=t.data.collections,v.resolve(e))})})}else t.customErrors.push({errorCode:"5002",location:"value",value:e}),v.resolve(null)}else t.customErrors.push({errorCode:"5001",location:"value",value:e}),v.resolve(null)}})}(),v.promise},r.editCollection=function(e){v=h.$q.defer();var t=e.form,n=e.item;return t&&!function(){t.resultPromise=!0,t.customErrors=[];var e=t.value.$modelValue,a=t.locale.$modelValue;t.resultPromise=v.promise;var o=l.collectionId;t.resultPromise=s.callDocumentRelated(o,!0),t.resultPromise.then(function(i){if(i){h.docs=i.data.collections;var c=r.checkNewItem(e);if(c){var l=["Monat","Type","NEW","WORKFLOW"];if(-1==l.indexOf(r.parentClass)){var d={value:e,locale:a};s.callEditCollectionItem(o,d,n).then(function(e){e&&s.callDocumentRelated(o,!0).then(function(t){t&&(h.docs=t.data.collections,v.resolve(e))})})}else t.customErrors.push({errorCode:"5002",location:"value",value:e}),v.resolve(null)}else t.customErrors.push({errorCode:"5001",location:"value",value:e}),v.resolve(null)}})}(),v.promise},r.editPartner=function(e,t,n){var a=null;l.accessKey&&(a=l.accessKey);var o=r;u.show({controller:"PartnerController",templateUrl:"app/partner/partner.html",preserveScope:!0,parent:angular.element(document.body),targetEvent:e,disableParentScroll:!0,clickOutsideToClose:!0,locals:{thatScope:o,collectionId:t,key:a},hasBackdrop:!0,onRemoving:function(e,t){r.mdClosing=!0,thatScope.mdClosing=!0},transformTemplate:function(e){return'<div class="md-dialog-container edit-doc">'+e+"</div>"}}).then(function(){},function(){}),e.stopPropagation(),e.preventDefault()},r.$on("$destroy",function(){r.addListener(),r.customerStateChangedListener()})};a.$inject=["collection","themeProvider","ViewModeService","LocalAccessService","$scope","$rootScope","documentsService","$stateParams","$q","$mdDialog","$filter","UploadService","$state"],t.CollectionController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u,m,p,f,g,v,h,y,b,S,C){"ngInject";n(this,o);var w=this;l.pdfState={page:1},l.formChanged=!1,l.accessKey=i,l.trustSrc=function(e){return t.trustAsResourceUrl(e)},l.createFilterFor=function(e){function t(e){return-1!==angular.lowercase(e.title.locale).indexOf(n)}var n=angular.lowercase(e),a=[];return angular.forEach(u.allCollections,function(e){t(e)&&a.push(e)}),a},m(function(){l.querySearch=function(e){return e?l.createFilterFor(e):l.typesavailable}},400),l.transformChip=function(e){return this.saveForm.collections.$dirty=!0,e},l.removeChip=function(e){this.saveForm.collections.$dirty=!0},l.getCurrentType=function(){return l.editForm.type.value},l.hasCollection=function(e){var t=!1;return angular.forEach(l.editForm.typeList,function(n){return n.group.value==e?void(t=!0):void 0}),t},l.autoFillWFProcess=function(){if(l.newWorkFlow&&l.editForm.workprocess&&l.hasCollection("CUSTOMER")&&"INVOICE"==l.getCurrentType()){var e=l.editForm.workprocess.filter(function(e){return"outgoing invoice"===e.name});1==e.length&&(l.editForm.workprocessToStart=e[0],l.formChanged=!0,r.success("Applying default workflow process [outgoing invoice]","Notice"))}},l.populateData=function(t){if(t.data.document){var n=t.data;l.selectedItem={},l.searchText="",l.basepath=f.getBaseUrl()+"file",l.documentUrl=l.basepath+"/original/"+n.document.uuid,l.documentUrlLarge=l.basepath+"/large/"+n.document.uuid;var a=new Date(n.document.date),o=void 0;if(isNaN(Date.parse(a))){var i=/(\d{4})(\d{2})(\d{2})/;o=new Date(n.document.date.replace(i,"$1-$2-$3"))}else o=a;var s=new Date(n.document.created||n.document.date),d=n.document.updated;
if(n.document.hasOwnProperty("types_available")){var m=n.document.types_available[0];l.userType=m.locale,l.typesavailable=n.document.types_available}l.typeList=n.document.collections,l.editForm=n.document,l.editForm.documentTitle=t.data.document.title,l.editForm.text=t.data.document.text,l.editForm.documentDate=o,l.editForm.currentDate=o,l.editForm.documentName=n.document.filename,l.editForm.createdDate=s,l.editForm.payDate=new Date,l.editForm.changedDate=new Date(d),l.editForm.workflow=t.data.document.workflow,l.editForm.workflowTips=t.data.document.workflowTips,l.editForm.userType=l.userType,l.editForm.typesavailable=l.typesavailable,l.editForm.typeList=n.document.collections,l.editForm.allCollections=u.allCollections||n.document.collections;var g=!1;if(g){var v=[{id:123,name:"outgoing unilever invoice",description:"Ausgangsrechnung an Unilever-Kunden",type:"INVOICE",direction:"OUT",scope:"private"},{id:1,name:"outgoing invoice",description:"Ausgangsrechnung an den Kunden",type:"INVOICE",direction:"OUT",scope:"public"},{id:2,name:"incoming invoice",description:"Eingangsrechnung vom Lieferanten",type:"INVOICE",direction:"IN",scope:"public"}],h={id:34,process:{id:1,name:"outgoing invoice",description:"an invoice is send to an customer"},done:[{step:"sent",desc:"document has been sent",when:"2014-01-07 11:11:11",who:"John Doe"},{step:"started",desc:"workflow has been started",when:"2014-01-07 11:11:11",who:"John Doe"}],next:[{step:"received",desc:"document has been received"},{step:"booked",desc:"document has been booked"}]},y=1;1==y&&(l.editForm.workprocess=v,l.editForm.workflow=null),2==y&&(l.editForm.workprocess=null,l.editForm.workflow=h),l.newWorkFlow=g}l.originalEditForm=angular.copy(l.editForm)}else{var b=c("i18n")("error.5005");t.error&&(b=t.error),r.error(b,"Error"),p.hide()}l.editFormWatch&&l.editFormWatch(),l.editFormWatch=l.$watch("editForm",function(t,n){t&&t!=n&&(l.originalEditForm&&angular.equals(l.editForm,l.originalEditForm)?(l.formChanged=!1,e.formChanged=!1):(l.formChanged=!0,e.formChanged=!0))},!0),l.autoFillWFProcess()},u.callDocumentById(a,i).then(function(e){l.populateData(e)}),l.goTo=function(e,t){var n=v.hash();v.hash(t),h(),v.hash(n),e.stopPropagation(),e.preventDefault()},l.toggleSideMenu=function(){l.sideMenu=!l.sideMenu},l.hideDialog=function(){p.hide()},l.cancel=function(e){l.formChanged&&!i?l.showSaveConfirmation=!0:p.hide()},l.zoomIn=function(){g.$getByHandle("pdf-container").zoomIn()},l.zoomOut=function(){g.$getByHandle("pdf-container").zoomOut()},l.pagePrev=function(){l.getPdfCurrentPage()>1&&l.pdfGoToPage(l.getPdfCurrentPage()-1)},l.pageNext=function(){l.getPdfCurrentPage()<l.pdfTotalPages&&l.pdfGoToPage(l.getPdfCurrentPage()+1)},l.getPdfCurrentPage=function(){return g.$getByHandle("pdf-container").getCurrentPage()},l.pdfGoToPage=function(e){var t=+e;""!=e&&angular.isNumber(t)&&!isNaN(t)&&(t=t>l.pdfTotalPages?l.pdfTotalPages:t>0?t:1,g.$getByHandle("pdf-container").goToPage(t),l.pdfState={page:t})},l.unlockToggle=function(){l.unlockZoom=!l.unlockZoom},l.useSheet=function(e){l.xldataSheets[e]&&(l.xlsheetIndex=e,l.xldata=l.xldataSheets[e])},l.hasSheetByIndex=function(e){return l.xldataSheets[e]?!0:!1},l.applyXLIndex=function(e){l.xldataSheets[e]&&(l.xlprocessing=!0,l.xlsheetIndex=e,l.xldata=l.xldataSheets[e],l.gridOptions.columnDefs=[],l.gridApi.core.notifyDataChange(b.dataChange.COLUMN),l.gridOptions.data=l.xldata,l.xlsheet=l.xlsheetNames[e],l.xlprocessing=!1)},l.prevSheet=function(){if(0!=e){var e=l.xlsheetIndex-1;l.applyXLIndex(e)}},l.nextSheet=function(){var e=l.xlsheetIndex+1;l.applyXLIndex(e)},l.onViewFile=function(e){return e?l.showControls=!0:l.showControls=!1,!0},l.documentLoaded=!1,l.viewFile=function(e){function t(e){return e.length>4?e.indexOf(".pdf")===e.length-4:!1}function n(e){var t=[".png",".jpg",".jpeg",".gif"];return t.some(function(t,n){return e.length>t.length?e.indexOf(t)===e.length-t.length:!1})}function o(e){var t=[".txt",".log",".md",".readme"];return t.some(function(t,n){return e.length>t.length?e.indexOf(t)===e.length-t.length:!1})}function s(e){var t=[".xml",".report",".xl",".xls",".xlsx",".ods"];return t.some(function(t,n){return e.length>t.length?e.indexOf(t)===e.length-t.length:!1})}if(l.editForm&&!l.documentLoading&&!l.fileURL){l.documentLoading=!0;var d=null;l.editForm.hassignature>0&&(d="SIGNEDPDF");var m=l.editForm.filename;if(w.base64data&&w.base64file&&(m=w.base64file),t(m))if(m)l.documentLoading=!1,l.fileType="PDF",l.documentLoaded=!0;else{var p=c("i18n")("error.5005");r.error(p,"Error")}else if(n(m)){l.documentLoading=!0,l.fileType="IMG",l.fileURL="/";var f=document.getElementById("view_img");f.src=l.documentUrl,f.onload=function(){l.documentLoading=!1,l.documentLoaded=!0}}else o(m)?(l.fileType="TXT",u.callFileById(a,d,i).then(function(e){if(e&&e.data.file){var t=e.data.file.file;w.base64data&&w.base64file&&(t=w.base64data),t=atob(t),l.textData=t}}),l.fileURL="/",l.documentLoading=!1,l.documentLoaded=!0):s(m)?(l.fileType="XL",w.initXLViewer(),l.xlprocessing=!0,u.callFileById(a,d,i).then(function(e){if(e&&e.data.file){var t=e.data.file.file;w.base64data&&w.base64file&&(t=w.base64data),t=atob(t);var n=y.readXLdata(t),a={};n?(a=y.workbooktoJson(n),w.resetGrid(),l.xlsheetIndex=0,a.data&&a.data[l.xlsheetIndex]&&(l.xldata=a.data[l.xlsheetIndex],l.xlsheet=a.names[l.xlsheetIndex],l.xlsheetNames=a.names,l.xldataSheets=a.data,l.gridOptions.columnDefs=[],l.gridOptions.data=l.xldata,l.xlprocessing=!1)):console.log("error"),l.documentLoading=!1,l.documentLoaded=!0}},function(e){l.documentLoading=!1,l.documentLoaded=!0})):(l.fileStatus="Unsupported",l.documentLoading=!1,l.documentLoaded=!0)}},l.docDetailsSections={mainBlock:!0,dataBlock:!0,collectionsBlock:!0,infoBlock:!0,workflowBlock:!0},l.toggleItem=function(e){l.docDetailsSections[e]=!l.docDetailsSections[e]},l.focusControl=function(e){},l.toBase64=function(e){return btoa(e)},l.base64toBlob=function(e,t){t=t||"";for(var n=1024,a=atob(e),o=a.length,i=Math.ceil(o/n),r=new Array(i),c=0;i>c;++c){for(var s=c*n,l=Math.min(s+n,o),d=new Array(l-s),u=s,m=0;l>u;++m,++u)d[m]=a[u].charCodeAt(0);r[c]=new Uint8Array(d)}return new Blob(r,{type:t})},this.initXLViewer=function(){l.xldata=[],l.columnDefs=[],l.gridApi={},l.gridOptions={onRegisterApi:function(e){l.gridApi=e}}},this.resetGrid=function(){l.gridOptions.columnDefs=[]},l.getFile=function(e){if(l.xlprocessing=!0,e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){var n=t.result,a=y.readXLdata(n),o={};a&&(o=y.workbooktoJson(a)),w.resetGrid(),o.data&&o.data[0]&&l.$apply(function(){l.xldata=o.data[0],l.xlprocessing=!1})},t.readAsBinaryString(e.files[0])}},l.updateFileContents=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(n){w.base64data=btoa(t.result),w.base64file=e.files[0].name},t.readAsBinaryString(e.files[0])}},l.downloadDoc=function(e){l.showDLdBox=!1,!e&&l.editForm&&l.editForm.filetypes&&(e=l.editForm.filetypes.SIGNEDPDF||l.editForm.filetypes.ORIGINAL),u.callFileById(a,e,i).then(function(e){if(e&&e.data.file){var t=e.data.file.file,n=e.data.file.filename;if(t&&n){t=l.base64toBlob(t);var a=new Blob([t]);s.saveAs(a,n)}else{var o=c("i18n")("error.5007");r.error(o,"Error")}}else{var o=c("i18n")("error.5006");r.error(o,"Error")}})},l.toggleDownloadBox=function(){l.showDLdBox=!l.showDLdBox},l.updateCurrentDocumentList=function(t,n){function a(t,n,a,o,i){n[t]&&n[t]!=a[t]&&(i?e.docs[o][t]=n[t][i]:e.docs[o][t]=n[t])}angular.forEach(e.docs,function(e,o){e.id==t&&(a("title",n,e,o),a("date",n,e,o),a("type",n,e,o),a("text",n,e,o),a("netvaluegoods",n,e,o),a("totalamount",n,e,o),a("taxamount",n,e,o),a("collections",n,e,o))})},l.getDocumentIdWithOffset=function(t){var n=null;return angular.forEach(e.docs,function(o,i){o.id==a&&(0>=i+t?l.hasNoPrevDocument=!0:l.hasNoPrevDocument=!1,i+t+1>=e.docs.length?l.hasNoNextDocument=!0:l.hasNoNextDocument=!1,e.docs[i+t]&&(n=e.docs[i+t].id))}),n?n:void 0},l.getDocumentIdWithOffset(0),l.loadDocumentWithOffset=function(e){var t=l.getDocumentIdWithOffset(e);t&&l.loadDocument(t)},l.loadDocument=function(e){u.callDocumentById(e,i).then(function(t){if(t.data.document){l.populateData(t),a=e,l.formChanged=!1,l.saveForm.$setPristine(),l.saveForm.$setSubmitted(),C.documentId=e;var n="home.collection.document";C.accessKey&&(n=C.collectionId&&C.customerId?"accesskeyDocumentViewLong":"accesskeyDocumentView"),S.go(n,C,{reload:!1,notify:!1})}},function(e){})},l.archiveOrRestore=function(e){var t=(this.saveForm,"change"),n={},o={};if(e.authorized&&-1!==e.authorized.indexOf(t)){e.deleted?n.deleted=null:n.deleted=(new Date).getTime();var s=u.callSaveDocumentById(a,n);s.then(function(t){if(t.data&&t.data.response&&"200"==t.data.response.errorcode){e.deleted?r.success(c("i18n")("customer.fileRestoredMsg"),"Success"):r.success(c("i18n")("customer.fileArchivedMsg"),"Success"),e.deleted=n.deleted,u.callDocumentById(a,i,!0),l.populateData(t),l.formChanged=!1,l.saveForm.$setPristine(),l.saveForm.$setSubmitted();var s=angular.merge(n,o);l.updateCurrentDocumentList(a,s),u.updateRelatedDocumentCache("documents",a,s)}else{var d=c("i18n")("error.5007");r.error(d,"Error")}})}},l.resetWorkflowStep=function(){delete l.editForm.workflowNextStep},l.workflowGoNextStep=function(){if(l.editForm.workflow&&l.editForm.workflow.next&&l.editForm.workflow.next[0]){var e=l.editForm.workflow.next[0];l.editForm.workflowNextStep=e.step}},l.save=function(e){function t(e){var t=[];return angular.forEach(e,function(e){e.id&&t.push({id:e.id})}),t}var n=this.saveForm,o="change",s={},d={};if(e.authorized&&-1!==e.authorized.indexOf(o)&&n.$valid){if(l.editForm.workflowNextStep&&l.editForm.workflow.next&&l.editForm.workflow.next[0]&&l.editForm.workflow.next[0].step==l.editForm.workflowNextStep&&(s.workflow={step:l.editForm.workflowNextStep}),n.title.$dirty&&n.title.$modelValue){var m=n.title.$modelValue;s.title=m}if(n.date&&n.date.$dirty&&n.date.$modelValue){var p=n.date.$modelValue,f=c("date")(p,"yyyy-MM-dd");s.date=f}if(n.type.$dirty&&n.type.$modelValue&&!function(){var t=n.type.$modelValue,a=t,o=e.types_available.filter(function(e){return e.value===t});o&&o[0]&&(a=o[0].locale),s.type={value:t},d.type={value:t,locale:a}}(),n.workprocessToStart&&n.workprocessToStart.$dirty&&n.workprocessToStart.$modelValue){var g=n.workprocessToStart.$modelValue;s.workflow={process:{id:g.id}}}if(n.text.$dirty){var v=n.text.$modelValue;s.text=v}if(n.netvaluegoods.$dirty&&n.netvaluegoods.$modelValue){var h=n.netvaluegoods.$modelValue;s.netvaluegoods=h}if(n.totalamount.$dirty&&n.totalamount.$modelValue){var y=n.totalamount.$modelValue;s.totalamount=y}if(n.totaltax.$dirty&&n.totaltax.$modelValue){var b=n.totaltax.$modelValue;s.totaltax=b}if(n.collections.$dirty&&n.collections.$modelValue){var S=n.collections.$modelValue;s.collections=t(S),d.collections=n.collections.$modelValue}var C=u.callSaveDocumentById(a,s,i);C.then(function(e){if(e.data&&e.data.response&&"200"==e.data.response.errorcode){r.success("File has been updated successfully","Success"),u.callDocumentById(a,i,!0),l.populateData(e),l.formChanged=!1,l.saveForm.$setPristine(),l.saveForm.$setSubmitted();var t=angular.merge(s,d);l.updateCurrentDocumentList(a,t),u.updateRelatedDocumentCache("documents",a,t)}else{var n=c("i18n")("error.5007");r.error(n,"Error")}})}}};a.$inject=["thatScope","$sce","documentId","key","toastr","$filter","FileSaver","$scope","$rootScope","documentsService","$timeout","$mdDialog","ConfigService","pdfDelegate","$location","$anchorScroll","ViewerService","uiGridConstants","$state","$stateParams"],t.EditDocumentController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u,m,p,f,g,v,h,y,b,S,C,w,k,x,I){"ngInject";n(this,o),s.currentCollection&&(p.stateInfo||(p.stateInfo={}),p.stateInfo.currentCollection=s.currentCollection),p.globalState="home.collection.customer",p.currentCustomerId=s.customerId;var D=function(t,n,a){S.dropzone=e.dzMethods.getDropzone();var o=s.currentCollection;return"Type"==s.collectionId&&o&&(S.uploadType=o.value),S.localAcceptHandler(t,n)};if(e.dzOptions={url:"/",paramName:"files",maxFilesize:"30",addRemoveLinks:!0,dictInvalidFileType:"Invalid file",accept:D,dictDefaultMessage:'<span class="dz-drop-file"><strong>Drop file</strong> or click to upload</span>',previewTemplate:S.template},e.dzCallbacks={addedfile:function(e){},success:function(e,t){w.userid&&C.cleanSelectedRecordsByCollectionForUser("documents",s.customerId,w.userid)}},e.shownGroup=0,e.mdClosing=!1,e.documentsService=d,e.documentsService.searchFilter="",e.category=s.collectionId,e.locale=r,e.docs=t.data.documents||t.data.collections,e.docsError=t.error,p.filters=t.data.avail_filter,e.totalDocCount=t.data.control?t.data.control.total_documents:0,e.accessKey=e.accessKey||s.accessKey,e.accessKey&&t.data&&t.data.accesskey_user&&(u.accessKeyUser=t.data.accesskey_user,p.infinicast)){var $=u.getPartnerIds();p.infinicast.updatePathConfig("userChat","ids",$),p.infinicast.updatePathConfig("userOnline","ids",$),p.infinicast.isAccessKeyUser=!0,p.infinicast.listen()}d.startValue=m.getDocumentStartValue(),d.endValue=m.getDocumentOffsetValue(),e.totalDocCount<d.endValue&&(d.endValue=e.totalDocCount),e.pageSize=d.endValue,e.cacheStart=t.start,e.baseUrl=c,e.applySearchFilter=function(){e.filteredDocs=v("filter")(e.docs,e.searchService.searchCriteria(d.searchFilter))},e.$watch("documentsService.searchFilter",function(t,n){""==t&&(e.filteredDocs=null),t!==n&&e.applySearchFilter()}),e.excludeCollections=["Monat","NEW","INBOX","Type","WORKFLOW"],e.toggleMode={thisState:l.getState(),alterState:l.getAlterState()},e.cardMode="Card"===(u.getUserSetting("viewMode")||l.getDefaultViewMode()),e.customerStateChangedListener=p.$on("customerStateChanged",function(t,n){e.toggleMode={thisState:n.thisState,alterState:n.alterState},e.cardMode="Card"===(u.getUserSetting("viewMode")||l.getDefaultViewMode())}),e.showDetails=function(e){e.details=e.details?!1:!0,e.baseUrl=c},e.addMoreItems=function(t){e.docs=e.docs.concat(t)},e.$watch("documentsService.filter",function(e,t,n){if(e&&e!=t&&(d.filterCustomerId||d.filterAccessKey)){var a=void 0;!d.filterAccessKey&&d.filterCustomerId&&(a=d.callDocumentByOneCollection(d.filterCustomerId)),d.filterAccessKey&&(a=d.callDocumentByAccessKey(d.filterAccessKey)),a.then(function(e){e.data.response.success&&(n.docs=e.data.documents,e.data.control&&e.data.control.filtered_documents?n.totalDocCount=e.data.control.filtered_documents:n.totalDocCount=e.data.control?e.data.control.total_documents:0,n.totalDocCount<d.endValue&&(d.endValue=n.totalDocCount))})}}),e.more=function(){if(!d.busy){var n=d.startValue,a=d.endValue,o=d.offset;if(e.totalDocCount>d.endValue){n=d.endValue+1,a+=o,a=a>e.totalDocCount?e.totalDocCount:a;var i;i=e.accessKey?d.callDocumentByAccessKey(e.accessKey,n,a):d.callDocumentByOneCollection(s.customerId,n,a),i.then(function(n){if(n.data.response&&n.data.response.success){var a=n.data.documents||n.data.collections;e.addMoreItems(a),d.searchFilter&&e.applySearchFilter(),n.data.control&&n.data.control.filtered_documents?e.totalDocCount=n.data.control.filtered_documents:e.totalDocCount=n.data.control?n.data.control.total_documents:0,e.totalDocCount<d.endValue&&(d.endValue=e.totalDocCount)}else n.data.control&&(e.addMoreItems(n.data.collections),e.totalDocCount=t.data.control?t.data.control.total_documents:0)})}}},e.$on("$destroy",function(){e.customerStateChangedListener()}),e.editForm={},e.goToDocument=function(t,n){e.editDocument(t,n),s.documentId=n;var a="home.collection.document";s.accessKey&&(a=s.collectionId&&s.customerId?"accesskeyDocumentViewLong":"accesskeyDocumentView"),I.go(a,s,{reload:!1,notify:!1})},e.editDocument=function(t,n,a){var o=null;s.accessKey&&(o=s.accessKey),t&&t.stopPropagation(),e.etc=function(){return!e.formChanged};var i=e;e.returnPath=function(){var e="home.collection.customer";s.accessKey&&(e=s.collectionId&&s.customerId?"accesskeyDocumentFromCollection":"accesskeyDocument"),I.go(e,s,{reload:!1,notify:!1})},f.show({controller:"EditDocumentController",templateUrl:"app/customer/edit.html",preserveScope:!0,parent:angular.element(document.body),targetEvent:t,disableParentScroll:!0,clickOutsideToClose:!0,locals:{thatScope:i,documentId:n,key:o},hasBackdrop:!0,onRemoving:function(t,n){e.mdClosing=!0,thatScope.mdClosing=!0},transformTemplate:function(e){return'<div class="md-dialog-container edit-doc">'+e+"</div>"}}).then(function(){},function(){e.returnPath()})},s.documentId&&k(function(){e.editDocument(null,s.documentId,!0)},100)};a.$inject=["$scope","docs","storedAccessKey","category","locale","baseUrl","$stateParams","ViewModeService","documentsService","LocalAccessService","ConfigService","$rootScope","$mdDialog","$mdSidenav","$filter","FileSaver","Blob","toastr","UploadService","StorageService","CheckAuthService","$timeout","$location","$state"],t.CustomerController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i,r,c,s,l){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$q=l,this.$window=s,this.configService=o,this.initPagerValues(),this.localAccessService=i,this.storageService=c,this.CheckAuthService=r}return e.$inject=["$http","$log","ConfigService","LocalAccessService","CheckAuthService","StorageService","$window","$q"],a(e,[{key:"initPagerValues",value:function(){this.configService=this.configService||ConfigService,this.startValue=this.configService.getDocumentStartValue(),this.offset=this.configService.getDocumentOffsetValue(),this.endValue=this.offset,this.busy=!1}},{key:"getBasePath",value:function(e){var t=e?e:"document";return this.configService.getBaseUrl()+t}},{key:"getPageIdHashByValueAndRange",value:function(e,t,n){return e+"_"+t+"_"+n}},{key:"getUserCacheId",value:function(e){return e+"/"+this.CheckAuthService.userid}},{key:"baseAuthCall",value:function(e,t,n,a){var o=this,i=this.$q.defer(),r=e.auth?e.auth.accesskey:null;return r?o.baseCall(e,t,n,a):o.CheckAuthService.userid?o.baseCall(e,t,n,a):(o.CheckAuthService.getUser().then(function(r){o.CheckAuthService.userid=r.userid,r&&r.userid?i.resolve(o.baseCall(e,t,n,a)):(console.log("what?"),i.resolve(null))},function(e){}),i.promise)}},{key:"dataPromise",value:function(e,t,n,a){var o=this,i=o.localAccessService.getCredentails();return i.then(function(i){if(i||t.auth){var r={contentType:"application/json",datatype:"json"};i&&!t.auth&&(i=o.localAccessService.decryptCredentials(i),r.auth={user:{username:i.userId,password:i.passWord}});var c=angular.merge(r,t),s=o.$http.post(o.getBasePath(n.apiName),c);s.then(function(t){if(o[n.itemKey]=t.data[n.dataKey],o.busy=!1,n.dataKey&&t.data[n.dataKey])e.resolve(t);else{var a={data:{}};t.data.response&&!t.data.response.success?a.error=t.data.response.errormessage:t.data.response&&t.data.response.errormessage&&(a.error=t.data.response.errormessage),e.resolve(a)}}),n.cacheName&&(a||(a=n.cacheName),n.start&&n.end&&(a=o.getPageIdHashByValueAndRange(a,n.start,n.end)),n.useAllData?o.setCache(s,n.cacheName,a,n.dataKey,!0):o.setCache(s,n.cacheName,a,n.dataKey))}}),e}},{key:"baseCall",value:function(e,t,n,a){var o=this;this.busy=!0;var i=this.$q.defer();if(e.document&&(this.filter&&(e.document.filter=this.filter),t.start&&t.end&&(this.startValue=t.start?t.start:this.configService.getDocumentStartValue(),this.endValue=t.end?t.end:this.configService.getDocumentOffsetValue(),e.document.offset={start:this.startValue,end:this.endValue})),t.itemKey&&(this[t.itemKey]=null),t.cacheName&&!a&&!t.set){n||(n=t.cacheName);var r=void 0;if(t.start&&t.end){var c=o.getPageIdHashByValueAndRange(n,o.startValue,o.endValue);r=this.getCache(t.cacheName,c)}else r=this.getCache(t.cacheName,n,t.dataKey);return r.then(function(a){o.busy=!1;var r={data:{}};t.useAllData?r.data=a:r.data[t.dataKey]=a,r.data&&r.data[t.dataKey]&&(r.data[t.dataKey].length||angular.isObject(r.data[t.dataKey]))?i.resolve(r):i=o.dataPromise(i,e,t,n)}),i.promise}return i=o.dataPromise(i,e,t,n),i.promise}},{key:"callDocumentsCore",value:function(e){e=e||!1;var t={collection:{method:"core"}},n={cacheName:"core",itemKey:"coreItems",dataKey:"collections"};return this.baseAuthCall(t,n,null,e)}},{key:"callAddCoreItem",value:function(e){var t={collection:{method:"add core",data:e}},n={set:!0,dataKey:"collections"};return this.baseAuthCall(t,n,null,!0)}},{key:"searchDocumentsCore",value:function(e){var t={collection:{method:"by name",name:e}},n={itemKey:"searchCoreItems",dataKey:"collections"};return this.baseAuthCall(t,n)}},{key:"callDocumentRelated",value:function(e,t){t=t||!1;var n={collection:{method:"related by ID",group:{value:e}}},a={cacheName:"collections",itemKey:"collectionItems",dataKey:"collections"};return this.baseAuthCall(n,a,e,t)}},{key:"callDocumentAllCollections",value:function(e,t){t=t||!1,e=e||"<all>";var n={collection:{method:"all"}},a={fillBy:"value",cacheName:"collections",itemKey:"collectionItems",dataKey:"collections"};return this.baseAuthCall(n,a,e,t)}},{key:"callAddCollectionItem",value:function(e,t){var n={collection:{method:"add collection",group:{value:e},data:t}},a={set:!0,dataKey:"collections"};return this.baseAuthCall(n,a,null,!0)}},{key:"callEditCollectionItem",value:function(e,t,n){var a={collection:{method:"edit collection",group:{value:e,oldValue:n.title.value},data:t}},o={set:!0,dataKey:"collections"};return this.baseAuthCall(a,o,null,!0)}},{key:"callDocumentByOneCollection",value:function(e,t,n,a){var o={document:{method:"by collection",collection:e}};this.filter&&this.filter.length&&(a=!0),t=t?t:this.configService.getDocumentStartValue(),n=n?n:this.configService.getDocumentOffsetValue();var i={cacheName:"documents",itemKey:"documentsItems",dataKey:"documents",useAllData:!0,start:t,end:n};return this.baseAuthCall(o,i,e,a)}},{key:"callDocumentByAccessKey",value:function(e,t,n,a){var o={auth:{accesskey:{longkey:e}},document:{method:"by accesskey"}};this.filter&&this.filter.length&&(a=!0),t=t?t:this.configService.getDocumentStartValue(),n=n?n:this.configService.getDocumentOffsetValue();var i={apiName:"accesskey",cacheName:"documents",itemKey:"documentsItems",dataKey:"documents",useAllData:!0,start:t,end:n};return this.baseCall(o,i,e,a)}},{key:"callDocumentById",value:function(e,t,n){n=n||!1;var a={document:{method:"by ID",id:e}};t&&(a.auth={accesskey:{longkey:t}});var o={cacheName:"document_detail",itemKey:"documentItem",dataKey:"document"};return this.baseAuthCall(a,o,e,n)}},{key:"callUploadFile",value:function(e,t){var n=t.type?t.type:"LETTERBOX",a={document:{method:"new",fileName:t.name,file:e},activity:{type:n}},o={useAllData:!0};return this.baseAuthCall(a,o,null,!0)}},{key:"callSaveDocumentById",value:function(e,t){var n={document:{method:"change",id:e}};t&&(t.persist&&(n.document.persist=t.persist),t.no&&(n.document.no=t.no),t.title&&(n.document.title=t.title),t.type&&t.type.value&&(n.document.type=t.type),t.date&&(n.document.date=t.date),angular.isDefined(t.text)&&(n.document.text=t.text),t.netvaluegoods&&(n.document.netvaluegoods=t.netvaluegoods),t.totalamount&&(n.document.totalamount=t.totalamount),t.totaltax&&(n.document.totaltax=t.totaltax),t.payment_days&&(n.document.payment_days=t.payment_days),t.payment_date&&(n.document.payment_date=t.payment_date),t.discount_factor&&(n.document.discount_factor=t.discount_factor),t.post_date&&(n.document.post_date=t.post_date),angular.isDefined(t.deleted)&&(n.document.deleted=t.deleted||"null"),t.collections&&angular.isArray(t.collections)&&(n.document.collections=t.collections),t.workflow&&(n.document.workflow=t.workflow));var a={itemKey:"documentItem",dataKey:"document"};return this.baseAuthCall(n,a,e,!0)}},{key:"cleanupRelatedLists",value:function(e,t){var n={subSetName:"documents",innerIdName:"id",innerIdValue:t};this.storageService.cleanSelectedRecords(e,n)}},{key:"updateRelatedDocumentCache",value:function(e,t,n){var a={subSetName:"documents",innerIdName:"id",innerIdValue:t,data:n};this.storageService.updateSelectedRecords(e,a)}},{key:"searchDocument",value:function(e,t,n,a){var o={document:{method:"by collection",search:e}};t=t?t:this.configService.getDocumentStartValue(),n=n?n:this.configService.getDocumentOffsetValue();var i={itemKey:"documentsItems",dataKey:"documents",useAllData:!0,start:t,end:n};return this.baseAuthCall(o,i,e,!0)}},{key:"callFileById",value:function(e,t,n){t=t||"ORIGINAL";var a={file:{method:"file by ID",id:e,filetype:t}};n&&(a.auth={accesskey:{longkey:n}});var o={itemKey:"fileItems",dataKey:"file",useAllData:!0};return this.baseAuthCall(a,o,e,!0)}},{key:"setCache",value:function(e,t,n,a,o){if(!this.filter||!this.filter.length){var i=this;i.CheckAuthService.userid&&(n=this.getUserCacheId(n)),e.then(function(e){var r=e.data[a];if(r)if(n){var c=i.configService.getCacheExpirationPeriod(),s=(new Date).getTime()+c,l={id:n,expireDate:s};o?l=angular.merge(l,e.data):l[a]=r,i.storageService.upsertRecord(t,l)}else;})}}},{key:"getCache",value:function(e,t,n){return t?(this.CheckAuthService.userid&&(t=this.getUserCacheId(t)),this.storageService.getSingleRecordPromise(e,t,n)):this.storageService.getAllRecords(e)}},{key:"storeCache",value:function(e,t){var n={};if(t.data&&t.data.collections&&angular.forEach(t.data.collections,function(e,t){e.id&&e.title?n[e.id]=e.title:e.group&&e.group.value&&(n[e.group.value]=e.group)}),Object.keys(n).length)try{var a=JSON.parse(this.$window.localStorage.getItem(e));n=angular.extend(n,a),this.$window.localStorage.setItem(e,JSON.stringify(n))}catch(o){}}},{key:"clearCache",value:function(){this.dataCache=null}},{key:"filterToCollections",value:function(e,t){var n=[];return angular.forEach(e,function(e,a){return e.group.value==t?void angular.forEach(e.title,function(t,a){n.push({count:"?",ak:1,id:t.id,group:{value:e.group.value,locale:e.group.value},title:{value:t.value,locale:t.locale}})}):void 0}),n}}]),e}();t.DocumentsService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r){"ngInject";n(this,o),this.localAccesService=a,this.documentsService=i;var c=this;e.clearLocalData=function(){c.localAccesService.clearLocalData(),t.loggedOut=!0,c.documentsService.allCollections=null,r.go("login")}};a.$inject=["$scope","$rootScope","LocalAccessService","documentsService","$state"],t.ChangeLogController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a){"ngInject";n(this,o);var i=this;this.submitForm=function(e){};this.initXLViewer=function(){e.xldata=[],e.columnDefs=[],e.gridApi={},e.gridOptions={columnDefs:e.columnDefs,data:"xldata",onRegisterApi:function(t){e.gridApi=t}}},this.initXLViewer(),this.resetGrid=function(){e.$apply(function(){e.gridOptions.columnDefs=[]})},e.getFile=function(t){if(e.xlprocessing=!0,t.files&&t.files[0]){var n=new FileReader;n.onload=function(t){var o=n.result,r=a.readXLdata(o),c={};r&&(c=a.workbooktoJson(r)),i.resetGrid(),c.data&&c.data[0]&&e.$apply(function(){e.xldata=c.data[0],e.xlprocessing=!1})},n.readAsBinaryString(t.files[0])}}};a.$inject=["$scope","$timeout","ViewerService"],t.TestController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u,m){"ngInject";n(this,o),e.excludeCollections=["Monat","NEW","INBOX","Type","WORKFLOW"],this.coreDocs=t.data.collections,this.collections=a.data.collections,e.docs=i.data.documents,e.toggleMode={thisState:s.getState(),alterState:s.getAlterState()},e.cardMode="Card"===e.toggleMode.thisState,u.$on("customerStateChanged",function(t,n){e.toggleMode={thisState:n.thisState,alterState:n.alterState},e.cardMode="Card"===e.toggleMode.thisState})};a.$inject=["$scope","core_docs","collections","docs","baseUrl","$stateParams","ViewModeService","documentsService","ConfigService","$rootScope","$mdSidenav"],t.SearchController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l,d,u,m,p,f,g,v,h,y,b,S,C,w,k,x,I,D){"ngInject";n(this,o),e.accessKey=a?h.decryptCredentials(a):null,e.akCoreItems=[],t.data&&t.data.avail_filter&&(d.akCollections=d.filterToCollections(t.data.avail_filter,s.collectionId),e.akCoreItems=t.data.avail_filter),v("CustomerController",{$scope:e,storedAccessKey:a,docs:t,category:i,locale:r,baseUrl:c,$stateParams:s,ViewModeService:l,documentsService:d,ConfigService:u,$rootScope:m,$mdDialog:p,$mdSidenav:f,$filter:g,FileSaver:y,Blob:b,toastr:S,UploadService:C,StorageService:w,CheckAuthService:k,$timeout:x,$location:I,$state:D})};a.$inject=["$scope","docs","storedAccessKey","category","locale","baseUrl","$stateParams","ViewModeService","documentsService","ConfigService","$rootScope","$mdDialog","$mdSidenav","$filter","$controller","LocalAccessService","FileSaver","Blob","toastr","UploadService","StorageService","CheckAuthService","$timeout","$location","$state"],t.AccesskeyController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t,a,i,r,c,s,l){"ngInject";n(this,o);var d=this;e.isShowContact=!0,e.contactInformations=[],e.invokeExternalLink=function(e){s.open("http://"+e,"_blank")},e.openPartnerInfo=function(){e.invokeExternalLink(e.partnerInfo.url)},this.isValidURL=function(e){var t,n="http://"+e,a=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i;return t=a.test(n)?!0:!1},e.addDocumentFile=function(t){return r.uploadDocument(t,e.partnerInfo.id)},e.formatDate=function(e){return Date.parse(e)},e.onMaterialClose=function(t){var n=0,a=0;angular.forEach(e.partnerTypeList,function(t){t.vendortype==e.partnerType&&(a=n),n++}),e.partnerIndex=a},e.onSavePartner=function(t){function n(t){var n=void 0==t.name1||0==t.name1.length?!1:!0,a=e.partnerInfo.hasOwnProperty("type");return-1!=e.partnerIndex&&(e.partnerInfo.type={value:"CUSTOMER"},a=e.partnerInfo.hasOwnProperty("type")),1==n&&1==a}function a(e){var t;switch(e){case 0:t="CUSTOMER";break;case 1:t="LEAD";break;case 2:t="VENDOR"}return t}function o(t){var n;switch(t){case"CUSTOMER":e.lineClass="partner-customer-underline",n=0;break;case"LEAD":e.lineClass="partner-leads-underline",n=1;break;case"VENDOR":e.lineClass="partner-vendor-underline",n=2;break;case"ACCOUNT":e.lineClass="partner-accounts-underline",n=0}return n}n(e.partnerInfo)&&(!e.partnerIndex&&e.partnerInfo.type&&e.partnerInfo.type.value&&(e.partnerIndex=o(e.partnerInfo.type.value)),e.partnerInfo.type={value:a(e.partnerIndex)},r.updatePartnerInformation(e.partnerInfo,"change",t).then(function(e){e.error?l.error("Partner update failed","Error"):l.success("Partner updated","Success")}))},e.onSelectforEdit=function(t,n){return e.contactInformations[n.id]?(delete e.contactInformations[n.id],delete e.ContactInformation,
void delete e.currentContactId):void r.callContactByCollectionId(n.id).then(function(t){t.data.contact&&(e.contactInformations[n.id]=t.data.contact,e.ContactInformation=t.data.contact,e.currentContactId=n.id)})},e.getSelectedValue=function(t,n){e.partnerIndex=n},e.populateData=function(t){function n(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}if(t.data.partner){var o=t.data;e.partnerInfo=o.partner,e.isValidURL=d.isValidURL(e.partnerInfo.url),o.partner.hasOwnProperty("contacts")?e.contactCounter=o.partner.contacts.length:e.contactCounter=0,e.partnerInfo.name1=decodeURIComponent(o.partner.name1),e.currentPartner=o.partner,e.$broadcast("user:information",e.partnerInfo),e.partnerTypeList=[],e.documentCount=o.partner.hasOwnProperty("hasdocuments")?o.partner.hasdocuments:0,angular.forEach(o.partner.type_available,function(t){e.partnerTypeList.push({vendortype:t.locale})}),o.partner.hasOwnProperty("type")?e.partnerType=o.partner.type.locale:(e.partnerType=n("ACCOUNT"!=a.param?a.param:""),0==e.partnerType.length&&(e.partnerIndex=-1)),e.collectionId=c}},r.callPartnerByCollectionId(c).then(function(t){e.populateData(t)}),e.onClickOk=function(t){console.log("click ok"),r.updateContacts(e.ContactInformation,e.currentPartner.id,t).then(function(e){e.response.success?l.success("Contact updated","Success"):l.error("Contact update failed","Error")})},e.onCloseDialog=function(){e.contactInformations=[],delete e.currentContactId,delete e.ContactInformation},e.cancel=function(t){e.formChanged&&!key?e.showSaveConfirmation=!0:i.hide()}};a.$inject=["$scope","$state","$stateParams","$mdDialog","PartnerService","collectionId","$window","toastr"],t.PartnerController=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$q=o,this.constant=i}return e.$inject=["$http","$log","$q","CONSTANT"],a(e,[{key:"getProtocol",value:function(){var e="development"===this.constant.ENV?this.constant.HTTP:this.constant.HTTPS;return e}},{key:"getBaseUrl",value:function(){var e="development"===this.constant.ENV?this.constant.BASEURL_DEV+this.constant.API_ENTRY:this.constant.BASEURL_PROD+this.constant.API_ENTRY;return this.getProtocol(this.constant.ENV)+e}},{key:"userServiceURL",value:function(){return this.getBaseUrl()+"user"}},{key:"accountServiceURL",value:function(){return this.getBaseUrl()+"account"}},{key:"documentServiceURL",value:function(){return this.getBaseUrl()+"document"}},{key:"partnerServiceURL",value:function(){return this.getBaseUrl()+"partner"}},{key:"appName",value:function(){return"365"}},{key:"getDocumentStartValue",value:function(){return 1}},{key:"getDocumentOffsetValue",value:function(){return 25}},{key:"getCacheExpirationPeriod",value:function(){return 12e5}}]),e}();t.ConfigService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$q=o,this.ConfigService=i}return e.$inject=["$http","$log","$q","ConfigService"],a(e,[{key:"getLoginModel",value:function(){return{userId:"",passWord:""}}},{key:"getRegistrationModel",value:function(){return{firstName:"",lastName:"",companyName:"",eMailName:"",passWord:"",confirmPassWord:"",iagreewith:!1}}},{key:"getForgetPasswordModel",value:function(){return{email:""}}},{key:"authenticateUser",value:function(e){var t=this.$q.defer(),n={auth:{user:{username:e.userId,password:e.passWord}},user:{method:"by id"}};return n=JSON.stringify(n),this.$http.post(this.ConfigService.userServiceURL(),n).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)})}},{key:"registerUser",value:function(e){var t=this.$q.defer(),n={account:{method:"register",name:e.companyName,firstname:e.firstName,lastname:e.lastName,email:e.eMailName,password:e.passWord,channelcode:"7b3112b0"}};return n=JSON.stringify(n),this.$http.post(this.ConfigService.accountServiceURL(),n).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)})}},{key:"registerInformation",value:function(e){var t=this.$q.defer(),n={account:{method:"register info",confirmcode:e}};return n=JSON.stringify(n),this.$http.post(this.ConfigService.accountServiceURL(),n).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"confirm",value:function(e){var t=this.$q.defer(),n={account:{method:"confirm",email:e.eMailName,confirmcode:e.confirmCode}};return n=JSON.stringify(n),this.$http.post(this.ConfigService.accountServiceURL(),n).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();t.LoginService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i,r,c,s,l){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$window=o,this.$indexedDB=i,this.$q=r,this.storageService=c,this.localAccess=s,this.cookies=l,this.userTypes={ru:"Regular User",ak:"Access Key User"}}return e.$inject=["$http","$log","$window","$indexedDB","$q","StorageService","LocalAccessService","$cookies"],a(e,[{key:"checkAuth",value:function(){return this.storageService.getSingleRecordPromise("user","info","data")}},{key:"isStateAccessible",value:function(e,t){if(e.data&&e.data.accessSettings){if(e.data.accessSettings.customPerms,e.data.accessSettings.accesskey)return this.userType="ak",t.accessKey&&(this.accessKey=t.accessKey,this.localAccess.setAccessKeyUserData(this.accessKey)),this.accessKey?!0:!0;if(e.data.accessSettings["public"])return!0;this.userType="ru"}}},{key:"setUser",value:function(e){if(this.userid=e.userid,e.locale){this.localAccess.setUserSetting("locale",e.locale.value);var t=JSON.stringify(e.locale.value);this.cookies.put("COOKIE_LOCALE_LANG",t)}return this.storageService.upsertRecord("user",{user_key:"user",user:e})}},{key:"getUser",value:function(){var e=this.$q.defer();return this.$indexedDB.openStore("user",function(t){t.find("user").then(function(t){e.resolve(t.user)})}),e.promise}}]),e}();t.CheckAuthService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i,r,c){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$window=o,this.$indexedDB=r,this.storageService=c,this.$q=i}return e.$inject=["$http","$log","$window","$q","$indexedDB","StorageService"],a(e,[{key:"checkCredentails",value:function(){return null==localStorage.getItem("userinfo")?!1:!0}},{key:"getCKey",value:function(){return"xC3r6y5ptK"}},{key:"getPartnerIds",value:function(){var e=[];return this.accessKeyUser&&this.accessKeyUser.partners&&angular.forEach(this.accessKeyUser.partners,function(t){t.uuid&&e.push(t.uuid)}),e}},{key:"encryptCredentials",value:function(e){return CryptoJS.AES.encrypt(JSON.stringify(e),this.getCKey()).toString()}},{key:"decryptCredentials",value:function(e){var t=CryptoJS.AES.decrypt(e,this.getCKey()).toString(CryptoJS.enc.Latin1);return JSON.parse(t)}},{key:"getCredentails",value:function(){return this.storageService.getSingleRecordPromise("user","info","data")}},{key:"setCredentails",value:function(e){var t=this.encryptCredentials(e);this.storageService.upsertRecord("user",{user_key:"info",data:t})}},{key:"removeCredentails",value:function(){this.$window.localStorage.removeItem("userinfo"),this.$window.localStorage.removeItem("user"),this.storageService.clearStorage("user")}},{key:"setAccessKeyUserData",value:function(e){var t=this.encryptCredentials(e);this.storageService.upsertRecord("user",{user_key:"accesskey",data:t})}},{key:"getAccessKeyUserDataEncodedPromise",value:function(){return this.storageService.getSingleRecordPromise("user","accesskey","data")}},{key:"clearLocalData",value:function(){this.$window.localStorage.clear(),this.storageService.clearStorage("user"),this.storageService.clearStorage("core"),this.storageService.clearStorage("collections"),this.storageService.clearStorage("documents"),this.storageService.clearStorage("document_detail"),this.storageService.clearStorage("document_detail")}},{key:"setViewSettings",value:function(e){this.$window.localStorage.setItem("viewSetting",e)}},{key:"getViewSettings",value:function(){return this.$window.localStorage.getItem("viewSetting")}},{key:"setUserSetting",value:function(e,t,n){try{var a=JSON.parse(this.$window.localStorage.getItem("settings"))||{};if(n&&a[e])return!1;a[e]=t;var o=JSON.stringify(a);return this.$window.localStorage.setItem("settings",o),!0}catch(i){return console.log("failed to save settings: ",i),!1}}},{key:"getUserSetting",value:function(e){try{var t=JSON.parse(this.$window.localStorage.getItem("settings"))||{};if(t[e])return t[e]}catch(n){}}}]),e}();t.LocalAccessService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a){"ngInject";n(this,e),this.$log=t,this.$rootScope=a,this.viewMode="Card",this.alternateViewMode="List"}return e.$inject=["$log","$rootScope"],a(e,[{key:"getState",value:function(){return this.viewMode}},{key:"getAlterState",value:function(){return this.alternateViewMode}},{key:"setState",value:function(e,t){return this.viewMode=e,this.alternateViewMode=t,this.$rootScope.$broadcast("customerStateChanged",{thisState:e,alterState:t})}},{key:"setAlterState",value:function(e){return this.alternateViewMode=e}},{key:"getDefaultViewMode",value:function(){return window.innerWidth>860?"Card":"List"}}]),e}();t.ViewModeService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:o,controllerAs:"vm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.NavbarDirective=a;var o=function i(e,t,a,o,r,c,s,l,d,u,m,p,f,g,v,h){"ngInject";function y(e,n,a,o,i){b.state=e,b.previousState=n,b.previousStateParams=a,o&&(b.parentState=o),i&&(b.params=i),"home.collection.customer"==b.state||"accesskeyDocument"==b.state?(c.groupFilters=[],c.filterData={},c.shownGroup=null,c.filters=t.filters):c.filters=null,(s.allCollections||s.akCollections)&&(b.populateCurrentClass(),b.populateCurrentCollection())}n(this,i),this.constant=u,this.displayOptions=!1,this.version=this.constant.VERSION,this.hideHeader=!0,this.storageCache={},c.groupFilters=[],c.filterData={},c.documentsService=s,c.notificationService=p,c.localAccessService=r,c.busy=s.busy,c.dataChanged=!1,c.onExit=function(){t.infinicast&&t.infinicast.goOffline()},m.onbeforeunload=c.onExit,c.$watch("documentsService.busy",function(e,t,n){n.busy=e});var b=this;b.coreItems=null,b.accessKeyUser=null,b.currentClass={},b.currentCollection={},b.chatMessages=[],this.populateCurrentClass=function(){if(b.params.collectionId){var e=(s.allCollections||s.akCollections).filter(function(e){return e.group.value==b.params.collectionId});e.length>0&&(b.currentClass=e[0].group,s.currentClass=b.currentClass)}},this.populateCurrentCollection=function(){if(b.params.customerId){var e=(s.allCollections||s.akCollections).filter(function(e){return e.id==b.params.customerId});e.length>0&&(b.currentCollection=e[0].title,s.currentCollection=b.currentCollection)}},this.reloadData=function(){a.go(a.current,{},{reload:!0})},this.scrollToLastMessage=function(){b.displayChat&&g(function(){var e=h.hash();h.hash("chat-bottom"),v(),h.hash(e)},300)},this.togglePartners=function(){this.partners?this.displayPartners=!this.displayPartners:(b.accessKeyUser&&b.accessKeyUser.partners&&(this.partners=b.accessKeyUser.partners,this.partners&&angular.isArray(this.partners)&&angular.forEach(this.partners,function(e){var n=t.infinicast.getDataPoolRecordByPathName("userOnline",e.uuid);e.online=null,"online"==n.status&&(e.online=!0),b.currentRemotePartner&&b.currentRemotePartner.uuid==e.uuid&&(b.currentRemotePartner.online=e.online),e.lastSeen=n.time})),this.displayPartners=!this.displayPartners)},this.chatPartner=function(e){this.currentRemotePartner=e,b.displayPartners=!1},this.sendMessage=function(){if(b.currentMessage){if(b.accessKeyUser&&b.accessKeyUser.partners)b.currentRemotePartner&&t.infinicast.setDataByPathName("userChat",{fromUserType:"accessKey",idForPath:b.currentRemotePartner.uuid,partnerName:b.currentRemotePartner.name,name:b.accessKeyUser.name,company:b.accessKeyUser.company,text:b.currentMessage,time:(new Date).getTime()});else{var e="";t.infinicast.user.firstname&&t.infinicast.user.lastname&&(e=t.infinicast.user.firstname+" "+t.infinicast.user.lastname),t.infinicast.setDataByPathName("userChat",{fromUserType:"partner",text:b.currentMessage,time:(new Date).getTime(),fullname:e})}g(function(){b.currentMessage=""},100)}},this.handleCtrlEnter=function(e){13==e.keyCode&&e.ctrlKey&&this.sendMessage()},t.infinicast&&!function(){var e=function(e,t){var n=angular.copy(e);e.fromUserType&&("accessKey"!=e.fromUserType||t||(b.chatIncomingUser={name:e.name,company:e.company,partnerName:e.partnerName}),"partner"==e.fromUserType&&(b.chatIncomingUser?n.partnerName=b.chatIncomingUser.partnerName:b.currentRemotePartner&&(n.partnerName=b.currentRemotePartner.name)),t?n.me=!0:b.currentRemotePartner&&n.fullname&&(b.currentRemotePartner.fullname=n.fullname),b.chatMessages.push(n),b.scrollToLastMessage())};t.infinicast.setRootScope(t),angular.forEach(t.infinicast.getPaths(),function(n){if("notification"==n.viewType){var o="infinicast.dataPool."+n.name;t.$watch(o,function(e,o,i){if(null!=e){var r=c.notificationService.processNotificationData(n.name,e,t.infinicast.user.userid);c.notificationService.addNotification(r),-1!==a.href(a.current.name,a.params).indexOf(r.url)&&(c.dataChanged=!0,f.warning("Displayed data has been changed","Attention"))}},!0)}if("chat"==n.viewType){var o="infinicast.dataPool."+n.name;t.$watch(o,function(t,n,a){if(null!=t)if(b.currentRemotePartner){var o=t[b.currentRemotePartner.uuid];o&&("partner"==o.fromUserType?e(o):e(o,!0))}else"accessKey"==t.fromUserType?e(t):e(t,!0)},!0)}if("online"==n.viewType){var o="infinicast.dataPool."+n.name;t.$watch(o,function(e,t,n){null!=e&&b.partners&&angular.forEach(e,function(e,t){angular.forEach(b.partners,function(t){t.online=!1,"online"==e.status&&(t.online=!0),b.currentRemotePartner&&b.currentRemotePartner.uuid==t.uuid&&(b.currentRemotePartner.online=t.online),t.lastSeen=e.time})})},!0)}})}(),this.testDataUpdate=function(){console.log("test");new Date;t.infinicast.setDataByPathName("userCollection",{id:394247,title:"invoice received",group:{locale:"Workflow",value:"WORKFLOW"}})},this.testChatUpdate=function(){console.log("test");new Date;t.infinicast.setDataByPathName("userChat",{name:"n3m0",company:"n3m0 c0mpany",text:"Hello there!",time:(new Date).getTime()}),t.infinicast.setDataByPathName("userChat",{name:"Namename Namenamenamename",company:"name company",text:"Curabitur congue lorem quis dolor blandit hendrerit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;Vivamus bibendum efficitur tortor, non porttitor magna imperdiet in.",time:(new Date).getTime()})},this.testOnlineUpdate=function(e){console.log("test online");new Date;e=e||"online",t.infinicast.setDataByPathName("userOnline",{status:e,time:(new Date).getTime()})},this.hideBoxes=function(){b.displayOptions=!1,b.displayNotifications=!1,b.displayChat=!1},this.anyBoxIsShown=function(){return b.displayOptions||b.displayNotifications||b.displayChat},c.$watch("documentsService.allCollections",function(e,t,n){e&&(b.populateCurrentClass(),b.populateCurrentCollection())},!0),c.$watch("documentsService.akCollections",function(e,t,n){e&&(b.populateCurrentClass(),b.populateCurrentCollection())},!0),c.$watch("documentsService.coreItems",function(e,t){e&&e!=t&&(b.coreItems=e)}),this.applySearchQuery=function(e){c.searchField=e},c.clearSearchField=function(){c.searchField="",s.searchFilter=""},c.$watch("localAccessService.accessKeyUser",function(e,t,n){e&&e!=t&&(b.accessKeyUser=e)},!0);var S=o.appName();this.appConfig={appName:S},b.toggleMode={thisState:l.getState(),alterState:l.getAlterState()},b.cardMode=b.toggleMode.thisState===(r.getUserSetting("viewMode")||l.getDefaultViewMode()),this.changeState=function(e,t){var n=r.getUserSetting("viewMode");if(n&&n==e){var a=[t,e];e=a[0],t=a[1]}r.setUserSetting("viewMode",e),l.setState(e,t)},t.$on("customerStateChanged",function(e,t){b.toggleMode={thisState:t.thisState,alterState:t.alterState},b.cardMode="Card"===(r.getUserSetting("viewMode")||l.getDefaultViewMode())}),b.state=a.current.name,b.parentState=a.current.parentState,t.$on("$stateChangeSuccess",function(e,n,o,i,r){if(c.dataChanged=!1,t.globalState=n.name,b.documentsView="home.collection.customer"===a.current.name,b.hideHeader="register"===a.current.name||"login"===a.current.name||"confirm"===a.current.name,!b.hideHeader&&!b.coreItems){var l=s.callDocumentsCore();l&&l.then(function(e){e.data&&(b.coreItems=e.data.collections)})}if(o.accessKey||b.hideHeader||s.allCollections)return void y(a.current.name,i.name,r,a.current.parentState,o);var d=s.callDocumentAllCollections();return d?void d.then(function(e){e.data&&(s.allCollections=e.data.collections),y(a.current.name,i.name,r,a.current.parentState,o)},function(e){}):void y(a.current.name,i.name,r,a.current.parentState,o)}),this.toggle=function(){e("left").toggle()},c.isAppFullscreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},c.isFullScreen=c.isAppFullscreen(),c.fullScreen=function(){function e(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function t(){return document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0}c.isFullScreen?(t(),c.isFullScreen=c.isAppFullscreen()):(e(document.documentElement),c.isFullScreen=c.isAppFullscreen())},this.toggleFilter=function(){d.when("right").then(function(e){e.toggle()})},c.showEmptyCollections=!1,this.toggleEmptyCollectionFiltering=function(){c.showEmptyCollections=!c.showEmptyCollections,l.showEmptyCollections=c.showEmptyCollections},this.closeMenu=function(){e("left").close()},this.logout=function(){s.clearCache(),r.removeCredentails(),t.loggedOut=!0,a.go("login")},this.navigateBack=function(){b.previousState&&b.previousStateParams&&(a.go(b.previousState,{id:b.previousStateParams.id}),t.globalState=b.previousState)},this.navigateUp=function(){b.parentState&&(b.parentState==b.previousState?(a.go(b.previousState,b.previousStateParams),t.globalState=b.previousState,t.stateInfo={}):(a.go(b.parentState,b.params),t.globalState=b.parentState,t.stateInfo={}),"home"==t.globalState&&(s.currentClass={}),"home.collection"==t.globalState&&(s.currentCollection={}))},this.navigateHome=function(){b.accessKeyUser?"accesskeyHome"!==b.state&&a.go("accesskeyHome",{accessKey:b.params.accessKey}):"home"!==b.state&&(a.go("home",b.params),t.globalState="home")},c.closeFilter=function(){e("right").close()},c.resetFilter=function(){c.collectionFilter=[],s.filter=null},c.toggleGroup=function(e){c.isGroupShown(e)?c.shownGroup=null:c.shownGroup=e},c.isGroupShown=function(e){return c.shownGroup===e},c.search=function(e){13==e?a.go("search",{searchPhrase:c.searchField}):s.searchFilter=c.searchField},c.applyFilter=function(){c.collectionFilter=[],c.collectionFilterGroupTitles=[],"undefined"!=typeof c.filterData.titleIds&&angular.forEach(c.filterData.titleIds,function(e,t){angular.forEach(e,function(e,n){e?c.groupFilters[t]?c.groupFilters[t]!=n&&(c.filterData.titleIds[t][c.groupFilters[t]]=!1,c.groupFilters[t]=n):c.groupFilters[t]=n:c.groupFilters[t]==n&&(c.groupFilters[t]=null)})}),angular.forEach(c.groupFilters,function(e,t){e&&c.collectionFilter.push({collection:e})}),s.filter=c.collectionFilter,b.params.customerId&&(s.filterCustomerId=b.params.customerId),b.params.accessKey&&(s.filterAccessKey=b.params.accessKey)}};o.$inject=["$mdSidenav","$rootScope","$state","ConfigService","LocalAccessService","$scope","documentsService","ViewModeService","$mdComponentRegistry","CONSTANT","$window","NotificationService","toastr","$timeout","$anchorScroll","$location"]},function(e,t,n){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/components/navtabbar/navtabbar.html",scope:{creationDate:"="},controller:o,controllerAs:"tb",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.NavtabbarDirective=a;var o=function i(t,a,o,r,c){"ngInject";n(this,i),r.currentClass={},r.currentCollection={},r.documentsService=c;var s=this;s.hideHeader=!0,s.changeUrl=!1,s.activateTab=function(t){e(function(){try{tabbar.setActiveTab(t)}catch(e){}})},o.$watch("globalState",function(e,t){if(e&&e!=t)switch(r.currentState=e,e){case"home":s.activateTab(0);break;case"home.collection":s.activateTab(1);break;case"home.collection.customer":s.activateTab(2);break;case"home.collection.document":s.activateTab(2);break;default:s.activateTab(0)}}),o.$watch("stateInfo",function(e,t){e&&e!=t&&(e.currentClass?r.currentClass=e.currentClass:r.currentClass={},e.currentCollection?r.currentCollection=e.currentCollection:r.currentCollection={})},!0),this.goToCore=function(){o.globalState="home",this.changeUrl&&a.go("home",t,{reload:!1,notify:!1})},this.goToDocuments=function(e){o.currentCustomerId&&(t.customerId=o.currentCustomerId,o.globalState="home.collection.customer",this.changeUrl&&a.go("home.collection.customer",t,{reload:!1,notify:!1}))},this.goToRelated=function(e){o.currentCollectionId&&(o.globalState="home.collection",t.collectionId=o.currentCollectionId,this.changeUrl&&a.go("home.collection",t,{reload:!1,notify:!1}))},o.$on("$stateChangeSuccess",function(e,t,n,o,i){s.hideHeader=-1!==a.current.name.indexOf("accesskey")||"changelog"===a.current.name||"register"===a.current.name||"login"===a.current.name||"confirm"===a.current.name})};o.$inject=["$stateParams","$state","$rootScope","$scope","documentsService"]}).call(t,n(27).setImmediate)},function(e,t,n){(function(e,a){function o(e,t){this._id=e,this._clearFn=t}var i=n(28).nextTick,r=Function.prototype.apply,c=Array.prototype.slice,s={},l=0;t.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,a=arguments.length<2?!1:c.call(arguments,1);return s[n]=!0,i(function(){s[n]&&(a?e.apply(null,a):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof a?a:function(e){delete s[e]}}).call(t,n(27).setImmediate,n(27).clearImmediate)},function(e,t){function n(){l=!1,r.length?s=r.concat(s):d=-1,s.length&&a()}function a(){if(!l){var e=setTimeout(n);l=!0;for(var t=s.length;t;){for(r=s,s=[];++d<t;)r&&r[d].run();d=-1,t=s.length}r=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var r,c=e.exports={},s=[],l=!1,d=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new o(e,t)),1!==s.length||l||setTimeout(a,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/components/flyingButton/flyingbutton.html",scope:{creationDate:"=",template:"=template",params:"="},controller:o,controllerAs:"flyB",bindToController:!0,link:function(e,t,n){e.addDialogTemplate="app/"+n.scope+"/"+n.template+".html",e.params=n.params}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.FlyingButtonDirective=a;var o=function i(e,t,a,o,r,c,s,l){"ngInject";n(this,i);var d=this;d.hidden=!1,d.isOpen=!1,d.hover=!1,d.openDialog=function(n,a){o.show({clickOutsideToClose:!0,controller:["$mdDialog","$scope","$timeout","$filter",function(t,n,a,o){this.close=function(){t.cancel()},this.params=d.params,this.errorMessages={},this.errorMessages[5001]=o("i18n")("error.5001"),this.errorMessages[5002]=o("i18n")("error.5002"),this.errors=[];var i=this;this.delayedSubmit=function(){a(function(){i.submit()},100)},this.submit=function(){if(s.busy=!1,this.errors=[],this.formErrors=[],this.addForm.$valid){e.$emit("CallAddMethod",this.addForm);i.addForm.resultPromise&&i.addForm.resultPromise.then(function(e){i.addForm.customErrors&&i.addForm.customErrors.length>0?!function(){var e=i.errorMessages;angular.forEach(i.addForm.customErrors,function(t,n){i.errors.push(e[t.errorCode]),i.formErrors.customError=e[t.errorCode]})}():t.hide()})}}}],controllerAs:"dialog",templateUrl:t.addDialogTemplate,hasBackdrop:!1,targetEvent:n})}};o.$inject=["$rootScope","$scope","$state","$mdDialog","ConfigService","LocalAccessService","documentsService","ViewModeService"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/components/footerbar/footerbar.html",scope:{creationDate:"="},controller:o,controllerAs:"fm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.FooterbarDirective=a;var o=function i(e,t,a,o,r,c,s,l,d,u){"ngInject";function m(e,t,n,a,o){p.state=e,p.previousState=t,p.previousStateParams=n,a&&(p.parentState=a),o&&(p.params=o),u.allCollections&&(p.populateCurrentClass(),p.populateCurrentCollection())}n(this,i),s.documentsService=u,s.localAccessService=d;var p=this;p.state=o.current.name,p.parentState=o.current.parentState,p.accessKeyUser={},p.currentClass={},p.currentCollection={},this.populateCurrentClass=function(){if(p.params.collectionId){var e=u.allCollections.filter(function(e){return e.group.value==p.params.collectionId});e.length>0&&(p.currentClass=e[0].group)}},this.populateCurrentCollection=function(){if(p.params.customerId){var e=u.allCollections.filter(function(e){return e.id==p.params.customerId});e.length>0&&(p.currentCollection=e[0].title)}},s.$watch("documentsService.allCollections",function(e,t,n){e&&(p.populateCurrentClass(),p.populateCurrentCollection())},!0),this.toggle=function(){e("left").toggle()},this.closeMenu=function(){e("left").close()},t.$on("$stateChangeSuccess",function(){p.hideFooter="register"===o.current.name||"login"===o.current.name||"home"===o.current.name||"confirm"===o.current.name});t.$on("$stateChangeSuccess",function(e,t,n,a,i){m(o.current.name,a.name,i,o.current.parentState,n)});this.navigateBack=function(){p.previousState&&p.previousStateParams&&o.go(p.previousState,{id:p.previousStateParams.id})},s.$watch("localAccessService.accessKeyUser",function(e,t,n){e&&e!=t&&(p.accessKeyUser=e)},!0),this.navigateUp=function(){p.parentState&&(p.parentState==p.previousState?o.go(p.previousState,p.previousStateParams):o.go(p.parentState,p.params))},this.navigateHome=function(){"home"!==p.state&&o.go("home")}};o.$inject=["$mdSidenav","$rootScope","$log","$state","$stateParams","$http","$scope","$window","LocalAccessService","documentsService"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/components/sidemenu/sidemenu.html",scope:{creationDate:"="},controller:o,controllerAs:"sm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.SidemenuDirective=a;var o=function i(e){"ngInject";n(this,i),this.toggle=e("left").toggle()};o.$inject=["$mdSidenav"]},function(e,t){"use strict";function n(e){"ngInject";return function(t,n,a){t.$watch(a.items,function(o){if(o){var i="<div>{{ #TPL#."+a.value+" || #TPL#."+a.defaultvalue+" }}</div>";o.forEach(function(o,r){var c=angular.element(i.replace(/#TPL#/g,a.items+"["+r+"]"));e(c)(t),n.append(c)})}})}}n.$inject=["$compile"],Object.defineProperty(t,"__esModule",{value:!0}),t.NoScopeRepeatDirective=n},function(e,t){"use strict";function n(){"ngInject";return function(e,t,n,a){if(!e)return"";if(n=parseInt(n,10),!n)return e;if(e.length<=n)return e;if(e=e.substr(0,n),t){var o=e.lastIndexOf(" ");-1!=o&&(("."==e.charAt(o-1)||","==e.charAt(o-1))&&(o-=1),e=e.substr(0,o))}return e+(a||" …")}}Object.defineProperty(t,"__esModule",{value:!0}),t.TruncateFilter=n},function(e,t){"use strict";function n(){"ngInject";return function(e,t){return e?e.filter(function(e){return-1==t.indexOf(e.group.value)}):[]}}Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionFilter=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t){"ngInject";n(this,e),this.filter=t}return e.$inject=["$filter"],a(e,[{key:"searchCriteria",value:function(e,t){var n=this;return function(a){if(t&&a.count<1)return!1;var o=angular.copy(a);if(o.thumb&&(o.thumb=""),o.date){var i=n.filter("date")(o.date,"dd.MM.yyyy"),r=n.filter("filter")([i],e);
if(r.length>0)return!0}if(o.totalamount){var c=n.filter("currency")(o.totalamount,""),s=n.filter("filter")([c],e);if(s.length>0)return!0}return n.filter("filter")([o],e).length>0}}}]),e}();t.SearchService=o},function(e,t){"use strict";function n(){"ngInject";var e=/^[-_a-zA-Z0-9]+(\.[-_a-zA-Z0-9]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$/,t={require:"ngModel",restrict:"A",link:function(t,n,a,o){o&&o.$validators.email&&(o.$validators.email=function(t){return o.$isEmpty(t)||e.test(t)})}};return t}Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateEmail=n},function(e,t){"use strict";function n(){"ngInject";var e={restrict:"A",link:function(e,t,n,a){var o=function(t,n){e(function(){})};t.$on("$stateChangeSuccess",o)}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.AppTitle=n},function(e,t){"use strict";function n(){"ngInject";var e={require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,a){a.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){a.$validate()})}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.CompareTo=n},function(e,t){"use strict";function n(){"ngInject";var e={restrict:"A",require:"ngModel",replace:!1,link:function(e,t,n,a){var o=n.documentDataValidate;a.$validators.documentDataValidate=function(e){if(!a.$dirty)return!0;if(o)switch(o){case"documentTitle":var t=e&&e.length>0&&e.length<256;return!!t;case"documentDate":var n=new Date(e);return null!=e&&!isNaN(Date.parse(n));case"documentAmount":(+e).toFixed(2);return""!==e&&!isNaN(+e)&&angular.isNumber(+e);default:return!0}return!0}}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentDataValidate=n},function(e,t){"use strict";angular.module("ngLocalize.Config",[]).value("localeConf",{basePath:"app/languages",defaultLocale:"EN",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::"}),angular.module("ngLocalize.InstalledLanguages",[]).value("localeSupported",["EN","DE"]).value("localeFallbacks",{en:"EN",de:"DE"})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o){"ngInject";n(this,e),this.client=t,this.config=a,this.pathTypes=o,this.rootScope=null,this.listening=!1,this.errors=[],this.user=null,this.pathMap=[],this.dataPool={}}return e.$inject=["client","config","pathTypes"],a(e,[{key:"isConfigValid",value:function(){return this.config&&this.config.host&&this.config.scope&&this.config.role?!0:(console.log("wrong config"),!1)}},{key:"setUser",value:function(e){this.user=e}},{key:"isUserValid",value:function(e){return this.user&&this.user.account.uuid?!0:this.isAccessKeyUser?!0:(e||console.log("wrong user"),!1)}},{key:"connect",value:function(){var e=this;this.client.connect(this.config.host,this.config.scope,this.config.role,function(t){t?e.errors.push=t:(console.log("connected"),e.listening=!0,e.initOnChangeDataHandlers(),e.initGetDataHandlers(),e.user&&e.goOnline(),e.client.onDisconnect(function(){console.log("disconnected")}))})}},{key:"bindOnChangeDelegate",value:function(e,t){this.listening&&this.client.path(e).onDataChange(t)}},{key:"applyOnChangeDataDelegate",value:function(e){var t=this,n=this;this.listening&&(!e.pathConfig.checkMultipleIds||e.pathConfig.checkMultipleIds&&0==e.pathConfig.ids.length?!function(){var a=t.getPath(e),o=e.name;n.client.path(a).onDataChange(function(e,t,a){n.rootScope.$apply(function(){n.dataPool[o]=e})})}():!function(){var t=e.pathConfig.ids,a=void 0,o=void 0;angular.forEach(t,function(t){a=n.getPath(e,t),o=e.name,n.client.path(a).onDataChange(function(e,a,i){n.rootScope.$apply(function(){n.dataPool[o]||(n.dataPool[o]={}),n.dataPool[o][t]=e})})})}())}},{key:"applyGetDataDelegate",value:function(e){var t=this,n=this;this.listening&&e.pathConfig.getData&&(!e.pathConfig.checkMultipleIds||e.pathConfig.checkMultipleIds&&0==e.pathConfig.ids.length?!function(){var a=t.getPath(e),o=e.name;n.client.path(a).getData(function(e,t,a){null==e&&n.rootScope.$apply(function(){n.dataPool[o]=t})})}():!function(){var t=e.pathConfig.ids,a=void 0,o=void 0;angular.forEach(t,function(t){a=n.getPath(e,t),o=e.name,n.client.path(a).getData(function(e,a,i){null==e&&n.rootScope.$apply(function(){n.dataPool[o]||(n.dataPool[o]={}),n.dataPool[o][t]=a})})})}())}},{key:"generateUuid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"updatePathConfig",value:function(e,t,n){var a=this;angular.forEach(a.config.paths,function(a){a.name==e&&(a.pathConfig[t]=n)})}},{key:"getPath",value:function(e,t){switch(e.pathType){case this.pathTypes.userCollection:var n=this.user?this.user.account.uuid:this.generateUuid();return"/"+e.pathConfig.type+"/"+n+"/"+e.pathConfig.dataType;case this.pathTypes.userOnline:var a="";return this.user&&this.user.account&&this.user.account.uuid?a=this.user.account.uuid:t&&(a=t),"/"+e.pathConfig.type+"/"+a;case this.pathTypes.userChat:var o="";return this.user&&this.user.account&&this.user.account.uuid?o=this.user.account.uuid:t&&(o=t),"/"+e.pathConfig.type+"/"+o;default:return null}}},{key:"onChangeDataEntryPoint",value:function(e,t,n){return e}},{key:"initOnChangeDataHandlers",value:function(){var e=this;e.config.paths?angular.forEach(e.config.paths,function(t,n){e.applyOnChangeDataDelegate(t)}):console.log("no valid paths configured")}},{key:"initGetDataHandlers",value:function(){var e=this;e.config.paths?angular.forEach(e.config.paths,function(t,n){e.applyGetDataDelegate(t)}):console.log("no valid paths configured")}},{key:"getPathByName",value:function(e,t){var n=this,a=null;return n.config.paths&&angular.forEach(n.config.paths,function(o,i){return o.name==e?void(a=t?n.getPath(o,t):n.getPath(o)):void 0}),a}},{key:"getPaths",value:function(){var e=this;return e.config.paths}},{key:"setData",value:function(e,t){this.listening&&this.client.path(e).setData(t)}},{key:"getData",value:function(e,t){this.listening&&this.client.path(e).getData(t||function(e,t,n){})}},{key:"getDataByPathName",value:function(e,t,n){var a=this.getPathByName(e,n);this.getData(a,t)}},{key:"getDataPoolRecordByPathName",value:function(e,t){return this.dataPool[e]?t?this.dataPool[e][t]:this.dataPool[e]:void 0}},{key:"setRootScope",value:function(e){this.rootScope=e}},{key:"goOffline",value:function(){this.setDataByPathName("userOnline",{status:"offline",time:(new Date).getTime()})}},{key:"goOnline",value:function(){console.log("online"),this.setDataByPathName("userOnline",{status:"online",time:(new Date).getTime()})}},{key:"setDataByPathName",value:function(e,t){var n=this.getPathByName(e,t.idForPath);n&&this.setData(n,t)}},{key:"listen",value:function(){this.listening||this.isConfigValid()&&this.isUserValid()&&this.connect()}}]),e}(),i=function(){function e(){"ngInject";n(this,e),this.pathTypes={userCollection:1,userChat:10,userOnline:11},this.client=new Infinicast.InfinicastClient,this.config={}}return a(e,[{key:"setConfig",value:function(e){this.config=e}},{key:"$get",value:function(){return new o(this.client,this.config,this.pathTypes)}}]),e}();t.InfinicastWrapper=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o){"ngInject";n(this,e),this.$q=t,this.ConfigService=a,this.storageService=o,this.notifications=[]}return e.$inject=["$q","ConfigService","StorageService"],a(e,[{key:"processNotificationData",value:function(e,t,n){var a=new Date,o={id:t.id,header:a,title:"default",action:"has been changed",entityName:"Item",url:"/"};switch(e){case"userCollection":return o.header=a,o.entityName=t.group.locale,o.title=t.title,o.url="/"+t.group.value+"/"+t.id,o.originalData=t,this.storageService.cleanSelectedRecordsByCollectionForUser("documents",o.id,n),this.storageService.cleanSelectedRecordsByCollectionForUser("collections",t.group.value,n),o;default:return o}}},{key:"addNotification",value:function(e){var t=this;if(this.notifications.length){var n=!0;angular.forEach(this.notifications,function(t){return e==t?void(n=!1):void 0}),n&&t.notifications.push(e)}else t.notifications.push(e)}},{key:"clearNotifications",value:function(){this.notifications=[]}}]),e}();t.NotificationService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t){"ngInject";n(this,o),this.template='<div class="dz-preview dz-file-preview"><div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div><div class="dz-filename"><span data-dz-name></div></span><div class="dz-error-message"><span data-dz-errormessage></span><div></div>';var a=this;this.dropzone=null,this.localAcceptHandler=function(e,t){a.sendInterceptPromise(e).then(function(e){})["catch"](function(e){})},this.setSuccess=function(e){e.status="success",e.processing=!1,a.dropzone.emit("success",e,"file uploaded"),a.dropzone.emit("complete",e)},this.setError=function(e,t){e.status="error",e.processing=!1,t=t||"error",a.dropzone.emit("error",e,t)},this.sendInterceptPromise=function(n,o){n.status="queued";var i=n.name.replace(/[^\w\s~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"");return e(function(e,o){var r={name:i};a.uploadType&&(r.type=a.uploadType);var c=new FileReader;c.onload=function(){a.dropzone.emit("uploadprogress",n,50,n.upload.bytesSent);var o=btoa(c.result);t.callUploadFile(o,r).then(function(e){angular.isUndefined(e.error)?(a.dropzone.emit("uploadprogress",n,100,n.upload.bytesSent),a.setSuccess(n)):e.error&&(a.dropzone.emit("uploadprogress",n,100,n.upload.bytesSent),a.setError(n,e.error),a.dropzone.emit("complete",n))},function(e){a.setError(n)}),e(c.result)},c.onerror=function(){a.dropzone.emit("error",n,"error"),o(c.result)},c.onprogress=function(e){var t=Math.round(e.loaded/e.total*100);n.upload.bytesSent=e.loaded,a.dropzone.emit("uploadprogress",n,t,n.upload.bytesSent)},c.readAsBinaryString(n),n.status="uploading",n.processing=!0,a.dropzone.emit("processing",n)})},this.acceptAltHandler=function(e,t){a.dropzone.processFile(e)}};a.$inject=["$q","documentsService"],t.UploadService=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,t){"ngInject";n(this,o),this.readOptions={},this.getTestData=function(e){},this.workbooktoJson=function(e){var t=[],n=[];return e.SheetNames.forEach(function(a){var o=XLS.utils.sheet_to_json(e.Sheets[a]);o.length>0&&(t.push(o),n.push(a))}),{data:t,names:n}},this.workbookToCsv=function(e){var t=[];return e.SheetNames.forEach(function(n){var a=XLSX.utils.sheet_to_csv(e.Sheets[n]);a.length>0&&(t.push("SHEET: "+n),t.push(""),t.push(a))}),t.join("\n")},this.readXLdata=function(e,t){return XLSX?(t=t||"binary",XLSX.read(e,{type:t})):null}};a.$inject=["$q","documentsService"],t.ViewerService=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t,a,o,i,r,c,s,l,d){"ngInject";n(this,e),this.$http=t,this.$log=a,this.$q=l,this.$window=s,this.configService=o,this.localAccessService=i,this.storageService=c,this.CheckAuthService=r,this.documentsService=d}return e.$inject=["$http","$log","ConfigService","LocalAccessService","CheckAuthService","StorageService","$window","$q","documentsService"],a(e,[{key:"callPartnerByCollectionId",value:function(e,t){t=t||!1;var n={partner:{method:"by ID",id:902}},a={apiName:"partner",cacheName:"partner",itemKey:"partnerItems",dataKey:"partner"};return this.documentsService.baseAuthCall(n,a,e,t)}},{key:"updatePartnerInformation",value:function(e,t,n){e.type.value;e.id=e.hasOwnProperty("id")?e.id:null;var a=!0,o={partner:{id:e.id,acctid:null==e.id?e.acctid:null,method:null==e.id?"new":t,type:{value:e.type.value},no:e.no,name1:e.name1,name2:e.name2,street:e.street,zip:e.zip,city:e.city,country:e.country,url:e.url,remarks:e.remarks}};void 0!=n&&(0==n?o.partner.deleted=new Date:o.partner.deleted="");var i={apiName:"partner",itemKey:"partnerItems",dataKey:"partner"};return this.documentsService.baseAuthCall(o,i,e.id,a)}},{key:"updateContacts",value:function(e,t,n){var a=!0,o={contact:{id:e.id,partnerid:t,method:"change",firstname:void 0==e.firstname?"":e.firstname,lastname:e.lastname,landline:e.landline,remarks:e.remarks,create_colkey:e.isColumn,notify_accesskey:e.isNotification}};0==n?o.contact.deleted=new Date:1==n&&(o.contact.deleted="");var i={apiName:"partner",cacheName:"partner",itemKey:"partnerItems",dataKey:"partner"};return this.documentsService.baseAuthCall(o,i,null,a)}},{key:"callContactByCollectionId",value:function(e,t){t=!0;var n={contact:{method:"by ID",id:e}},a={apiName:"partner",cacheName:"partner",itemKey:"partnerItems",dataKey:"partner"};return this.documentsService.baseAuthCall(n,a,e,t)}},{key:"uploadDocument",value:function(e,t){var n=!0,a={document:{method:"new",filename:e.name,file:e.filedata},activity:{type:"upload"},partner:[{id:t}]},o={itemKey:"partnerItems",dataKey:"document"};return this.documentsService.baseAuthCall(a,o,null,n)}},{key:"getContryList",value:function(){return[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]}}]),e}();t.PartnerService=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"A",replace:!0,scope:!0,templateUrl:"app/partner/contactInformation.tpl.html",controller:o,controllerAs:"sm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.contactInformation=a;var o=function i(){"ngInject";n(this,i)};angular.module("xchange",[]).directive("contactInformation",[function(){return{restrict:"A",replace:!0,scope:!0,templateUrl:"app/partner/contactInformation.tpl.html"}}]).directive("getSelectedValue",[function(){return{link:function(e,t,n){t.on("change",function(){e.getSelectedValue(this.options[this.selectedIndex].text,this.selectedIndex)})}}}]).directive("fileDropHandler",[function(){return{restrict:"A",link:function(e,t){function n(e,t,a,o,i){var r=new FileReader,c=[];r.readAsDataURL(e),angular.forEach(a,function(e){c.push({title:e.name.replace(/\\/g,"/").substring(e.name.lastIndexOf("/")+1,e.name.lastIndexOf("."))})}),r.onload=function(e){return function(r){var c={name:e.name,type:e.type,size:e.size,lastModifiedDate:e.lastModifiedDate,filedata:r.target.result.split(",")[1]};i.addDocumentFile(c).then(function(e){if(t++,t<a.length){var r=a[t];n(r,t,a,o,i)}})}}(e)}window.addEventListener("dragover",function(e){e=e||event,e.preventDefault()},!1),window.addEventListener("drop",function(e){e=e||event,e.preventDefault()},!1),t.find("li").on("dragenter",function(e){t.addClass("partner-document-container-dragover")}),t.find("li").on("dragleave",function(e){t.removeClass("partner-document-container-dragover")}),t.on("dragenter",function(e){t.addClass("partner-document-container-dragover")}),t.on("dragleave",function(e){t.removeClass("partner-document-container-dragover")}),t.bind("drop",function(a){a.stopPropagation(),a.preventDefault(),t.removeClass("partner-document-container-dragover");var o=a.dataTransfer.files,i=0;e.$parent.$broadcast("start-uploading"),n(o[i],i,o,e.partnerInfo.id,e)})}}}])}]),angular.module("xchange").run(["$templateCache",function(e){e.put("app/accesskey/accesskey.html",'<div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!(docs | filter:searchService.searchCriteria(documentsService.searchFilter)).length" class="no-docs">{{\'error.5011\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><div ng-cloak="" infinite-scroll="totalDocCount > pageSize ? more() : null" infinite-scroll-disabled="documentService.busy" infinite-scroll-distance="1" ng-class="cardMode ? \'\' : \'list-box\'" ng-include="cardMode ? \'app/customer/customer.cards.tpl.html\' : \'app/customer/customer.list.tpl.html\'"></div>'),e.put("app/accesskey/home.html",'<div ng-cloak="" ng-class="cardMode ? \'\' : \'list-box\'"><md-content ng-if="cardMode" class="md-padding"><div docgrid="" class="deckgrid"><div grid="" class="a-card column"><a ui-sref="accesskeyDocument({accessKey: accessKey})"><md-card><md-card-title><div class="card-count count-other">{{totalDocCount || \'?\'}}</div><md-card-title-text><span class="md-headline">{{\'All Documents\'}}</span></md-card-title-text></md-card-title></md-card></a></div><div grid="" ng-repeat="card in akCoreItems" class="a-card column"><a ui-sref="accesskeyCollection({accessKey: accessKey, collectionId: card.group.value, collectionLocale: card.group.locale})"><md-card><md-card-title><md-card-title-text><span class="md-headline">{{card.group.locale}}</span></md-card-title-text></md-card-title></md-card></a></div></div></md-content><ons-list ng-if="!cardMode" class="list-offsets"><ons-list-item class="a-card"><div class="a-card"><a ui-sref="accesskeyDocument({accessKey: accessKey})"><div><div class="card-count-list count-other">{{totalDocCount || \'?\'}}</div><span>{{\'Documents\'}}</span></div></a></div></ons-list-item><ons-list-item grid="" ng-repeat="card in akCoreItems" class="a-card"><div class="a-card"><a ui-sref="accesskeyCollection({accessKey: accessKey, collectionId: card.group.value, collectionLocale: card.group.locale})"><div><span>{{card.group.locale}}</span></div></a></div></ons-list-item></ons-list></div>'),e.put("app/changelog/changelog.html",'<div ng-cloak="" class="list-box"><md-button ng-click="clearLocalData()" style="cursor: hand;position: fixed;z-index: 2; bottom: 0;right: 0" class="md-raised">{{\'user.clearLocalStorage\' | i18n}}</md-button><ons-list class="list-offsets"><ons-list-header>v 0.3.2</ons-list-header><ons-list-item>Text embed</ons-list-item><ons-list-item>Map response to document on save</ons-list-item><ons-list-item>Angular lazy img</ons-list-item><ons-list-header>v 0.3.1</ons-list-header><ons-list-item>Filters for AK user</ons-list-item><ons-list-item>Reduce number of requests</ons-list-item><ons-list-header>v 0.3.0</ons-list-header><ons-list-item>Search</ons-list-item><ons-list-item>Dialog window menu FF fix</ons-list-item><ons-list-item>Minor bugfixing</ons-list-item><ons-list-header>v 0.2.9</ons-list-header><ons-list-item>Long words break</ons-list-item><ons-list-item>Save active if change detected and form is valid</ons-list-item><ons-list-header>v 0.2.8</ons-list-header><ons-list-item>Styles bug fixing (incorrect margins)</ons-list-item><ons-list-item>Localization completed</ons-list-item><ons-list-item>Clear cache button updated</ons-list-item><ons-list-item>Sign up page for high-res screens</ons-list-item><ons-list-item>General bug fixing</ons-list-item><ons-list-header>v 0.2.7</ons-list-header><ons-list-item>Bug fixing</ons-list-item><ons-list-header>v 0.2.6</ons-list-header><ons-list-item>Expiration and localstorage reset button</ons-list-item><ons-list-header>v 0.2.5</ons-list-header><ons-list-item>Layout updates</ons-list-item><ons-list-item>Fix menu bug for FF</ons-list-item><ons-list-item>User by accesskey info in navbar</ons-list-item><ons-list-item>Modal preview window</ons-list-item><ons-list-item>3dot for mobile</ons-list-item><ons-list-item>Update of document list on change</ons-list-item><ons-list-item>Bug fixes</ons-list-item><ons-list-header>v 0.2.4</ons-list-header><ons-list-item>IE/FF bug fixes</ons-list-item><ons-list-item>Document by access key</ons-list-item><ons-list-item>Card layout</ons-list-item><ons-list-item>Wrong password</ons-list-item><ons-list-item>IE/FF bug fixes</ons-list-item><ons-list-item>enhancement indexDB core+collections</ons-list-item><ons-list-header>v 0.2.3</ons-list-header><ons-list-item>Sprint two</ons-list-item><ons-list-header>v 0.0.19</ons-list-header><ons-list-item>Bug fixes</ons-list-item><ons-list-item>Email validation</ons-list-item><ons-list-header>v 0.0.18</ons-list-header><ons-list-item>Caching update</ons-list-item><ons-list-item>List mode layout update</ons-list-item><ons-list-item>Improved browser compatibility</ons-list-item><ons-list-item>Router bug fixes</ons-list-item><ons-list-item>Menu update</ons-list-item><ons-list-header>v 0.0.17</ons-list-header><ons-list-item>Margins for a list mode</ons-list-item><ons-list-item>Mobile list fix</ons-list-item><ons-list-item>Browser issues</ons-list-item></ons-list></div>'),e.put("app/collection/addDialog.html",'<md-dialog style="width:320px;" aria-label="addCollection" ng-cloak=""><div class="btn-close md-toolbar" ng-click="dialog.close();"><i class="material-icons">close</i></div><form name="dialog.addForm" id="addForm" ng-keyup="$event.keyCode == 13 && dialog.submit()"><md-content class="md-padding"><div name="documentInformation" novalidate=""><label style="font-weight:600">{{dialog.params.currentClass}}</label><div layout="row" style="margin-top: 10px"><md-input-container flex="100" ng-class="dialog.errors.length ? \'md-input-invalid\' : \'\'"><label class="profile-lable">{{\'common.value\'|i18n}}</label> <input type="text" placeholder="{{\'collection.addANewCollection\'|i18n}}" name="value" data-ng-model="dialog.value" class="profile-field" required="" customerror=""><div ng-messages="dialog.addForm.value.$error"><span ng-message="required" class="">{{\'error.5014\'|i18n}}</span> <span ng-message="customError" class="">{{dialog.formErrors.customError}}</span></div></md-input-container></div></div></md-content></form><div ng-show="dialog.errors.length"><div ng-repeat="error in dialog.errors" style="padding:10px;color:red;background-color: #f5f5f5;">{{error}}</div></div></md-dialog>'),e.put("app/collection/collection.cards.tpl.html","<md-content class=\"md-padding\"><div docgrid=\"\" class=\"deckgrid\"><div grid=\"\" ng-repeat=\"card in ((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections))\" class=\"a-card column\"><a ui-sref=\"{{ak ? 'accesskeyDocumentFromCollection' : 'home.collection.customer'}}({accessKey: ak, collectionId: card.group.value, collectionLocale: card.group.locale, customerId: card.id, locale: card.title.locale, currentCollection: card.title})\"><md-card><md-button ng-if=\"!ak && !{'Type': true, 'WORKFLOW': true, 'Monat': true, 'NEW': true, '' : false}[parentClass]\" class=\"md-icon-button operation\" ng-click=\"editPartner($event, card.id)\"><i class=\"material-icons\">edit</i></md-button><md-card-title class=\"card-title-mod collection-text\"><div ng-if=\"!ak\" class=\"card-count {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count}}</div><md-card-title-text><span class=\"md-headline\">{{card.title.locale}}</span></md-card-title-text></md-card-title></md-card></a></div></div></md-content>"),e.put("app/collection/collection.html",'<div ng-class="globalState == \'home.collection\' ? \'visible-block\': \'hidden-block\'"><div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections)).length" class="no-docs">{{\'error.5012\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><flying-button ng-if="!ak" template="addDialog" params="params" scope="collection"></flying-button><div ng-cloak="" ng-include="cardMode ? \'app/collection/collection.cards.tpl.html\' : \'app/collection/collection.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div><ng-dropzone ng-if="!ak" class="dropzone" options="dzOptions" callbacks="dzCallbacks" methods="dzMethods"></ng-dropzone></div><div ui-view=""></div>'),
e.put("app/collection/collection.list.tpl.html","<ons-list ng-if=\"((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections)).length > 0\" class=\"list-offsets\"><ons-list-item grid=\"\" ng-repeat=\"card in ((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections))\" class=\"\"><div class=\"a-card list-item\"><a ui-sref=\"{{ak ? 'accesskeyDocumentFromCollection' : 'home.collection.customer'}}({accessKey: ak, collectionId: card.group.value, collectionLocale: card.group.locale, customerId: card.id, locale: card.title.locale, currentCollection: card.title})\"><div><div ng-if=\"!ak\" class=\"card-count-list {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count}}</div><span class=\"card-title\">{{card.title.locale}}</span><md-button ng-if=\"!ak && !{'Type': true, 'WORKFLOW': true, 'Monat': true, 'NEW': true, '' : false}[parentClass]\" class=\"md-icon-button operation\" ng-click=\"editPartner($event, card.id)\"><i class=\"material-icons\">edit</i></md-button></div></a></div></ons-list-item></ons-list>"),e.put("app/collection/editDialog.html",'<md-dialog style="width:320px;" aria-label="addCollection" ng-cloak=""><div class="btn-close md-toolbar" ng-click="dialog.close();"><i class="material-icons">close</i></div><form name="dialog.editForm" id="editForm" ng-keyup="$event.keyCode == 13 && dialog.submit()"><md-content class="md-padding"><div name="documentInformation" novalidate=""><div style="padding: 10px 10px 10px 0;">Edit collection...</div><div layout="row"><md-input-container flex="100" ng-class="dialog.errors.length ? \'md-input-invalid\' : \'\'"><label class="profile-lable">Value</label> <input type="text" name="value" data-ng-model="dialog.value" class="profile-field" required="" customerror=""><div ng-messages="dialog.editForm.value.$error"><span ng-message="required" class="">{{\'error.5014\'|i18n}}</span> <span ng-message="customError" class="">{{dialog.formErrors.customError}}</span></div></md-input-container></div><div layout="row" layout-align="left center"><md-input-container flex="100"><label class="profile-lable">Locale</label> <input type="text" name="locale" data-ng-model="dialog.locale" class="profile-field" required=""><div ng-messages="dialog.editForm.locale.$error"><span ng-message="required" class="">{{\'error.5015\'|i18n}}</span></div></md-input-container></div></div></md-content></form><div ng-show="dialog.errors.length"><div ng-repeat="error in dialog.errors" style="padding:10px;color:red;background-color: #f5f5f5;">{{error}}</div></div></md-dialog>'),e.put("app/confirm/confirm.html",'<div class="confirm" style="" layout="row"><div class="" layout="column" flex-gt-xs="33"></div><div class="confirm-form" layout="column" flex="66"><form class="registration-form" name="registration.confirmForm" id="confirmForm" ng-keyup="$event.keyCode == 13 && submitToServer()" novalidate=""><div class="confirmation-label">{{\'user.registrationConfirmation\' | i18n}}</div><div><md-input-container><label class="login-validation-color">{{\'user.confirmationCode\' | i18n}}</label> <input type="text" class="login-validation-border-color" data-ng-model="registration.confirmCode" name="confirmCode" required=""><div ng-messages="registration.confirmForm.confirmCode.$error"><span class="login-validation-color" ng-message="required">{{\'error.5016\'|i18n}}</span></div></md-input-container></div><div><span></span><md-button class="md-raised login-sample-button" data-ng-click="submitToServer()">{{\'user.confirm\' | i18n}}</md-button></div></form></div></div>'),e.put("app/customer/customer.cards.tpl.html",'<md-content class="md-padding" ng-if="docs.length"><div docgrid="" class="docgrid"><div grid="" ng-repeat="card in (filteredDocs || docs)" class="column"><md-card class="main-card view-module ie-fix" ng-click="goToDocument($event, card.id);"><md-card-title><md-card-title-media><img ng-if="card.thumb" class="card-image" lazy-img="{{baseUrl}}file{{card.thumb}}" alt="{{card.title | truncate:true:16:\'...\'}}"></md-card-title-media><md-card-title-text class="mod-card-title"><div class="md-headline mod-card-text">{{card.title|truncate:true:28:\'...\'}}</div><div layout="row"><span class="md-subhead" flex="">{{card.type.locale|truncate:true:28:\'...\'}}</span> <span class="md-subhead" flex="">{{card.workstatus|truncate:true:28:\'...\'}}</span></div><div layout="row"><span class="md-subhead" flex="" style="">{{card.date | date: "dd.MM.yyyy" }}</span> <span class="md-subhead" flex="" style="" ng-if="card.totalamount">€{{card.totalamount|currency:\'\'}}</span></div><div layout="row" layout-align="left center" style="padding: 10px 0 12px 0;"><span class="md-subhead secondary-subhead" style="font-size: 16px !important;">{{(card.user.firstname + \' \' + card.user.lastname)|truncate:false:28:\'...\'}}</span></div><div class="list-item-text collection-item-card" ng-repeat="collection in card.collections | collectionFilter:excludeCollections">{{collection.title.locale || collection.title.value}}<span class="">{{$last ? \'\' : \' \'}}&nbsp;</span></div></md-card-title-text></md-card-title></md-card></div></div></md-content>'),e.put("app/customer/customer.html",'<div ng-class="(globalState == \'home.collection.customer\' || globalState == \'home.collection.document\') ? \'visible-block\': \'hidden-block\'"><div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!(filteredDocs || docs).length" class="no-docs">{{\'error.5011\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><div ng-cloak="" infinite-scroll="totalDocCount > pageSize ? more() : null" infinite-scroll-disabled="documentService.busy" infinite-scroll-distance="1" ng-class="cardMode ? \'\' : \'list-box\'" ng-include="cardMode ? \'app/customer/customer.cards.tpl.html\' : \'app/customer/customer.list.tpl.html\'"></div><ng-dropzone class="dropzone" options="dzOptions" callbacks="dzCallbacks" methods="dzMethods"></ng-dropzone></div><div ui-view=""></div>'),e.put("app/customer/customer.list.tpl.html",'<div class="list-offsets doc-list-table" ng-if="docs.length"><div grid="" ng-repeat-start="card in (filteredDocs || docs)" class="grid-item main-card view-list a-card doc-list-row" ng-click="goToDocument($event, card.id);"><div class="grid-column main-card column list-item-title mod-card-text list-column-1" title="{{card.title}}">{{card.title}}</div><div class="grid-column list-item-text list-column-2" title="{{card.type.locale || card.type.value}} {{card.workstatus}}">{{card.type.locale || card.type.value }} {{card.workstatus}}</div><div class="grid-column list-item-text list-item-text-r1 list-column-4">{{card.date | date: "dd.MM.yyyy" }}</div><div class="grid-column list-item-text list-item-text-r2 list-column-5" title="{{(card.user.firstname + \' \' + card.user.lastname)}}">{{(card.user.firstname + \' \' + card.user.lastname)}}</div><div class="grid-column list-item-text list-item-text-r4 list-column-6"><span ng-if="card.totalamount">€</span>{{card.totalamount | currency:\'\'}}</div><div class="col-ruler" ng-if="(card.collections | collectionFilter:excludeCollections).length"></div></div><div ng-repeat-end="" class="doc-list-row collection-list grid-nb" ng-click="goToDocument($event, card.id);"><div class="grid-column"><div class="list-item-text collection-item" ng-repeat="collection in card.collections | collectionFilter:excludeCollections">{{collection.title.locale || collection.title.value}}<span class="col-separator">{{$last ? \'\' : \' \'}}&nbsp;</span></div></div><div class="grid-column fake-col"></div><div class="grid-column fake-col"></div><div class="grid-column fake-col"></div><div class="grid-column fake-col"></div></div></div>'),e.put("app/customer/edit.html",'<div class="edit-nav-arrows-alt edit-arrow-left"><i ng-class="hasNoPrevDocument ? \'arrow-blur\' : \'\'" class="mdi mdi-chevron-left" ng-click="loadDocumentWithOffset(-1);"></i></div><md-dialog ng-click="$event.stopPropagation();sideMenu=false;showDLdBox=false;" class="edit-doc" style="background-color: #f5f5f5;min-width:1000px;width:1000px;height:100%;min-height:100%;overflow:hidden;" aria-label="documentEdit" ng-cloak=""><md-toolbar style="position:relative;"><div class="md-toolbar-tools"><h2>{{editForm.title}}</h2><span ng-if="editForm.workstatus" class="edit-header-workstatus">{{editForm.workstatus}}</span> <span flex=""></span><md-button class="md-icon-button hide-gt-xs" aria-label="editDocSideMenu" ng-click="$event.stopPropagation();toggleSideMenu();"><i class="mdi mdi-dots-vertical" style="top: 14px;right: 70px;font-size: 1.9em;"></i></md-button><md-button class="md-icon-button" ng-click="cancel($event)"><i class="material-icons">close</i></md-button></div></md-toolbar><div ng-if="showSaveConfirmation" class="save-confirmation"><span class="save-confirmation-text" style="">{{\'customer.saveChanges\' | i18n}}</span><md-button class="md-icon-button" ng-click="save(editForm);hideDialog($event);"><i class="material-icons" style="color: #00AA00">done</i></md-button><md-button class="md-icon-button" ng-click="hideDialog($event)"><i class="material-icons" style="color: #aa0000">cancel</i></md-button></div><div layout="row" in-view-container="" class="edit-dialog-container" style="overflow-y: scroll;height: calc(100vh - 64px);"><div class="" flex=""><form id="saveForm" name="saveForm"><div id="main_details"><md-button ng-model="docDetailsSections.mainBlock" aria-label="documentOverviewBtn" class="category-button md-button-toggle md-raised" ng-click="goTo($event, $event, \'main_details\');">{{\'customer.overview\' | i18n}}</md-button><div class="form-block-container" ng-accordion-body="" ng-class="docDetailsSections.mainBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak="" layout-gt-sm="row" layout-sm="column" layout-xs="column"><md-content class="md-padding flex"><div layout="row"><md-input-container class="flex mdic-mw"><label class="profile-lable">{{\'common.title\' | i18n}}</label> <input type="text" name="title" data-ng-model="editForm.title" document-data-validate="documentTitle" class="profile-field"><div ng-messages="saveForm.title.$error"><div class="" ng-message="documentDataValidate">{{\'error.5017\'|i18n}}</div></div></md-input-container></div><div layout="row" layout-align="left center" style="padding-bottom: 20px"><div class="documentIcon"><label class="profile-label" style="display:block;font-size: 11px !important;">{{\'common.date\' | i18n}}</label><md-datepicker name="date" ng-model="editForm.documentDate" document-data-validate="documentDate" md-placeholder="Enter date" aria-label="documentDate"></md-datepicker><div ng-messages="saveForm.date.$error"><div class="edit-doc-error" ng-message="documentDataValidate">{{\'error.5013\'|i18n}}</div></div></div></div><div layout="row" layout-align="left center" style="padding-bottom: 15px"><md-input-container class="flex mdic-mw"><label class="profile-lable">{{\'common.type\' | i18n}}</label><md-select class="mdic-mw" name="type" ng-model="editForm.type.value"><md-option ng-repeat="type in editForm.types_available" value="{{type.value}}">{{type.locale}}</md-option></md-select></md-input-container></div></md-content><md-content class="md-padding flex"><div layout="row right"><md-input-container class="flex amount-container mdic-mw" layout-align="right"><label class="profile-lable amount-label">{{\'customer.netAmount\' | i18n}}</label> <input type="text" name="netvaluegoods" ng-model="editForm.netvaluegoods" ng-currency="" document-data-validate="documentAmount" class="profile-field"><div ng-messages="saveForm.netvaluegoods.$error"><div class="" ng-message="documentDataValidate">{{\'error.5018\'|i18n}}</div></div></md-input-container></div><div layout="row right"><md-input-container class="flex amount-container mdic-mw"><label class="profile-lable amount-label">{{\'customer.taxAmount\' | i18n}}</label> <input type="text" name="totaltax" ng-model="editForm.totaltax" ng-currency="" document-data-validate="documentAmount" class="profile-field"><div ng-messages="saveForm.totaltax.$error"><div class="" ng-message="documentDataValidate">{{\'error.5019\'|i18n}}</div></div></md-input-container></div><div layout="row right"><md-input-container class="flex amount-container mdic-mw"><label class="profile-lable amount-label">{{\'customer.totalAmount\' | i18n}}</label> <input type="text" name="totalamount" ng-model="editForm.totalamount" ng-currency="" document-data-validate="documentAmount" class="profile-field"><div ng-messages="saveForm.totalamount.$error"><div class="" ng-message="documentDataValidate">{{\'error.5020\'|i18n}}</div></div></md-input-container></div></md-content></div></div><div class="form-block-container"><div style="margin:7px 0 0 10px"><label style="display:block;font-size: 12px;padding-bottom: 8px;" class="profile-lable">{{\'customer.description\' | i18n}}</label> <textarea data-ng-model="editForm.text" columns="1" name="text" style="height:120px !important;width:100%">{{editForm.text}}</textarea></div></div></div><div id="doc_workflow"><md-button class="md-raised category-button" aria-label="documentWorkflowBtn" ng-click="goTo($event, \'doc_workflow\');">{{\'customer.workflow\' | i18n}}<span ng-if="newWorkFlow && editForm.workflow && editForm.workflow.process" style="overflow: hidden;font-size:14px;opacity: 0.87">&nbsp;{{editForm.workflow.process.name}}</span>&nbsp;<span style="font-size: 12px;opacity: 0.87">{{editForm.workflow.process.description}}</span></md-button><div class="form-block-container" ng-accordion-body="" ng-class="docDetailsSections.workflowBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-if="newWorkFlow" ng-cloak=""><md-content class="" style="padding-bottom: 10px"><div ng-if="editForm.workprocess" layout="row" style="padding: 10px;" layout-align="left center"><md-input-container class="flex mdic-mw"><div ng-if="editForm.workprocessToStart" class="profile-lable" style="font-size: 14px;color: rgba(0,0,0, 0.61);padding: 5px 0 5px 0;">{{editForm.workprocessToStart.description}}</div><label class="profile-lable">Workflow process to start</label><md-select class="mdic-mw" name="workprocessToStart" ng-model="editForm.workprocessToStart"><md-option ng-value="wfprocess" ng-repeat="wfprocess in editForm.workprocess">{{wfprocess.name}}</md-option></md-select></md-input-container></div><div ng-if="editForm.workflow" layout="row" style="padding: 10px;" layout-align="left center"><div class="breadcrumb flat"><a ng-if="editForm.workflow.done" ng-value="dwf" ng-repeat="dwf in editForm.workflow.done" ng-class="$last && !editForm.workflowNextStep ? \'active\' : \'\'" ng-click="$last && resetWorkflowStep()" title="{{dwf.desc}}">{{dwf.step}}</a> <a ng-if="editForm.workflow.next" ng-value="nwf" ng-repeat="nwf in editForm.workflow.next" title="{{nwf.desc}}" ng-click="$first && workflowGoNextStep()" ng-class="(editForm.workflowNextStep == nwf.step) ? \'active\' : \'\'">{{nwf.step}}</a></div></div></md-content></div><div ng-if="!newWorkFlow && editForm.workflow" ng-cloak=""><md-content class="" style="padding-bottom: 10px"><div ng-if="editForm.workflow" layout="row" style="padding: 10px;" layout-align="left center"><div class="breadcrumb flat"><a ng-class="editForm.workflow.startable ? \'active\' : \'\'">{{\'customer.past\' | i18n}}</a> <a ng-class="editForm.workflow.running ? \'active\' : \'\'">{{\'customer.current\' | i18n}}</a> <a>{{\'customer.next\' | i18n}}</a></div></div><md-content class="md-padding" style="padding-bottom: 0;" layout="column"><label ng-if="editForm.workflow.startable" class="wf-process">{{\'customer.workflowProcess\' | i18n}}</label><div ng-if="editForm.workflow.startable" flex=""><div class="wf-container" ng-repeat="wfItem in editForm.workflow.startable" ng-click="null"><div class="wf-container-inner"><div>{{wfItem.process}}</div><p>{{ wfItem.desc }}</p><div class="wf-container-sub" ng-if="wfItem.first_step"><label ng-if="editForm.workflow.startable" class="wf-process">{{\'customer.workflowStatus\' | i18n}}</label><div>{{ wfItem.first_step.status }}</div><p>{{ wfItem.first_step.desc }}</p></div></div></div></div><label ng-if="editForm.workflow.running" class="wf-process">{{\'customer.workflowProcess\' | i18n}}</label><div ng-if="editForm.workflow.running" flex=""><div class="wf-container" ng-click="null"><div class="wf-container-inner"><div>{{editForm.workflow.running.process}}</div><p>{{ editForm.workflow.running.desc }}</p><div class="wf-container-sub" ng-if="editForm.workflow.running.first_step"><label ng-if="editForm.workflow.running" class="wf-process">{{\'customer.workflowStatus\' | i18n}}</label><div>{{ editForm.workflow.running.first_step.status }}</div><p>{{ editForm.workflow.running.first_step.desc }}</p></div></div></div></div><div ng-if="editForm.workflow && editForm.workflowTips && !editForm.workflow.running && !editForm.workflow.startable" flex=""><label class="wf-process">{{\'customer.workflow\' | i18n}}</label><div class="wf-container" ng-click="null"><div class="wf-container-inner"><div>{{editForm.workflow}}</div><p>{{ editForm.workflowTips}}</p></div></div></div></md-content></md-content></div></div></div><div ng-if="!accessKey" id="doc_collections"><md-button class="md-raised category-button" aria-label="documentCollectionsBtn" ng-click="goTo($event, \'doc_collections\');">{{\'customer.collection\' | i18n}}</md-button><div class="form-block-container" ng-class="docDetailsSections.collectionsBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak=""><md-chips name="collections" ng-model="editForm.typeList" md-autocomplete-snap="" md-require-match="true" md-on-remove="removeChip($chip)" md-transform-chip="transformChip($chip)"><md-autocomplete md-selected-item="selectedItem" md-search-text="searchText" md-items="item in querySearch(searchText)" md-item-text="item.title.locale" md-delay="200" md-no-cache="true" placeholder="{{\'customer.addCollection\' | i18n}}..."><span md-highlight-text="searchText">{{item.group.locale}} :: {{item.title.locale}}</span></md-autocomplete><md-chip-template><span><strong>{{$chip.title.locale}}</strong> <em ng-if="$chip.group.locale">({{$chip.group.locale}})</em></span></md-chip-template></md-chips></div></div></div><div id="doc_fileview" style="height:100%;"><md-button class="md-raised category-button" aria-label="documentViewBtn" ng-click="goTo($event, \'doc_fileview\');">{{\'customer.view\' | i18n}}</md-button><div style="position: relative;" in-view="onViewFile($inview) && !documentLoaded && viewFile($inview);"><md-content style="/*overflow-y:scroll;*/" ng-click="focusControl($event);"><div ng-if="documentLoading && fileType!=\'IMG\' && fileType!=\'TXT\'" layout="row" layout-sm="column" layout-align="space-around" style="padding-top: 30px;"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div><div ng-if="documentError" layout="row" layout-sm="column" layout-align="space-around" style="padding-top: 30px;">{{\'error.5008\'|i18n}}</div><div class="pdf-viewer" ng-class="unlockZoom ? \'unlock\' : \'\'" ng-show="fileType==\'PDF\'"><object data="{{trustSrc(documentUrl + \'#zoom=page-width\')}}" type="application/pdf"><img src="{{trustSrc(documentUrlLarge)}}"></object></div><div class="image-view" ng-show="fileType==\'IMG\'"><img id="view_img"></div><div class="text-view" style="padding:10px;" ng-show="fileType==\'TXT\'"><div id="view_txt" style="overflow: scroll;"><pre style="padding: 20px;">{{textData}}</pre></div></div><div class="xl-view" ng-if="fileType==\'XL\'"><div ng-if="!xlprocessing" ui-grid="gridOptions" class="grid"></div><div ng-if="showControls && fileType==\'XL\'" class="pdf-controls" ng-click="focusControl($event);"><md-button ng-show="xlsheetNames[xlsheetIndex-1]" class="md-icon-button" ng-click="prevSheet();"><i class="material-icons">keyboard_arrow_left</i></md-button><md-button ng-show="true" class="md-icon-sheet" ng-click="useSheet();">{{xlsheet}}</md-button><md-button ng-show="xlsheetNames[xlsheetIndex+1]" class="md-icon-button" ng-click="nextSheet();"><i class="material-icons">keyboard_arrow_right</i></md-button></div></div><div ng-if="false" class="pdf-controls" ng-click="focusControl($event);"><md-button ng-show="!unlockZoom" class="md-icon-button" ng-click="unlockToggle();"><i class="material-icons">lock</i></md-button><md-button ng-show="unlockZoom" class="md-icon-button" ng-click="unlockToggle();"><i class="material-icons">lock_open</i></md-button><md-button ng-show="unlockZoom" class="md-icon-button" ng-click="zoomIn();"><i class="material-icons">zoom_in</i></md-button><md-button ng-show="unlockZoom" class="md-icon-button" ng-click="zoomOut()"><i class="material-icons">zoom_out</i></md-button><span flex="100"></span><md-button ng-show="pdfTotalPages" ng-class="(pdfState.page > 1) ? \'\' : \'fade\'" class="md-icon-button" ng-click="pagePrev()"><i class="material-icons">keyboard_arrow_left</i></md-button><md-button ng-show="pdfTotalPages" ng-class="(pdfState.page < pdfTotalPages) ? \'\' : \'fade\'" class="md-icon-button" ng-click="pageNext()"><i class="material-icons">keyboard_arrow_right</i></md-button><div class="pdf-pages"><div class="pdf-current-page"><md-input-container placeholder="page"><input id="pdfPageInput" type="text" size="3" ng-maxlength="3" min="1" max="{{pdfTotalPages}}" name="page" ng-model="pdfState.page" ng-keyup="pdfGoToPage(pdfState.page)" aria-label="documentPdfPageInput" class="profile-field"></md-input-container></div><span style="padding:3px;" ng-if="true">/</span><div class="pdf-all-pages">{{pdfTotalPages || 0}}</div></div></div><div class="file-message" ng-if="fileStatus==\'Unsupported\'"><div>{{\'error.5026\' | i18n}}</div></div></md-content></div></div><div id="doc_info"><md-button class="md-raised category-button" aria-label="documentInfoBtn" ng-click="goTo($event, \'doc_info\');">{{\'customer.info\' | i18n}}</md-button><div class="form-block-container" ng-accordion-body="" ng-class="docDetailsSections.infoBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak=""><md-content class="md-padding" style="padding-bottom: 10px"><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.filename\' | i18n}}</label> <input type="text" name="filename" data-ng-model="editForm.filename" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.filenamesig\' | i18n}}</label> <input type="text" name="filenamesig" data-ng-model="editForm.filenamesig" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.creator\' | i18n}}</label> <input type="text" name="creator" data-ng-model="editForm.creator_name" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.createdOn\' | i18n}}</label> <input type="text" name="createdon" value="{{editForm.createdDate | date: \'dd.MM.yyyy HH:mm\'}}" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.updatedOn\' | i18n}}</label> <input type="text" name="updatedon" value="{{editForm.changedDate | date: \'dd.MM.yyyy HH:mm\'}}" class="profile-field" ng-readonly="true"></md-input-container></div><div ng-if="editForm.deleted" layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.archivedOn\' | i18n}}</label> <input type="text" name="deletedon" value="{{editForm.deleted | date: \'dd.MM.yyyy HH:mm\'}}" class="profile-field" ng-readonly="true"></md-input-container></div></md-content></div></div></div></form></div><div style="width:10px;"></div><div ng-class="{\'hide-xs\':!sideMenu, \'mobileMenu\': sideMenu}" class="doc-control-container"><div ng-class="{\'hide-xs\':!sideMenu, \'mobile-menu-inner\': sideMenu}" class="doc-control-fixed" ng-if="!mdClosing && editForm"><div style="height: 16px;"></div><div class="doc-control-header">{{\'customer.actions\' | i18n}}</div><div ng-if="!accessKey" class="doc-control-button" ng-class="saveForm.$valid && formChanged ? \'\' : \'control-disabled\'" ng-click="formChanged && save(editForm);"><i class="mdi mdi-content-save" role="button"></i> {{\'customer.save\' | i18n}}</div><div style="display: inline-block; width: 32px;vertical-align: top;" class="doc-control-button" ng-click="$event.stopPropagation();toggleDownloadBox()"><i class="mdi mdi-menu-down" role="button"></i></div><div style="display: inline-block;width: 168px;vertical-align: top;" class="doc-control-button" ng-click="downloadDoc()"><i class="mdi mdi-download" role="button"></i> {{\'customer.download\' | i18n}}</div><div ng-show="showDLdBox" class="doc-control-left-menu" style=""><div class="doc-control-button" ng-repeat="dlType in editForm.filetypes" ng-click="downloadDoc(dlType)"><i class="mdi mdi-download" role="button"></i>{{dlType}}</div></div><div class="doc-control-button" ng-if="(editForm && editForm.hassignature < 1)" ng-click="signDocument()"><i class="mdi mdi-pen" role="button"></i> {{\'customer.sign\' | i18n}}</div><div ng-if="!accessKey" class="doc-control-button" ng-click="archiveOrRestore(editForm);"><i class="mdi" ng-class="editForm.deleted ? \'mdi-backup-restore\' : \'mdi-archive\'" role="button"></i> {{editForm.deleted ? (\'customer.restore\' | i18n) : (\'customer.archive\' | i18n)}}</div><div style="height: 16px;"></div><div class="doc-control-header">{{\'customer.navigation\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'main_details\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.overview\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_workflow\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.workflow\' | i18n}}</div><div ng-if="!accessKey" class="doc-control-button" ng-click="goTo($event, \'doc_collections\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.collection\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_fileview\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.view\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_info\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.info\' | i18n}}</div></div></div></div></md-dialog><div class="edit-nav-arrows-alt edit-arrow-right"><i ng-class="hasNoNextDocument ? \'arrow-blur\' : \'\'" class="mdi mdi-chevron-right" ng-click="loadDocumentWithOffset(1);"></i></div>'),e.put("app/login/login.html",'<div class="login-container"><div class="content-container" layout="row" layout-sm="column"><div flex-gt-sm="" class="content-left-border"><div class="login-left-content-settings"><span style="display: block; font-size: 12px;">{{\'user.needAnAccount\' | i18n}}</span><md-button data-ng-click="login.onClickForRegistration()" class="md-raised login-sample-button">{{\'user.createAccount\' | i18n}}</md-button></div></div><div flex-gt-sm="" class="content-right"><div id="signin">{{\'user.signin\' | i18n}}</div><form name="login.loginForm" id="loginForm" ng-keyup="$event.keyCode == 13 && login.onLogin()" novalidate=""><div><md-input-container><label class="login-validation-color">{{\'user.username\' | i18n}}</label> <input type="email" validate-email="" style="color:white !important;border-color: rgb(250, 245, 245) !important;" name="userId" data-ng-model="login.userInfo.userId" required=""><div ng-messages="login.loginForm.userId.$error"><span ng-message="required" class="login-validation-color">{{\'error.5021\' | i18n}}</span><div ng-message="email" class="login-validation-color">{{\'error.5022\' | i18n}}</div></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.password\' | i18n}}</label> <input type="password" style="color:white !important;border-color: rgb(250, 245, 245) !important;" name="passWord" data-ng-model="login.userInfo.passWord" required="" server=""><div ng-messages="login.loginForm.passWord.$error"><span ng-message="required" class="login-validation-color">{{\'error.5024\' | i18n}}</span><div ng-message="server" class="login-validation-color" style="opacity: 1; margin-top: 0px;">{{login.loginForm.serviceErrorMessage}}</div></div></md-input-container></div><div><md-button class="md-raised login-sample-button login-format" data-ng-click="login.onLogin()">{{\'user.signin\' | i18n}}</md-button><span data-ng-click="login.onClickForForgetPassword()" id="Span1" class="login-forgetpassword">{{\'user.forgotYourPassword\' | i18n}}</span></div></form></div></div></div>'),e.put("app/main/addDialog.html",'<md-dialog style="width:320px;" aria-label="addCollection" ng-cloak=""><div class="btn-close md-toolbar" ng-click="dialog.close();"><i class="material-icons">close</i></div><form name="dialog.addForm" id="addForm" ng-keyup="$event.keyCode == 13 && dialog.submit()"><md-content class="md-padding"><div name="documentInformation" novalidate=""><div style="padding: 10px 10px 10px 0;">{{\'main.selectToAddNewClass\'|i18n}}</div><div layout="row" layout-align="left center"><md-input-container class="flex"><label class="profile-lable">{{\'main.class\'|i18n}}</label><md-select ng-change="dialog.delayedSubmit();" ng-model="dialog.addForm.value"><md-option ng-repeat="group in dialog.params.creatableClasses" value="{{group.value}}">{{group.locale}}</md-option></md-select></md-input-container></div></div></md-content></form><div ng-show="dialog.errors.length"><div ng-repeat="error in dialog.errors" style="padding:10px;color:red;background-color: #f5f5f5;">{{error}}</div></div></md-dialog>'),e.put("app/main/main.cards.tpl.html","<md-content class=\"md-padding\"><div docgrid=\"\" class=\"deckgrid\"><div grid=\"\" ng-repeat=\"card in ((main.filteredDocs || main.docs) || search.coreDocs)\" class=\"a-card column\"><a ui-sref=\"home.collection({collectionId: card.group.value, collectionLocale: card.group.locale})\"><md-card><md-card-title><div class=\"card-count {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count || '?'}}</div><md-card-title-text><span class=\"md-headline\">{{card.group.locale}}</span></md-card-title-text></md-card-title></md-card></a></div></div></md-content>"),e.put("app/main/main.html",'<div ng-class="globalState == \'home\' ? \'visible-block\': \'hidden-block\'"><div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!((main.filteredDocs || main.docs) || search.coreDocs).length" class="no-docs">{{\'error.5012\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><flying-button template="addDialog" scope="main" params="fbParams" ng-if="fbParams.creatableClasses.length"></flying-button><div ng-cloak="" ng-include="cardMode ? \'app/main/main.cards.tpl.html\' : \'app/main/main.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div><ng-dropzone class="dropzone" options="dzOptions" callbacks="dzCallbacks" methods="dzMethods"></ng-dropzone></div><div ui-view=""></div>'),
e.put("app/main/main.list.tpl.html","<ons-list ng-if=\"((main.filteredDocs || main.docs) || (search.coreDocs)).length > 0\" class=\"list-offsets main-list\"><ons-list-item grid=\"\" ng-repeat=\"card in ((main.filteredDocs || main.docs) || search.coreDocs)\" class=\"a-card\"><div class=\"a-card\"><a ui-sref=\"home.collection({collectionId: card.group.value, collectionLocale: card.group.locale})\"><div><div class=\"card-count-list {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count || '?'}}</div><span class=\"card-title\">{{card.group.locale}}</span></div></a></div></ons-list-item></ons-list>"),e.put("app/register/register.html",'<div class="content-container register-container" style="margin-top:0vh;height:100vh;overflow-y: scroll" layout="row" layout-sm="column"><div flex="" class="content-left-border"><div class="login-left-content-settings"><span id="isAlreadyregistered" style="display: block; font-size: 12px;">{{\'user.alreadyMember\' | i18n}}</span><md-button class="md-raised login-sample-button" ui-sref="login">{{\'user.signin\' | i18n}}</md-button></div></div><div flex="" class="content-right"><div id="signin">{{\'user.registrationIsFree\' | i18n}}*</div><form class="registration-form" name="registration.registrationForm" id="registrationForm" ng-keyup="$event.keyCode == 13 && submitToServer()" novalidate=""><div><md-input-container><label style="color:white !important">{{\'user.firstName\' | i18n}}</label> <input style="color:white !important;border-color: rgb(250, 245, 245) !important;" type="text" ng-model="registration.person.firstName"></md-input-container></div><div><md-input-container><label style="color:white !important">{{\'user.lastName\' | i18n}}</label> <input style="color:white !important;border-color: rgb(250, 245, 245) !important;" type="text" ng-model="registration.person.lastName"></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.companyName\' | i18n}}</label> <input type="text" class="login-validation-border-color" data-ng-model="registration.person.companyName" name="companyName" required=""><div ng-messages="registration.registrationForm.companyName.$error"><span class="login-validation-color" ng-message="required">{{\'error.5016\'|i18n}}</span></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.email\' | i18n}}</label> <input type="email" class="login-validation-border-color" data-ng-model="registration.person.eMailName" name="eMailName" required=""><div ng-messages="registration.registrationForm.eMailName.$error"><span class="login-validation-color" ng-message="required">{{\'error.5021\'|i18n}}</span><div class="login-validation-color" ng-message="email">{{\'error.5022\'|i18n}}</div></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.password\' | i18n}}</label> <input type="password" class="login-validation-border-color" data-ng-model="registration.person.passWord" minlength="3" name="passWord" required=""><div ng-messages="registration.registrationForm.passWord.$error"><span class="login-validation-color" ng-message="required">{{\'error.5023\'|i18n}}</span><div class="login-validation-color" ng-message="minlength">{{\'error.5025\'|i18n}}</div></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.confirmPassword\' | i18n}}</label> <input type="password" class="login-validation-border-color" data-ng-model="registration.person.confirmPassWord" minlength="3" compare-to="registration.person.passWord" name="confirmPassWord" required=""><div ng-messages="registration.registrationForm.confirmPassWord.$error"><span class="login-validation-color" ng-message="required">{{\'error.5023\'|i18n}}</span><div class="login-validation-color" ng-message="minlength">{{\'error.5025\'|i18n}}</div><div class="login-validation-color" ng-message="compareTo">{{\'error.5024\'|i18n}}</div></div></md-input-container></div><div><span><md-checkbox data-ng-model="registration.person.iagreewith" class="md-warn"><span>{{\'user.iagreewTnC\' | i18n}}</span></md-checkbox></span><md-button class="md-raised login-sample-button" data-ng-click="submitToServer()">{{\'user.register\' | i18n}}</md-button></div></form></div></div>'),e.put("app/search/search.html",'<div style="padding: 100px 80px 0 80px;"></div><h2 class="search-section">Core</h2><div ng-show="search.coreDocs.length" class="search" ng-cloak="" ng-include="cardMode ? \'app/main/main.cards.tpl.html\' : \'app/main/main.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div><div ng-show="!search.coreDocs.length" class="no-records">No collections found</div><h2 class="search-section">Collections</h2><div class="search" style="padding-top: 0px;" ng-cloak="" ng-include="cardMode ? \'app/collection/collection.cards.tpl.html\' : \'app/collection/collection.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div><div ng-show="!search.collections.length" class="no-records">No collections found</div><h2 class="search-section">Documents</h2><div class="search docs" ng-cloak="" infinite-scroll="totalDocCount > pageSize ? more() : null" infinite-scroll-disabled="documentService.busy" infinite-scroll-distance="1" ng-class="cardMode ? \'\' : \'list-box\'" ng-include="cardMode ? \'app/customer/customer.cards.tpl.html\' : \'app/customer/customer.list.tpl.html\'"></div><div ng-show="!docs.length" class="no-records">No documents found</div>'),e.put("app/partner/contactInformation.tpl.html",'<form name="ContactEntry" novalidate=""><md-dialog-content class="sticky-container"><div class="md-actions" layout="row" layout-align="center center"><span ng-if="ContactInformation.isuser" ng-class="{setzeroopacity:false}" style="margin-left:15px"><i class="fa fa-user"></i></span> <span flex=""></span><md-button ng-if="!removeCancel" class="md-primary partner-button-color" ng-click="onCloseDialog()">{{\'Cancel\'}}</md-button><md-button class="md-primary partner-button-color" ng-click="onClickOk(ContactInformation)">{{\'Save\'}}</md-button><md-menu style="padding-top:14px;"><md-button aria-label="" class="md-icon-button partner-button-color" ng-click="$mdOpenMenu()"><i class="fa fa-ellipsis-v"></i></md-button><md-menu-content width="4"><md-menu-item><md-button class="partner-button-color" ng-click="onTrashOperationClick($event)" aria-label=""><div ng-if="ContactInformation.hasOwnProperty(\'deleted\')"><i class="fa fa-trash-o"></i> <span>unTrash</span></div><div ng-if="!ContactInformation.hasOwnProperty(\'deleted\')"><i class="fa fa-trash-o"></i> <span>Trash</span></div></md-button></md-menu-item></md-menu-content></md-menu></div><div class="entryUI" layout="row"><div flex=""><md-input-container><label>{{\'First Name\'}}</label> <input name="firstName" data-ng-model="ContactInformation.firstname"><div ng-messages="ContactEntry.firstName.$error"><span ng-message="required">{{\'REQUIREFILEDNOTIFICATION\'}}</span></div></md-input-container><md-input-container><label>{{\'Last Name\'}}</label> <input name="lastName" required="" data-ng-model="ContactInformation.lastname"><div ng-messages="ContactEntry.lastName.$error"><span ng-message="required">{{\'REQUIREFILEDNOTIFICATION\'}}</span></div></md-input-container><md-input-container><label>{{\'Email\'}}</label> <input type="email" name="eMail" data-ng-model="ContactInformation.email"><div ng-messages="ContactEntry.eMail.$error"><span ng-message="email">{{\'EMAILFILEDNOTIFICATION\'}}</span></div></md-input-container></div><div flex=""><md-input-container><label>{{\'Phone\'}}</label> <input name="phone" data-ng-model="ContactInformation.landline"></md-input-container><md-input-container><label>{{\'Mobile\'}}</label> <input name="mobile" data-ng-model="ContactInformation.mobile"></md-input-container><md-input-container layout="row"><md-checkbox ng-model="ContactInformation.isColumn"><span style="font-size: 15px;">{{\'Create accesskey\'}}</span></md-checkbox></md-input-container><md-input-container layout="row"><md-checkbox ng-model="ContactInformation.isNotification"><span style="font-size: 15px;">{{\'Send notification\'}}</span></md-checkbox></md-input-container><md-input-container><span style="margin-left: 7px;"><i class="fa fa-info" style="margin-right: 10px;"></i><span ng-if="ContactInformation.created" style="font-size: 14px;">&nbsp;{{formatDate(ContactInformation.created) | date:"dd.MM.yyyy"}}</span><span ng-if="ContactInformation.updated" style="font-size: 14px;">&nbsp;/&nbsp;{{formatDate(ContactInformation.updated) | date:"dd.MM.yyyy"}}</span></span></md-input-container></div></div><div><label style="display:block;font-size: 12px;padding-bottom: 8px;">{{\'Remarks\'}}</label> <textarea name="sample" data-ng-model="ContactInformation.remarks" style="height:8vh;width:99%;border: solid 1px rgba(0,0,0,0.24);border-radius: 2px"></textarea></div></md-dialog-content></form>'),e.put("app/partner/partner.html",'<md-dialog ng-click="$event.stopPropagation();sideMenu=false;" class="edit-doc" style="background-color: #f5f5f5;min-width:1000px;width:1000px;height:100%;min-height:100%;overflow:hidden;" aria-label="documentEdit" ng-cloak=""><md-toolbar style="position:relative;"><div class="md-toolbar-tools"><h2>{{partnerInfo.name1}}</h2><span flex=""></span><md-button class="md-icon-button hide-gt-xs" aria-label="editDocSideMenu" ng-click="$event.stopPropagation();toggleSideMenu();"><i class="mdi mdi-dots-vertical" style="top: 14px;right: 70px;font-size: 1.9em;"></i></md-button><md-button class="md-icon-button" ng-click="cancel($event)"><i class="material-icons">close</i></md-button></div></md-toolbar><div layout="column" style="overflow-y: scroll;height: calc(100vh - 64px);"><div data-ng-show="isShowContact" class="partner-Entry-UI"><md-content class="md-padding-partner"><md-tabs id="partnerTabUI" md-dynamic-height="" md-border-bottom="" md-selected="selectedPartnerTabIndex"><md-tab label="{{\'Company\'}}" style="color:black !important;" md-on-select="onPartnerTabSelected()"><md-content class="md-padding-partner partner-Entry-container" layout="column" style="padding: 5px;"><form name="partnerEntry" novalidate=""><div flex="" layout="row" layout-align="center center"><span ng-switch="iconIndex"><span ng-switch-when="1"><i class="fa fa-trash-o"></i></span> <span ng-switch-when="2"><i class="fa fa-link"></i></span> <span ng-switch-when="3"><i class="fa fa-users"></i></span> <span ng-switch-when="4" style="opacity:0"></span></span><md-select placeholder="{{\'Partner type\'}}" ng-model="partnerType" class="md-primary" md-on-close="onMaterialClose($event)" style="margin-left:10px"><md-option class="md-primary" ng-repeat="act in partnerTypeList" value="{{act.vendortype}}">{{act.vendortype}}</md-option></md-select><span flex=""></span><md-button class="md-primary partner-button-color" ng-click="onSavePartner()" ng-disabled="currentPartner.hasOwnProperty(\'deleted\')" ng-class="{\'contact-disable-save\':currentPartner.hasOwnProperty(\'deleted\')}">{{\'Save\'}}</md-button><md-menu style="padding-top:14px;"><md-button aria-label="" class="md-icon-button partner-button-color" ng-click="$mdOpenMenu()"><i class="fa fa-ellipsis-v"></i></md-button><md-menu-content width="4"><md-menu-item><md-button id="cmdSavePartner" class="partner-button-color" ng-click="onTrashOperationClick($event)" aria-label=""><div ng-if="currentPartner.hasOwnProperty(\'deleted\')"><i class="fa fa-trash-o"></i> <span>unTrash</span></div><div ng-if="!currentPartner.hasOwnProperty(\'deleted\')"><i class="fa fa-trash-o"></i> <span>Trash</span></div></md-button></md-menu-item></md-menu-content></md-menu></div><div flex="" layout="row"><div flex="" style="margin-right:10px"><md-input-container layout="row"><label>{{\'Name1\'}}</label> <input name="name1" required="" data-ng-model="partnerInfo.name1"><div ng-messages="partnerEntry.name1.$error"><span ng-message="required">{{\'This field is required\'}}</span></div></md-input-container><md-input-container layout="row"><label>{{\'Name2\'}}</label> <input name="name2" data-ng-model="partnerInfo.name2"></md-input-container><md-input-container><label>{{\'Street\'}}</label> <input name="street" data-ng-model="partnerInfo.street"></md-input-container><md-content layout="row"><md-input-container style="width:25%"><label>{{\'Zip\'}}</label> <input name="zip" data-ng-model="partnerInfo.zip"></md-input-container><md-input-container style="width:75%"><label>{{\'City\'}}</label> <input name="partnerCity" data-ng-model="partnerInfo.city"></md-input-container></md-content></div><div flex=""><md-input-container><label>{{\'Partner#\'}}</label> <input name="PartnerNo" data-ng-model="partnerInfo.no"></md-input-container><md-content layout="row"><md-input-container style="padding-bottom:0px;width:100%"><label>{{\'Url\'}}</label> <input name="url" data-ng-model="partnerInfo.url"></md-input-container><span class="partner-link-button" ng-if="isValidURL" ng-click="openPartnerInfo()"><i class="fa fa-external-link"></i></span></md-content><md-input-container><label>{{\'Country\'}}</label> <input name="country" data-ng-model="partnerInfo.country"></md-input-container><md-input-container><user-logo id="transactionLogo" style="margin-top:10px"></user-logo></md-input-container></div></div><div style="margin-top:7px"><label style="display:block;font-size: 12px;padding-bottom: 8px;">{{\'Remarks\'}}</label> <textarea name="remarks" data-ng-model="partnerInfo.remarks" style="height:120px !important;width:99%"></textarea></div></form></md-content></md-tab><md-tab id="tbPartner" label="{{\'Contacts\'}} ({{contactCounter}})" md-on-select="onContactTabSelected()" ng-if="(partnerInfo.id!=null)"><md-content class="md-padding-partner contact-ui-apply-scrollbar"><div layout="column"><div class="partner-contact-eclipses-Menu"></div><ul class="partner-contact-containter"><li data-ng-repeat="contact in partnerInfo.contacts"><div class="partner-contact-Row" layout="row" layout-align="start center" data-ng-mouseenter="onContactMouseHover()" data-ng-mouseleave="onContactMouseOut()"><div id="userSymbole" data-ng-style="onApplyOpacity(contact.isuser)"><div><i class="fa fa-user"></i></div></div><span flex="40" class="interactive-pointer" data-ng-click="onSelectforEdit($event,contact)">{{contact.firstname}}&nbsp;{{contact.lastname}}</span> <span flex="">{{contact.email}}</span> <span class="interactive-pointer" style="opacity: 0.61" data-ng-click="onSelectforEdit($event,contact)"><i class="fa fa-pencil"></i></span></div><div><span style="border: solid 1px rgba(0,0,0,0.24);border-radius: 2px" ng-if="contactInformations[contact.id] && currentContactId == contact.id" contact-information=""></span></div></li></ul></div></md-content></md-tab></md-tabs></md-content></div></div></md-dialog>'),e.put("app/test/test.html",'<br><br><br><br><br><br><br><form name="test.testForm" id="testForm"><input type="file" id="file" name="testFile" onchange="angular.element(this).scope().updateFileContents(this)"></form><div><div ng-if="!xlprocessing" ui-grid="gridOptions" class="grid"></div></div>'),e.put("app/components/flyingButton/dialog.html",""),e.put("app/components/flyingButton/flyingbutton.html",'<md-fab-speed-dial class="md-scale md-fab-bottom-right" style="position: fixed;" ng-click="flyB.openDialog($event, \'test1\')"><md-fab-trigger><md-button aria-label="menu" class="md-fab"><i class="material-icons fly-b-icon">add</i></md-button></md-fab-trigger></md-fab-speed-dial>'),e.put("app/components/footerbar/footerbar.html",'<md-toolbar layout="row" layout-align="center center" class="footer-bar footer" ng-if="!fm.hideFooter"><div layout="row" flex="" class="fill-height"><span class="footer-fix"><span ng-if="fm.state === \'changelog\'" ng-click="fm.navigateHome()">{{\'navbar.changelog\' | i18n | lowercase}}</span> <span ng-if="fm.state === \'accesskeyHome\' || fm.state === \'accesskeyDocument\'">{{fm.accessKeyUser.company || (\'common.company\'|i18n|lowercase)}} <span><i class="material-icons breadcrumb-footer">keyboard_arrow_right</i></span> {{fm.accessKeyUser.name || (\'common.name\'|i18n|lowercase)}}</span> <span ng-if="fm.state === \'search\'" ng-click="fm.navigateHome()">{{\'navbar.search\' | i18n | lowercase}} : "{{fm.params.searchPhrase}}"</span> <span ng-if="fm.state === \'home.collection\'" ng-click="fm.navigateUp()">{{fm.params.collectionLocale || fm.currentClass.locale}}</span> <span ng-if="fm.state === \'home.collection.customer\'" ng-click="fm.navigateUp()">{{fm.previousStateParams.collectionLocale || fm.currentClass.locale}}</span> <span ng-if="fm.state === \'home.collection.customer\' && (fm.params.collectionLocale || fm.currentCollection.locale)"><i class="material-icons breadcrumb-footer">keyboard_arrow_right</i></span> <span ng-if="fm.state === \'home.collection.customer\'" ng-click="fm.navigateUp()">{{fm.params.locale || fm.currentCollection.locale}}</span></span></div></md-toolbar>'),e.put("app/components/navbar/navbar.box.chat.html",'<div class="options-popup chat-box" ng-show="vm.displayChat"><div class="box-header">{{!vm.chatIncomingUser && !vm.currentRemotePartner ? \'Chat\' : \'\'}}<div class="chat-incoming-user chat-full-header" ng-if="vm.chatIncomingUser"><strong class="chat-fullname">{{vm.chatIncomingUser.name}}</strong> from <i>{{vm.chatIncomingUser.company}}</i></div><div class="chat-incoming-user" ng-if="vm.currentRemotePartner"><i class="mdi mdi-account" ng-class="vm.currentRemotePartner.online ? \'partner-online\' : \'partner-offline\'"></i> <span ng-if="vm.currentRemotePartner.fullname"><strong class="chat-fullname">{{vm.currentRemotePartner.fullname}}</strong> from</span><i>{{vm.currentRemotePartner.name}}</i></div><ul class="box-actions" ng-show="vm.accessKeyUser"><li ng-click="vm.togglePartners()"><a href="#"><i class="mdi mdi-account-multiple"></i></a></li></ul></div><div ng-show="vm.displayPartners" class="chat-partner-list"><div class="parnter" ng-repeat="partner in vm.partners"><div class="partner-item" ng-click="partner.online && vm.chatPartner(partner);"><i class="mdi mdi-account" ng-class="partner.online ? \'partner-online\' : \'partner-offline\'"></i> <span>{{partner.name}}</span><br><span ng-if="!partner.online" class="partner-lastseen">last seen: {{(partner.lastSeen| date: "dd.MM.yyyy hh:mm") || \'never\'}}</span></div></div></div><div class="chat-container"><div class="chat" style=""><div class="message" ng-class="message.me ? \'me\' : \'\'" ng-repeat="message in vm.chatMessages track by $index"><i class="mdi mdi-account chat-box-user-icon" ng-class="message.me ? \'chat-box-user-icon-me\' : \'\'" title="{{message.fromUserType == \'partner\' ? (message.fullname ? message.fullname : message.partnerName) : message.name}}"></i><div><p><span class="chat-message-username">{{message.fromUserType == \'partner\' ? (message.fullname ? message.fullname : message.partnerName) : message.name}}</span><br>{{message.text}}</p></div></div><div id="chat-bottom" style="height: 10px"></div></div></div><div class="clearfix"></div><div ng-show="vm.currentRemotePartner || vm.chatMessages.length!=0" class="box-footer" href=""><textarea placeholder="Type and use Ctrl+Enter or Send button" name="messageArea" ng-model="vm.currentMessage" ng-keydown="vm.handleCtrlEnter($event)"></textarea> <i class="mdi mdi-send chat-send-icon" ng-click="vm.sendMessage();" title="Send"></i></div></div>'),e.put("app/components/navbar/navbar.box.notifications.html",'<div class="options-popup notification-box" ng-show="vm.displayNotifications"><div class="box-header">{{\'Notifications\'}}<ul class="box-actions"><li><a href="#" ng-click="notificationService.clearNotifications($event)"><i class="mdi mdi-check-all"></i></a></li></ul></div><div class="box-body"><div class="box-item" ng-repeat="notification in notificationService.notifications"><div class="media"><div class="pull-left"><i class="mdi mdi-alert-box nav-notification-box-icon"></i></div><div class="media-body"><small class="box-small ng-binding">{{notification.entityName}} <a style="color:#444444;" href="{{notification.url}}">{{notification.title}}</a> {{notification.action}}, {{notification.header | date: "dd.MM.yyyy - hh:mm"}}</small> <small class="box-title ng-binding"></small></div></div></div></div><div class="clearfix"></div><a class="box-footer" href="">{{\'\'}}</a></div>'),e.put("app/components/navbar/navbar.box.options.html",'<div class="options-popup" ng-show="vm.displayOptions"><div style="text-align: center;padding:5px;"><i class="mdi mdi-checkbox-blank-circle" style="color: #310055;"></i> <i class="mdi mdi-checkbox-blank-circle" style="color: #212121;"></i> <i class="mdi mdi-checkbox-blank-circle" style="color: #727272;"></i></div><md-divider></md-divider><ul><li ng-click="$event.stopPropagation();fullScreen();vm.displayOptions = !vm.displayOptions"><span class="popup-icon"><i class="mdi" ng-class="isFullScreen ? \'mdi-fullscreen-exit\' : \'mdi-fullscreen\'"></i></span> {{!isFullScreen ? (\'navbar.fullscreen\'|i18n) : (\'navbar.regularscreen\'|i18n)}}</li><li ng-click="$event.stopPropagation();vm.changeState(vm.toggleMode.alterState, vm.toggleMode.thisState);vm.displayOptions = !vm.displayOptions"><span class="popup-icon"><i class="mdi" ng-class="vm.cardMode ? \'mdi-view-list\' : \'mdi-view-module\'"></i></span>&nbsp;{{vm.cardMode ? (\'navbar.list\'|i18n) : (\'navbar.card\'|i18n)}} {{\'navbar.mode\' | i18n}}</li><li ng-if="vm.state === \'home.collection\'" ng-click="$event.stopPropagation();vm.toggleEmptyCollectionFiltering();vm.displayOptions = !vm.displayOptions"><span class="popup-icon"><i class="mdi" ng-class="!showEmptyCollections ? \'mdi-numeric-0-box-outline\' : \'mdi-numeric-0-box\'"></i></span> {{!showEmptyCollections ? (\'navbar.emptysets\'|i18n) : (\'navbar.emptysetshid\'|i18n)}}</li></ul></div>'),e.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center" class="header md-primary" ng-if="!vm.hideHeader"><md-progress-linear ng-show="busy" md-mode="indeterminate"></md-progress-linear><i class="mdi mdi-menu hamburger" ng-click="vm.toggle()"></i> <span class="nav-mob-header" ng-click="vm.navigateHome()">{{vm.appConfig.appName}}</span> <span class="nav-back" ng-if="vm.state !== \'home\'"><span class="docs-menu-separator-icon" ng-click="vm.navigateUp()"><i class="material-icons">keyboard_arrow_left</i></span></span><div layout="row" flex="" class="fill-height breadcrumbs"><h2 class="md-toolbar-item md-breadcrumb md-headline"><span><span hide-sm="" hide-md="" ng-click="vm.navigateHome()">{{vm.appConfig.appName}}</span> <span class="docs-menu-separator-icon" hide-sm="" hide-md="" ng-if="vm.state !== \'home\'"><i class="material-icons">keyboard_arrow_right</i></span><span class="nav" ng-if="vm.state === \'accesskeyHome\' || vm.state === \'accesskeyDocument\'">{{vm.accessKeyUser.company || (\'common.company\'|i18n)}} <span class="docs-menu-separator-icon" hide-sm="" hide-md=""><i class="material-icons">keyboard_arrow_right</i></span> {{vm.accessKeyUser.name || (\'common.name\'|i18n)}}</span> <span class="nav" ng-if="vm.state === \'search\'" ng-click="vm.navigateHome()">{{\'navbar.search\' | i18n}}</span> <span ng-if="vm.state === \'search\'" class="docs-menu-separator-icon" hide-sm="" hide-md=""><i class="material-icons">keyboard_arrow_right</i></span> <span class="nav" ng-if="vm.state === \'search\'" ng-click="vm.toggleFilter()">{{vm.params.searchPhrase}}</span> <span class="nav" ng-if="vm.state === \'changelog\'" ng-click="vm.navigateHome()">{{\'navbar.changelog\' | i18n}}</span> <span class="nav" ng-if="vm.state === \'home.collection\' || vm.state === \'accesskeyCollection\'" ng-click="vm.navigateUp()">{{vm.params.collectionLocale || vm.currentClass.locale || documentsService.currentClass.locale}}</span> <span class="nav" ng-if="vm.state === \'home.collection.customer\' || vm.state === \'accesskeyDocumentFromCollection\'" ng-click="vm.navigateUp()">{{vm.previousStateParams.collectionLocale || vm.currentClass.locale || documentsService.currentClass.locale}}</span> <span class="docs-menu-separator-icon" hide-sm="" hide-md="" ng-if="(vm.state === \'home.collection.customer\' || vm.state === \'accesskeyDocumentFromCollection\') && (vm.params.collectionLocale || vm.currentCollection.locale || documentsService.currentCollection.locale)"><i class="material-icons">keyboard_arrow_right</i></span> <span class="nav" ng-if="(vm.state === \'home.collection.customer\' || vm.state === \'accesskeyDocumentFromCollection\') && (vm.params.locale || vm.currentCollection.locale)" ng-click="vm.navigateUp()">{{vm.params.locale || vm.currentCollection.locale || documentsService.currentCollection.locale}}</span></span></h2></div><i ng-show="dataChanged" class="mdi mdi-reload nav-reload" ng-click="$event.stopPropagation();vm.reloadData();"></i> <i class="mdi mdi-bell nav-notifications" ng-click="$event.stopPropagation();vm.displayNotifications = !vm.displayNotifications"><i ng-show="notificationService.notifications.length" class="nav-counts">{{notificationService.notifications.length}}</i></i> <i class="mdi mdi-comment nav-chat" ng-click="$event.stopPropagation();vm.displayChat = !vm.displayChat;vm.scrollToLastMessage();"><i ng-show="vm.chatMessages.length && !vm.displayChat" class="nav-counts">{{vm.chatMessages.length}}</i></i> <i class="mdi mdi-dots-vertical nav-options" ng-click="$event.stopPropagation();vm.displayOptions = !vm.displayOptions"></i> <i class="mdi mdi-magnify nav-filter" ng-click="vm.displayOptions = false;vm.toggleFilter()"></i> <i class="nav-home" ng-click="vm.navigateHome()"><img src="assets/images/365Header.png" style="width:40px"></i></md-toolbar><div class="options-backdrop" ng-show="vm.anyBoxIsShown()" ng-click="vm.hideBoxes();"></div><ng-include src="\'app/components/navbar/navbar.box.options.html\'"></ng-include><ng-include src="\'app/components/navbar/navbar.box.notifications.html\'"></ng-include><ng-include src="\'app/components/navbar/navbar.box.chat.html\'"></ng-include><br><md-sidenav class="md-sidenav-left md-whiteframe-z2 sidenav-pos" style="display: flex;flex-direction: column;" md-component-id="left"><md-toolbar layout="row" class="header" style="position:absolute;top:0;"><h2 class="md-toolbar-item md-headline"></h2></md-toolbar><md-content><nav class="menu"><ul><li ng-click="vm.closeMenu();vm.navigateHome();"><a><i class="material-icons">home</i> {{\'navbar.home\' | i18n}}</a></li><li ng-class="ci.group.value == vm.params.collectionId ? \'nav-menu-selected\' : \'\'" ng-click="vm.closeMenu();" ng-repeat="ci in vm.coreItems"><a ui-sref="home.collection({collectionId: ci.group.value, collectionLocale: ci.group.locale})"><i class="material-icons">keyboard_arrow_right</i>{{ci.group.locale}}</a></li><md-divider></md-divider><li ng-if="vm.coreItems" ng-click="vm.closeMenu();"><a ui-sref="changelog"><i class="material-icons">info_outline</i> {{\'navbar.about\' | i18n}}</a></li><li ng-if="vm.coreItems" ng-click="vm.logout();vm.closeMenu();"><a ui-sref="login"><i class="material-icons">exit_to_app</i> {{\'navbar.logout\' | i18n}}</a></li><li ng-if="!vm.coreItems && (vm.state == \'accesskeyDocument\' || vm.state == \'accesskeyHome\')" ng-click="vm.logout();vm.closeMenu();"><a ui-sref="login"><i class="material-icons">exit_to_app</i> {{\'navbar.logout\' | i18n}}</a></li></ul></nav></md-content></md-sidenav><md-sidenav class="md-sidenav-right md-whiteframe-z2 sidenav-pos" md-component-id="right"><md-toolbar class="md-theme-light"><div class="md-toolbar-tools"><h1>{{\'navbar.filter\' | i18n}}</h1><span flex=""></span><md-button class="md-icon-button sidenav-right-close" ng-click="closeFilter()"><i class="material-icons">close</i></md-button></div></md-toolbar><md-content layout-padding="" style="padding-top:72px;"><md-input-container flex="100"><label>{{\'navbar.search\' | i18n}}</label> <span><input type="search" autofocus="autofocus" name="search" data-ng-model="searchField" ng-keyup="search($event.keyCode);" md-autofocus=""></span></md-input-container><span ng-if="searchField"><md-button class="md-icon-button" ng-click="clearSearchField();"><i class="material-icons">close</i></md-button></span><form ng-if="filters"><ons-list ng-model="groupKey"><div ng-repeat="(k,v) in filters"><ons-list-item ng-click="toggleGroup(k)" class="title" ng-class="{active:isGroupShown(k)}"><ons-icon icon="caret-down" ng-if="isGroupShown(k)"></ons-icon><ons-icon icon="caret-right" ng-if="!isGroupShown(k)"></ons-icon>&nbsp;{{ v.group.locale }}<ons-icon class="filter-asterisk" icon="asterisk" ng-if="groupFilters[k]"></ons-icon></ons-list-item><ons-list-item class="item-accordion" ng-repeat="t in filters[k].title" ng-show="isGroupShown(k)"><label class="checkbox"><input ng-model="filterData.titleIds[k][t.id]" type="checkbox" name="titleId" ng-change="applyFilter();"><div class="checkbox__checkmark"></div><span class="ons-checkbox-inner">&nbsp;{{ t.locale || t.value }}</span></label></ons-list-item></div></ons-list></form></md-content></md-sidenav>'),e.put("app/components/navtabbar/navtabbar.html",'<div ng-if="!tb.hideHeader"><ons-tabbar style="position: fixed;top: 64px; height: 50px;z-index: 10" var="tabbar" position="top"><ons-tab persistent="" no-reload="" label="Core" icon="fa-home" ng-click="tb.goToCore()"></ons-tab><ons-tab persistent="" no-reload="" label="Related {{(currentClass.locale || documentsService.currentClass.locale) ? \'(\'+(currentClass.locale || documentsService.currentClass.locale)+\')\': \'\'}}" icon="fa-list" ng-click="tb.goToRelated(tb.collectionId)"></ons-tab><ons-tab persistent="" no-reload="" label="Documents {{(currentCollection.locale || documentsService.currentCollection.locale) ? \'(\'+(currentCollection.locale || documentsService.currentCollection.locale)+\')\': \'\'}}" icon="fa-list-alt" ng-click="tb.goToDocuments(tb.customerId)"></ons-tab></ons-tabbar></div>'),e.put("app/components/tremulaGrid/tremula.html",""),e.put("app/components/sidemenu/sidemenu.html",'<md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left"><md-toolbar class="md-theme-indigo"><h1 class="md-toolbar-tools">Sidenav Left</h1></md-toolbar><md-content layout-padding=""><md-button ng-click="close()" class="md-primary" hide-gt-md="">Close Sidenav Left</md-button><p hide-md="" show-gt-md="">This sidenav is locked open on your device. To go back to the default behavior, narrow your display.</p></md-content></md-sidenav>')}]);
//# sourceMappingURL=../maps/scripts/app-8ff3f555b0.js.map
