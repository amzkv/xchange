/******/!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var n=o(1),i=o(2),a=o(3),r=o(4),s=o(5),c=o(6),l=o(7),d=o(8),u=o(9),m=o(10),g=o(11),f=o(12),p=o(13),v=o(14),h=o(15),y=o(16),b=o(17),S=o(18),w=o(19),C=o(20),k=o(21),$=o(22),x=o(23),D=o(24),F=o(25),P=o(26),I=o(27),A=o(28),M=o(29),T=o(30),E=o(31),_=o(32),L=o(33),O=o(34),N=o(35),j=o(36),U=o(37),V=o(38),B=o(39),R=o(40);angular.module("xchange",["ngAnimate","ngTouch","ngCookies","ngSanitize","ngMessages","ngAria","ui.router","ngMaterial","onsen","toastr","infinite-scroll","indexedDB","ngFileSaver","pdf","ngLocalize","angular-inview","ng-currency","angularLazyImg","thatisuday.dropzone","ui.grid","ui.grid.importer"]).constant("CONSTANT",i.constant).value("langConf",j.langConf).config(n.config).config(a.routerConfig).config(r.indexedDBConfig).run(c.runBlock).service("StorageService",s.StorageService).service("documentsService",v.DocumentsService).service("ConfigService",w.ConfigService).service("LoginService",C.LoginService).service("CheckAuthService",k.CheckAuthService).service("LocalAccessService",$.LocalAccessService).service("ViewModeService",x.ViewModeService).controller("MainController",l.MainController).controller("LoginController",d.LoginController).controller("RegisterController",u.RegisterController).controller("ConfirmController",m.ConfirmController).controller("LocalAccessService",$.LocalAccessService).controller("CollectionController",g.CollectionController).controller("SearchController",b.SearchController).controller("CustomerController",p.CustomerController).controller("EditDocumentController",f.EditDocumentController).controller("ChangeLogController",h.ChangeLogController).controller("AccesskeyController",S.AccesskeyController).controller("TestController",y.TestController).directive("acmeNavbar",D.NavbarDirective).directive("footerBar",P.FooterbarDirective).directive("sideMenu",I.SidemenuDirective).directive("noScopeRepeat",A.NoScopeRepeatDirective).directive("validateEmail",_.ValidateEmail).directive("appTitle",L.AppTitle).directive("compareTo",O.CompareTo).directive("documentDataValidate",N.DocumentDataValidate).directive("flyingButton",F.FlyingButtonDirective).filter("truncate",M.TruncateFilter).filter("collectionFilter",T.CollectionFilter).service("SearchService",E.SearchService).provider("InfinicastWrapper",U.InfinicastWrapper).service("NotificationService",V.NotificationService).service("UploadService",B.UploadService).service("ViewerService",R.ViewerService)},function(e,t){"use strict";function o(e,t,o,n,i){"ngInject";i.setConfig({host:"https://ws.demo.infinicast.io",scope:"365xchange",role:"myRole",paths:[{name:"userCollection",pathType:i.pathTypes.userCollection,pathConfig:{type:"user",dataType:"collection"}}]}),e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-bottom-right",t.preventDuplicates=!1,t.progressBar=!0,o.definePalette("365xchangeViolet",{50:"ffffff",100:"ffffff",200:"ffffff",300:"4b0082",400:"431862",500:"310055",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),o.definePalette("365xchangeRed",{50:"ca5ba3",100:"ca3395",200:"960061",300:"960061",400:"701c53",500:"61003f",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),o.definePalette("365xchangeGreen",{50:"b8db62",100:"abdb37",200:"82b700",300:"82b700",400:"6b8922",500:"547700",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),o.definePalette("365xchangeYellow",{50:"e0dd65",100:"e0dc38",200:"c2bd00",300:"c2bd00",400:"918f24",500:"7e7b00",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),o.theme("default").primaryPalette("365xchangeViolet"),o.theme("365violet").primaryPalette("365xchangeViolet"),o.theme("365red").primaryPalette("365xchangeRed"),o.theme("365green").primaryPalette("365xchangeGreen"),o.theme("365yellow").primaryPalette("365xchangeYellow"),n.value("themeProvider",o),o.alwaysWatchTheme(!0)}o.$inject=["$logProvider","toastrConfig","$mdThemingProvider","$provide","InfinicastWrapperProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.config=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={ENV:"production",BASEURL_PROD:"365xchange.de",BASEURL_DEV:"stage.365xchange.net",API_ENTRY:"/api/",HTTP:"http://",HTTPS:"https://",VERSION:"0.2.2"};t.constant=o},function(e,t){"use strict";function o(e,t,o){"ngInject";e.state("home",{url:"/",parentState:null,templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main",data:{pageTitle:"365",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{categories:["documentsService",function(e){return e.callDocumentsCore()}]}}).state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"login",data:{pageTitle:"365 | Login",accessSettings:{"public":!0,accesskey:!1,customPerms:null}}}).state("register",{url:"/register",templateUrl:"app/register/register.html",controller:"RegisterController",controllerAs:"register",data:{pageTitle:"365 | Register",accessSettings:{"public":!0,accesskey:!1,customPerms:null}}}).state("confirm",{url:"/confirm",templateUrl:"app/confirm/confirm.html",controller:"ConfirmController",controllerAs:"confirm",params:{confirmCode:null,squash:!0},data:{pageTitle:"365 | Confirm Registration",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{info:["LoginService","$stateParams",function(e,t){return t.confirmCode?e.registerInformation(t.confirmCode):{}}]}}).state("changelog",{url:"/changelog",templateUrl:"app/changelog/changelog.html",controller:"ChangeLogController",controllerAs:"log",data:{pageTitle:"changelog",accessSettings:{"public":!1,accesskey:!1,customPerms:null}}}).state("search",{url:"/search/:searchPhrase",templateUrl:"app/search/search.html",controller:"SearchController",controllerAs:"search",data:{pageTitle:"365 | Search",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{core_docs:["documentsService","$stateParams",function(e,t){return e.searchDocumentsCore(t.searchPhrase)}],collections:["documentsService","$stateParams",function(e,t){return e.callDocumentRelated("Type")}],docs:["documentsService","$stateParams",function(e,t){return e.filter=null,e.callDocumentByOneCollection(2047)}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyHome",{url:"/ak/home/:accessKey",templateUrl:"app/accesskey/home.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Access Key User Home",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{docs:["storedAccessKey","documentsService","LocalAccessService","$stateParams",function(e,t,o,n){t.filter=null;var i=n.accessKey||(e?o.decryptCredentials(e):"");return t.callDocumentByAccessKey(i)}],storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("accesskeyDocument",{url:"/ak/document/:accessKey",templateUrl:"app/accesskey/accesskey.html",controller:"AccesskeyController",controllerAs:"accesskey",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Documents By Access Key",accessSettings:{"public":!0,accesskey:!0,customPerms:null}},resolve:{storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],docs:["storedAccessKey","LocalAccessService","documentsService","$stateParams",function(e,t,o,n){o.filter=null;var i=n.accessKey||(e?t.decryptCredentials(e):"");return o.callDocumentByAccessKey(i)}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}).state("collection",{url:"/:collectionId",parentState:"home",templateUrl:"app/collection/collection.html",controller:"CollectionController",controllerAs:"collection",params:{collectionLocale:null},data:{pageTitle:"365 | Collections",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{collection:["documentsService","$stateParams",function(e,t){return e.callDocumentRelated(t.collectionId)}]}}).state("customer",{url:"/:collectionId/:customerId",parentState:"collection",templateUrl:"app/customer/customer.html",controller:"CustomerController",controllerAs:"customer",params:{category:"CUSTOMER",collectionLocale:null,locale:""},data:{pageTitle:"365 | Documents",accessSettings:{"public":!1,accesskey:!1,customPerms:null}},resolve:{docs:["documentsService","$stateParams",function(e,t){return e.filter=null,e.callDocumentByOneCollection(t.customerId)}],storedAccessKey:["LocalAccessService",function(e){return e.getAccessKeyUserDataEncodedPromise()}],category:["$stateParams",function(e){return e.category}],locale:["$stateParams",function(e){return e.locale}],baseUrl:["ConfigService",function(e){return e.getBaseUrl()}]}}),o.html5Mode(!0),t.otherwise("/")}o.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.routerConfig=o},function(e,t){"use strict";function o(e){"ngInject";e.connection("iDB365_").upgradeDatabase(1,function(e,t,o){t.createObjectStore("user",{keyPath:"user_key"})}).upgradeDatabase(2,function(e,t,o){t.createObjectStore("core",{keyPath:"id"})}).upgradeDatabase(3,function(e,t,o){t.createObjectStore("collections",{keyPath:"id"})}).upgradeDatabase(4,function(e,t,o){t.createObjectStore("documents",{keyPath:"id"})}).upgradeDatabase(5,function(e,t,o){t.createObjectStore("document_detail",{keyPath:"id"})}).upgradeDatabase(6,function(e,t,o){t.createObjectStore("expiration",{keyPath:"key"})})}o.$inject=["$indexedDBProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.indexedDBConfig=o},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i,a,r){"ngInject";o(this,e),this.$http=t,this.$log=n,this.$window=i,this.$indexedDB=r,this.$q=a}return e.$inject=["$http","$log","$window","$q","$indexedDB"],n(e,[{key:"getAllRecords",value:function(e){if(e){var t=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.getAll().then(function(e){t.resolve(e)})}),t.promise}}},{key:"cleanSelectedRecords",value:function(e,t){if(e){var o=[],n=this;this.getAllRecords(e).then(function(i){angular.forEach(i,function(e){e[t.subSetName]&&angular.forEach(e[t.subSetName],function(n){n[t.innerIdName]==t.innerIdValue&&-1==o.indexOf(e.id)&&o.push(e.id)})}),o.length>0&&angular.forEach(o,function(t){n.deleteSingleRecord(e,t)})})}}},{key:"cleanSelectedRecordsByCollectionForUser",value:function(e,t,o){if(e){var n=[],i=this,a=function(t,o,n){var i=void 0;i="documents"==e?/^(\w+)_\d+_\d+\/(\d+)$/gim:/^([\/<all\/>|\w]+)\/(\d+)$/gim;var a=i.exec(n);return a&&a.length&&a[1]==t&&a[2]==o?!0:!1};this.getAllRecords(e).then(function(r){r.length&&r.filter(function(e){return a(t,o,e.id)&&n.push(e.id),!0}),n.length>0&&angular.forEach(n,function(t){i.deleteSingleRecord(e,t)})})}}},{key:"updateSelectedRecords",value:function(e,t){function o(e,t){return angular.forEach(t,function(o,n){e[n]&&(e[n]=t[n])}),e}if(e){var n=[],i=this;i.getAllRecords(e).then(function(a){angular.forEach(a,function(a){a[t.subSetName]&&angular.forEach(a[t.subSetName],function(r,s){if(r[t.innerIdName]==t.innerIdValue&&-1==n.indexOf(a.id)){var c=a;c[t.subSetName][s]=o(r,t.data),i.upsertRecord(e,c),n.push(a.id)}})})})}}},{key:"getSingleRecordPromise",value:function(e,t,o){if(e&&t){var n=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.find(t).then(function(e){var t=e.expireDate,i=o&&e[o]?e[o]:e;t&&(new Date).getTime()>=t?n.resolve(null):n.resolve(i)},function(e){n.resolve(null)})}),n.promise}}},{key:"upsertRecord",value:function(e,t){if(e&&t){var o=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.upsert(t).then(function(e){o.resolve(e)})}),o.promise}}},{key:"insertRecord",value:function(e,t){if(e&&t){var o=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.insert(t).then(function(e){o.resolve(e)})}),o.promise}}},{key:"clearStorage",value:function(e){if(e){var t=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e.clear().then(function(e){t.resolve(e)})}),t.promise}}},{key:"deleteSingleRecord",value:function(e,t){if(e&&t){var o=this.$q.defer();return this.$indexedDB.openStore(e,function(e){e["delete"](t).then(function(e){o.resolve(e)})}),o.promise}}}]),e}();t.StorageService=i},function(e,t){"use strict";function o(e,t,o,n,i,a){"ngInject";o.searchService=i;var r=o.$on("$stateChangeStart",function(n,i,a,s,c,l){o.title=i.data?i.data.pageTitle:a.locale||a.collectionLocale||"",n.preventDefault(),e.checkAuth().then(function(n){n?(o.infinicast&&(o.infinicast.isUserValid(!0)?o.infinicast.listen():e.getUser().then(function(e){o.infinicast.setUser(e),o.infinicast.listen()})),r(),t.go(i,a,l)):e.isStateAccessible(i,a)?(r(),t.go(i,a,l)):(r(),t.go("login"))})});o.$on("$locationChangeStart",function(){o.previousPage=location.pathname})}o.$inject=["CheckAuthService","$state","$rootScope","LocalAccessService","SearchService","InfinicastWrapper"],Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=o},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u){"ngInject";o(this,i),n.documentsService=s;var m=function(e,t,o){return u.dropzone=n.dzMethods.getDropzone(),u.localAcceptHandler(e,t)};n.dzOptions={url:"/",paramName:"files",maxFilesize:"30",addRemoveLinks:!0,dictInvalidFileType:"Invalid file",accept:m,dictDefaultMessage:'<span class="dz-drop-file"><strong>Drop file</strong> or click to upload</span>',previewTemplate:u.template},n.documentsService.searchFilter="",this.docs=e.data.collections,this.$q=l;var g=(this.$q.defer(),this);n.creatableClasses=[{value:"CUSTOMER",locale:"Kunden"},{value:"LEAD",locale:"Lead"},{value:"VENDOR",locale:"Lieferanten"},{value:"PROJECT",locale:"Projekt"}],this.filterClasses=function(e,t){t=t||g.docs;var o=[];return angular.forEach(e,function(e){var n=!1;angular.forEach(t,function(t){t.group.value==e.value&&(n=!0)}),n||o.push(e)}),o},n.applySearchFilter=function(){g.filteredDocs=d("filter")(g.docs,n.searchService.searchCriteria(s.searchFilter))},n.$watch("documentsService.searchFilter",function(e,t){""==e&&(n.filteredDocs=null),e!==t&&n.applySearchFilter()}),n.fbParams={},n.fbParams.creatableClasses=this.filterClasses(n.creatableClasses),n.toggleMode={thisState:r.getState(),alterState:r.getAlterState()},n.cardMode="Card"===(c.getUserSetting("viewMode")||r.getDefaultViewMode()),n.customerStateChangedListener=a.$on("customerStateChanged",function(e,t){n.toggleMode={thisState:t.thisState,alterState:t.alterState},n.cardMode="Card"===(c.getUserSetting("viewMode")||r.getDefaultViewMode())}),n.addListener=a.$on("CallAddMethod",function(e,t){n.addItem(e,t)}),n.checkNewCoreItem=function(e){var t=!0;return angular.forEach(g.docs,function(o,n){return o.group.value==e?void(t=!1):void 0}),t},n.addItem=function(e,t){var o=g.$q.defer();return t&&!function(){t.customErrors=[];var e=t.value;t.resultPromise=o.promise,s.callDocumentsCore(!0).then(function(i){if(i){g.docs=i.data.collections;var a=n.checkNewCoreItem(e);if(a){var r={value:e};t.resultPromise=s.callAddCoreItem(r),t.resultPromise.then(function(e){e&&s.callDocumentsCore(!0).then(function(t){t&&(g.docs=t.data.collections,o.resolve(e))})})}else t.customErrors.push({errorCode:"5001",location:"value",value:e}),o.resolve(null)}})}(),o.promise},n.$on("$destroy",function(){n.addListener(),n.customerStateChangedListener()})};n.$inject=["categories","themeProvider","$scope","$rootScope","ViewModeService","documentsService","LocalAccessService","$q","$filter","UploadService"],t.MainController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u){"ngInject";function m(){t.authenticateUser(g.userInfo).then(function(t){if("200"==t.data.response.errorcode)r.clearStorage("user"),n.accessKeyUser=null,n.setCredentails(g.userInfo),c.success(u("i18n")("user.loggedIn"),"Success"),a.setUser(t.data.user),l.infinicast&&(l.infinicast.setUser(t.data.user),l.infinicast.listen()),l.previousPage&&!l.loggedOut&&"/login"!=l.previousPage&&"/register"!=l.previousPage&&-1==l.previousPage.indexOf("/ak/")?d.path(l.previousPage):e.go("home");else{var o=u("i18n")("error.5009");c.error(o),s.login.loginForm.passWord.$error.server=o,s.login.loginForm.serviceErrorMessage=t.data.response.errormessage,s.login.loginForm.serviceErrorCode=t.data.response.errorcode}})}o(this,i),this.onClickForRegistration=function(){e.go("register")},this.onLogin=function(){this.loginForm.$valid&&m()};var g=this};n.$inject=["$state","LoginService","LocalAccessService","CheckAuthService","StorageService","$scope","toastr","$rootScope","$location","$filter"],t.LoginController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c){"ngInject";function l(o){t.registerUser(o.person).then(function(t){"200"==t.data.response.errorcode?(s.success("Thank You! Please, check your e-mail!","Success"),e.go("confirm")):s.error(t.data.response.errormessage,"Error")})}o(this,i),r.submitToServer=function(){if(this.registration.registrationForm.$valid)if(this.registration.person.iagreewith)l(this.registration);else{var e=c("i18n")("error.5010");s.error(e,"Error")}else{var e=c("i18n")("error.5004");s.error(e,"Error")}}};n.$inject=["$state","LoginService","LocalAccessService","CheckAuthService","$scope","toastr","$filter"],t.RegisterController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c){"ngInject";function l(e){t.registerInformation(e.confirmCode).then(function(t){"200"==t.response.errorcode?(e.eMailName=t.data.response.eMailName,d(e)):s.error(t.response.errormessage,"Error")})}function d(o){t.confirm(o).then(function(t){"200"==t.response.errorcode?(s.success("Thank You! Your account has been confirmed! You can log in now.","Success"),e.go("login")):s.error(t.response.errormessage,"Error")})}o(this,i),r.submitToServer=function(){if(this.registration.confirmForm.$valid)l(this.registration);else{var e=c("i18n")("error.5004");s.error(e,"Error")}}};n.$inject=["$state","LoginService","LocalAccessService","CheckAuthService","$scope","toastr","$filter"],t.ConfirmController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u,m,g){"ngInject";o(this,i);var f=function(e,t,o){return g.dropzone=r.dzMethods.getDropzone(),g.localAcceptHandler(e,t)};r.dzOptions={url:"/",paramName:"files",maxFilesize:"30",addRemoveLinks:!0,dictInvalidFileType:"Invalid file",accept:f,dictDefaultMessage:'<span class="dz-drop-file"><strong>Drop file</strong> or click to upload</span>',previewTemplate:g.template},r.documentsService=c,r.viewModeService=n,r.documentsService.searchFilter="",this.docs=e.data.collections,this.$q=d;var p=this.$q.defer();r.parentClass=l.collectionId;var v=this;r.params={},r.params.currentClass=e.data.collections.length?e.data.collections[0].group.locale:r.parentClass,r.toggleMode={thisState:n.getState(),alterState:n.getAlterState()},r.applySearchFilter=function(){v.filteredDocs=m("filter")(v.docs,r.searchService.searchCriteria(c.searchFilter,!r.viewModeService.showEmptyCollections))},r.$watch("documentsService.searchFilter",function(e,t){r.applySearchFilter()}),r.emptyCollectionFilter=function(){return function(e){return r.viewModeService.showEmptyCollections?!0:e.count>0}},r.$watch("viewModeService.showEmptyCollections",function(e,t){e!=t&&r.applySearchFilter()}),r.cardMode="Card"===(a.getUserSetting("viewMode")||n.getDefaultViewMode()),r.editTitle=function(e){e.stopPropagation(),e.preventDefault()},v.editDialog=function(e,t){u.show({clickOutsideToClose:!0,controller:["$mdDialog",function(e){if(t&&t.title){this.close=function(){e.cancel()},this.errorMessages={5001:"Collection already exists",5002:"Cannot add collection to given class"},this.errors=[];var o=this;o.value=t.title.value,o.locale=t.title.locale,this.submit=function(){this.errors=[],this.formErrors=[],o.editForm.$valid&&(o.editForm.resultPromise=r.editCollection({form:o.editForm,item:t}),o.editForm.resultPromise&&o.editForm.resultPromise.then(function(t){o.editForm.customErrors&&o.editForm.customErrors.length>0?!function(){var e=o.errorMessages;angular.forEach(o.editForm.customErrors,function(t,n){o.errors.push(e[t.errorCode]),o.formErrors.customError=e[t.errorCode]})}():e.hide()}))}}}],controllerAs:"dialog",templateUrl:"app/collection/editDialog.html",hasBackdrop:!1,targetEvent:e}),e.stopPropagation(),e.preventDefault()},r.customerStateChangedListener=s.$on("customerStateChanged",function(e,t){r.toggleMode={thisState:t.thisState,alterState:t.alterState},r.cardMode="Card"===(a.getUserSetting("viewMode")||n.getDefaultViewMode())}),r.addListener=s.$on("CallAddMethod",function(e,t){r.addItem(e,t)}),r.checkNewItem=function(e){var t=!0;return angular.forEach(v.docs,function(o,n){return o.title.value==e?void(t=!1):void 0}),t},r.addItem=function(e,t){return t&&!function(){t.resultPromise=!0,t.customErrors=[];var e=t.value.$modelValue;t.resultPromise=p.promise;var o=l.collectionId;t.resultPromise=c.callDocumentRelated(o,!0),t.resultPromise.then(function(n){if(n){v.docs=n.data.collections;var i=r.checkNewItem(e);if(i){var a=["Monat","NEW"];if(-1==a.indexOf(r.parentClass)){var s={value:e};c.callAddCollectionItem(o,s).then(function(e){e&&c.callDocumentRelated(o,!0).then(function(t){t&&(v.docs=t.data.collections,p.resolve(e))})})}else t.customErrors.push({errorCode:"5002",location:"value",value:e}),p.resolve(null)}else t.customErrors.push({errorCode:"5001",location:"value",value:e}),p.resolve(null)}})}(),p.promise},r.editCollection=function(e){p=v.$q.defer();var t=e.form,o=e.item;return t&&!function(){t.resultPromise=!0,t.customErrors=[];var e=t.value.$modelValue,n=t.locale.$modelValue;t.resultPromise=p.promise;var i=l.collectionId;t.resultPromise=c.callDocumentRelated(i,!0),t.resultPromise.then(function(a){if(a){v.docs=a.data.collections;var s=r.checkNewItem(e);if(s){var l=["Monat","Type","NEW","WORKFLOW"];if(-1==l.indexOf(r.parentClass)){var d={value:e,locale:n};c.callEditCollectionItem(i,d,o).then(function(e){e&&c.callDocumentRelated(i,!0).then(function(t){t&&(v.docs=t.data.collections,p.resolve(e))})})}else t.customErrors.push({errorCode:"5002",location:"value",value:e}),p.resolve(null)}else t.customErrors.push({errorCode:"5001",location:"value",value:e}),p.resolve(null)}})}(),p.promise},r.$on("$destroy",function(){r.addListener(),r.customerStateChangedListener()})};n.$inject=["collection","themeProvider","ViewModeService","LocalAccessService","$scope","$rootScope","documentsService","$stateParams","$q","$mdDialog","$filter","UploadService"],t.CollectionController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u,m,g,f,p,v,h,y,b){"ngInject";o(this,i);var S=this;l.pdfState={page:1},l.formChanged=!1,l.trustSrc=function(e){return t.trustAsResourceUrl(e)},l.createFilterFor=function(e){function t(e){return-1!==angular.lowercase(e.title.locale).indexOf(o)}var o=angular.lowercase(e),n=[];return angular.forEach(u.allCollections,function(e){t(e)&&n.push(e)}),n},m(function(){l.querySearch=function(e){return e?l.createFilterFor(e):l.typesavailable}},400),l.transformChip=function(e){return this.saveForm.collections.$dirty=!0,e},l.removeChip=function(e){this.saveForm.collections.$dirty=!0},l.populateData=function(t){if(t.data.document){var o=t.data;l.selectedItem={},l.searchText="",l.basepath=f.getBaseUrl()+"file",l.documentUrl=l.basepath+"/original/"+o.document.uuid,l.documentUrlLarge=l.basepath+"/large/"+o.document.uuid;var n=new Date(o.document.date),i=void 0;if(isNaN(Date.parse(n))){var a=/(\d{4})(\d{2})(\d{2})/;i=new Date(o.document.date.replace(a,"$1-$2-$3"))}else i=n;var c=new Date(o.document.created||o.document.date),d=o.document.updated;if(o.document.hasOwnProperty("types_available")){var m=o.document.types_available[0];l.userType=m.locale,l.typesavailable=o.document.types_available}l.typeList=o.document.collections,l.editForm=o.document,l.editForm.documentTitle=t.data.document.title,l.editForm.text=t.data.document.text,l.editForm.documentDate=i,l.editForm.currentDate=i,l.editForm.documentName=o.document.filename,l.editForm.createdDate=c,l.editForm.payDate=new Date,l.editForm.changedDate=new Date(d),l.editForm.workflow=t.data.document.workflow,l.editForm.workflowTips=t.data.document.workflowTips,l.editForm.userType=l.userType,l.editForm.typesavailable=l.typesavailable,l.editForm.typeList=o.document.collections,l.editForm.allCollections=u.allCollections||o.document.collections}else{var g=s("i18n")("error.5005");t.error&&(g=t.error),r.error(g,"Error")}l.editFormWatch&&l.editFormWatch(),l.editFormWatch=l.$watch("editForm",function(t,o){t&&t!=o&&(l.formChanged=!0,e.formChanged=!0)},!0)},u.callDocumentById(n,a).then(function(e){l.populateData(e)}),l.goTo=function(e,t){var o=v.hash();v.hash(t),h(),v.hash(o),e.stopPropagation(),e.preventDefault()},l.toggleSideMenu=function(){l.sideMenu=!l.sideMenu},l.hideDialog=function(){g.hide()},l.cancel=function(e){l.formChanged?l.showSaveConfirmation=!0:g.hide()},l.zoomIn=function(){p.$getByHandle("pdf-container").zoomIn()},l.zoomOut=function(){p.$getByHandle("pdf-container").zoomOut()},l.pagePrev=function(){l.getPdfCurrentPage()>1&&l.pdfGoToPage(l.getPdfCurrentPage()-1)},l.pageNext=function(){l.getPdfCurrentPage()<l.pdfTotalPages&&l.pdfGoToPage(l.getPdfCurrentPage()+1)},l.getPdfCurrentPage=function(){return p.$getByHandle("pdf-container").getCurrentPage()},l.pdfGoToPage=function(e){var t=+e;""!=e&&angular.isNumber(t)&&!isNaN(t)&&(t=t>l.pdfTotalPages?l.pdfTotalPages:t>0?t:1,p.$getByHandle("pdf-container").goToPage(t),l.pdfState={page:t})},l.unlockToggle=function(){l.unlockZoom=!l.unlockZoom},l.useSheet=function(e){l.xldataSheets[e]&&(l.xlsheetIndex=e,l.xldata=l.xldataSheets[e])},l.hasSheetByIndex=function(e){return l.xldataSheets[e]?!0:!1},l.applyXLIndex=function(e){l.xldataSheets[e]&&(l.xlprocessing=!0,l.xlsheetIndex=e,l.xldata=l.xldataSheets[e],l.gridOptions.columnDefs=[],l.gridApi.core.notifyDataChange(b.dataChange.COLUMN),l.gridOptions.data=l.xldata,l.xlsheet=l.xlsheetNames[e],l.xlprocessing=!1)},l.prevSheet=function(){if(0!=e){var e=l.xlsheetIndex-1;l.applyXLIndex(e)}},l.nextSheet=function(){var e=l.xlsheetIndex+1;l.applyXLIndex(e)},l.onViewFile=function(e){return e?l.showControls=!0:l.showControls=!1,!0},l.documentLoaded=!1,l.viewFile=function(e){function t(e){return e.length>4?e.indexOf(".pdf")===e.length-4:!1}function o(e){var t=[".png",".jpg",".jpeg",".gif"];return t.some(function(t,o){return e.length>t.length?e.indexOf(t)===e.length-t.length:!1})}function i(e){var t=[".txt",".log",".md",".readme"];return t.some(function(t,o){return e.length>t.length?e.indexOf(t)===e.length-t.length:!1})}function c(e){var t=[".xml",".report",".xl",".xls",".xlsx",".ods"];return t.some(function(t,o){return e.length>t.length?e.indexOf(t)===e.length-t.length:!1})}if(l.editForm&&!l.documentLoading&&!l.fileURL){l.documentLoading=!0;var d=null;l.editForm.hassignature>0&&(d="SIGNEDPDF");var m=l.editForm.filename;if(S.base64data&&S.base64file&&(m=S.base64file),t(m))if(m)l.documentLoading=!1,l.fileType="PDF",l.documentLoaded=!0;else{var g=s("i18n")("error.5005");r.error(g,"Error")}else if(o(m)){l.documentLoading=!0,l.fileType="IMG",l.fileURL="/";var f=document.getElementById("view_img");f.src=l.documentUrl,f.onload=function(){l.documentLoading=!1,l.documentLoaded=!0}}else i(m)?(l.fileType="TXT",u.callFileById(n,d,a).then(function(e){if(e&&e.data.file){var t=e.data.file.file;S.base64data&&S.base64file&&(t=S.base64data),t=atob(t),l.textData=t}}),l.fileURL="/",l.documentLoading=!1,l.documentLoaded=!0):c(m)?(l.fileType="XL",S.initXLViewer(),l.xlprocessing=!0,u.callFileById(n,d,a).then(function(e){if(e&&e.data.file){var t=e.data.file.file;S.base64data&&S.base64file&&(t=S.base64data),t=atob(t);var o=y.readXLdata(t),n={};o?(n=y.workbooktoJson(o),S.resetGrid(),l.xlsheetIndex=0,n.data&&n.data[l.xlsheetIndex]&&(l.xldata=n.data[l.xlsheetIndex],l.xlsheet=n.names[l.xlsheetIndex],l.xlsheetNames=n.names,l.xldataSheets=n.data,l.gridOptions.columnDefs=[],l.gridOptions.data=l.xldata,l.xlprocessing=!1)):console.log("error"),l.documentLoading=!1,l.documentLoaded=!0}},function(e){l.documentLoading=!1,l.documentLoaded=!0})):(l.fileStatus="Unsupported",l.documentLoading=!1,l.documentLoaded=!0)}},l.docDetailsSections={mainBlock:!0,dataBlock:!0,collectionsBlock:!0,infoBlock:!0,workflowBlock:!0},l.toggleItem=function(e){l.docDetailsSections[e]=!l.docDetailsSections[e]},l.focusControl=function(e){},l.toBase64=function(e){return btoa(e)},l.base64toBlob=function(e,t){t=t||"";for(var o=1024,n=atob(e),i=n.length,a=Math.ceil(i/o),r=new Array(a),s=0;a>s;++s){for(var c=s*o,l=Math.min(c+o,i),d=new Array(l-c),u=c,m=0;l>u;++m,++u)d[m]=n[u].charCodeAt(0);r[s]=new Uint8Array(d)}return new Blob(r,{type:t})},this.initXLViewer=function(){l.xldata=[],l.columnDefs=[],l.gridApi={},l.gridOptions={onRegisterApi:function(e){l.gridApi=e}}},this.resetGrid=function(){l.gridOptions.columnDefs=[]},l.getFile=function(e){if(l.xlprocessing=!0,e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){var o=t.result,n=y.readXLdata(o),i={};n&&(i=y.workbooktoJson(n)),S.resetGrid(),i.data&&i.data[0]&&l.$apply(function(){l.xldata=i.data[0],l.xlprocessing=!1})},t.readAsBinaryString(e.files[0])}},l.updateFileContents=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(o){S.base64data=btoa(t.result),S.base64file=e.files[0].name},t.readAsBinaryString(e.files[0])}},l.downloadDoc=function(e){l.showDLdBox=!1,!e&&l.editForm&&l.editForm.filetypes&&(e=l.editForm.filetypes.SIGNEDPDF||l.editForm.filetypes.ORIGINAL),u.callFileById(n,e,a).then(function(e){if(e&&e.data.file){var t=e.data.file.file,o=e.data.file.filename;if(t&&o){t=l.base64toBlob(t);var n=new Blob([t]);c.saveAs(n,o)}else{var i=s("i18n")("error.5007");r.error(i,"Error")}}else{var i=s("i18n")("error.5006");r.error(i,"Error")}})},l.toggleDownloadBox=function(){l.showDLdBox=!l.showDLdBox},l.updateCurrentDocumentList=function(t,o){function n(t,o,n,i,a){o[t]&&o[t]!=n[t]&&(a?e.docs[i][t]=o[t][a]:e.docs[i][t]=o[t]);
}angular.forEach(e.docs,function(e,i){e.id==t&&(n("title",o,e,i),n("date",o,e,i),n("type",o,e,i),n("text",o,e,i),n("netvaluegoods",o,e,i),n("totalamount",o,e,i),n("taxamount",o,e,i),n("collections",o,e,i))})},l.save=function(e){function t(e){var t=[];return angular.forEach(e,function(e){e.id&&t.push({id:e.id})}),t}var o=this.saveForm,i="change",c={},d={};if(e.authorized&&-1!==e.authorized.indexOf(i)&&o.$valid){if(o.title.$dirty&&o.title.$modelValue){var m=o.title.$modelValue;c.title=m}if(o.date&&o.date.$dirty&&o.date.$modelValue){var g=o.date.$modelValue,f=s("date")(g,"yyyy-MM-dd");c.date=f}if(o.type.$dirty&&o.type.$modelValue&&!function(){var t=o.type.$modelValue,n=t,i=e.types_available.filter(function(e){return e.value===t});i&&i[0]&&(n=i[0].locale),c.type={value:t},d.type={value:t,locale:n}}(),o.text.$dirty){var p=o.text.$modelValue;c.text=p}if(o.netvaluegoods.$dirty&&o.netvaluegoods.$modelValue){var v=o.netvaluegoods.$modelValue;c.netvaluegoods=v}if(o.totalamount.$dirty&&o.totalamount.$modelValue){var h=o.totalamount.$modelValue;c.totalamount=h}if(o.totaltax.$dirty&&o.totaltax.$modelValue){var y=o.totaltax.$modelValue;c.totaltax=y}if(o.collections.$dirty&&o.collections.$modelValue){var b=o.collections.$modelValue;c.collections=t(b),d.collections=o.collections.$modelValue}var S=u.callSaveDocumentById(n,c,a);S.then(function(e){if(e.data&&e.data.response&&"200"==e.data.response.errorcode){r.success("File has been updated successfully","Success"),u.callDocumentById(n,a,!0),l.populateData(e),l.formChanged=!1,l.saveForm.$setPristine(),l.saveForm.$setSubmitted();var t=angular.merge(c,d);l.updateCurrentDocumentList(n,t),u.updateRelatedDocumentCache("documents",n,t)}else{var o=s("i18n")("error.5007");r.error(o,"Error")}})}}};n.$inject=["thatScope","$sce","documentId","key","toastr","$filter","FileSaver","$scope","$rootScope","documentsService","$timeout","$mdDialog","ConfigService","pdfDelegate","$location","$anchorScroll","ViewerService","uiGridConstants"],t.EditDocumentController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u,m,g,f,p,v,h,y,b,S){"ngInject";o(this,i);var w=function(t,o,n){return S.dropzone=e.dzMethods.getDropzone(),S.localAcceptHandler(t,o)};e.dzOptions={url:"/",paramName:"files",maxFilesize:"30",addRemoveLinks:!0,dictInvalidFileType:"Invalid file",accept:w,dictDefaultMessage:'<span class="dz-drop-file"><strong>Drop file</strong> or click to upload</span>',previewTemplate:S.template},e.shownGroup=0,e.mdClosing=!1,e.documentsService=d,e.documentsService.searchFilter="",e.category=c.collectionId,e.locale=r,e.docs=t.data.documents||t.data.collections,e.docsError=t.error,g.filters=t.data.avail_filter,e.totalDocCount=t.data.control?t.data.control.total_documents:0,e.accessKey=e.accessKey||c.accessKey,e.accessKey&&t.data&&t.data.accesskey_user&&(u.accessKeyUser=t.data.accesskey_user),d.startValue=m.getDocumentStartValue(),d.endValue=m.getDocumentOffsetValue(),e.totalDocCount<d.endValue&&(d.endValue=e.totalDocCount),e.pageSize=d.endValue,e.cacheStart=t.start,e.baseUrl=s,e.applySearchFilter=function(){e.filteredDocs=v("filter")(e.docs,e.searchService.searchCriteria(d.searchFilter))},e.$watch("documentsService.searchFilter",function(t,o){""==t&&(e.filteredDocs=null),t!==o&&e.applySearchFilter()}),e.excludeCollections=["Monat","NEW","INBOX","Type","WORKFLOW"],e.toggleMode={thisState:l.getState(),alterState:l.getAlterState()},e.cardMode="Card"===(u.getUserSetting("viewMode")||l.getDefaultViewMode()),e.customerStateChangedListener=g.$on("customerStateChanged",function(t,o){e.toggleMode={thisState:o.thisState,alterState:o.alterState},e.cardMode="Card"===(u.getUserSetting("viewMode")||l.getDefaultViewMode())}),e.showDetails=function(e){e.details=e.details?!1:!0,e.baseUrl=s},e.addMoreItems=function(t){e.docs=e.docs.concat(t)},e.$watch("documentsService.filter",function(e,t,o){if(e&&e!=t&&(d.filterCustomerId||d.filterAccessKey)){var n=void 0;d.filterCustomerId&&(n=d.callDocumentByOneCollection(d.filterCustomerId)),d.filterAccessKey&&(n=d.callDocumentByAccessKey(d.filterAccessKey)),n.then(function(e){e.data.response.success&&(o.docs=e.data.documents,e.data.control&&e.data.control.filtered_documents?o.totalDocCount=e.data.control.filtered_documents:o.totalDocCount=e.data.control?e.data.control.total_documents:0,o.totalDocCount<d.endValue&&(d.endValue=o.totalDocCount))})}}),e.more=function(){if(!d.busy){var o=d.startValue,n=d.endValue,i=d.offset;if(e.totalDocCount>d.endValue){o=d.endValue+1,n+=i,n=n>e.totalDocCount?e.totalDocCount:n;var a;a=e.accessKey?d.callDocumentByAccessKey(e.accessKey,o,n):d.callDocumentByOneCollection(c.customerId,o,n),a.then(function(o){if(o.data.response&&o.data.response.success){var n=o.data.documents||o.data.collections;e.addMoreItems(n),d.searchFilter&&e.applySearchFilter(),o.data.control&&o.data.control.filtered_documents?e.totalDocCount=o.data.control.filtered_documents:e.totalDocCount=o.data.control?o.data.control.total_documents:0,e.totalDocCount<d.endValue&&(d.endValue=e.totalDocCount)}else o.data.control&&(e.addMoreItems(o.data.collections),e.totalDocCount=t.data.control?t.data.control.total_documents:0)})}}},e.$on("$destroy",function(){e.customerStateChangedListener()}),e.editForm={},e.editDocument=function(t,o){var n=null;c.accessKey&&(n=c.accessKey),t.stopPropagation(),e.etc=function(){return!e.formChanged};var i=e;f.show({controller:"EditDocumentController",templateUrl:"app/customer/edit.html",preserveScope:!0,parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,locals:{thatScope:i,documentId:o,key:n},hasBackdrop:!0,onRemoving:function(t,o){e.mdClosing=!0,thatScope.mdClosing=!0},transformTemplate:function(e){return'<div class="md-dialog-container edit-doc">'+e+"</div>"}}).then(function(){},function(){})}};n.$inject=["$scope","docs","storedAccessKey","category","locale","baseUrl","$stateParams","ViewModeService","documentsService","LocalAccessService","ConfigService","$rootScope","$mdDialog","$mdSidenav","$filter","FileSaver","Blob","toastr","UploadService"],t.CustomerController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i,a,r,s,c,l){"ngInject";o(this,e),this.$http=t,this.$log=n,this.$q=l,this.$window=c,this.configService=i,this.initPagerValues(),this.localAccessService=a,this.storageService=s,this.CheckAuthService=r}return e.$inject=["$http","$log","ConfigService","LocalAccessService","CheckAuthService","StorageService","$window","$q"],n(e,[{key:"initPagerValues",value:function(){this.configService=this.configService||ConfigService,this.startValue=this.configService.getDocumentStartValue(),this.offset=this.configService.getDocumentOffsetValue(),this.endValue=this.offset,this.busy=!1}},{key:"getBasePath",value:function(e){var t=e?e:"document";return this.configService.getBaseUrl()+t}},{key:"getPageIdHashByValueAndRange",value:function(e,t,o){return e+"_"+t+"_"+o}},{key:"getUserCacheId",value:function(e){return e+"/"+this.CheckAuthService.userid}},{key:"baseAuthCall",value:function(e,t,o,n){var i=this,a=this.$q.defer(),r=e.auth?e.auth.accesskey:null;return r?i.baseCall(e,t,o,n):i.CheckAuthService.userid?i.baseCall(e,t,o,n):(i.CheckAuthService.getUser().then(function(r){i.CheckAuthService.userid=r.userid,r&&r.userid?a.resolve(i.baseCall(e,t,o,n)):(console.log("what?"),a.resolve(null))}),a.promise)}},{key:"dataPromise",value:function(e,t,o,n){var i=this,a=i.localAccessService.getCredentails();return a.then(function(a){if(a||t.auth){var r={contentType:"application/json",datatype:"json"};a&&!t.auth&&(a=i.localAccessService.decryptCredentials(a),r.auth={user:{username:a.userId,password:a.passWord}});var s=angular.merge(r,t),c=i.$http.post(i.getBasePath(o.apiName),s);c.then(function(t){if(i[o.itemKey]=t.data[o.dataKey],i.busy=!1,o.dataKey&&t.data[o.dataKey])e.resolve(t);else{var n={data:{}};t.data.response&&!t.data.response.success&&(n.error=t.data.response.errormessage),e.resolve(n)}}),o.cacheName&&(n||(n=o.cacheName),o.start&&o.end&&(n=i.getPageIdHashByValueAndRange(n,o.start,o.end)),o.useAllData?i.setCache(c,o.cacheName,n,o.dataKey,!0):i.setCache(c,o.cacheName,n,o.dataKey))}}),e}},{key:"baseCall",value:function(e,t,o,n){var i=this;this.busy=!0;var a=this.$q.defer();if(e.document&&(this.filter&&(e.document.filter=this.filter),t.start&&t.end&&(this.startValue=t.start?t.start:this.configService.getDocumentStartValue(),this.endValue=t.end?t.end:this.configService.getDocumentOffsetValue(),e.document.offset={start:this.startValue,end:this.endValue})),t.itemKey&&(this[t.itemKey]=null),t.cacheName&&!n&&!t.set){o||(o=t.cacheName);var r=void 0;if(t.start&&t.end){var s=i.getPageIdHashByValueAndRange(o,i.startValue,i.endValue);r=this.getCache(t.cacheName,s)}else r=this.getCache(t.cacheName,o,t.dataKey);return r.then(function(n){i.busy=!1;var r={data:{}};t.useAllData?r.data=n:r.data[t.dataKey]=n,r.data&&r.data[t.dataKey]&&(r.data[t.dataKey].length||angular.isObject(r.data[t.dataKey]))?a.resolve(r):a=i.dataPromise(a,e,t,o)}),a.promise}return a=i.dataPromise(a,e,t,o),a.promise}},{key:"callDocumentsCore",value:function(e){e=e||!1;var t={collection:{method:"core"}},o={cacheName:"core",itemKey:"coreItems",dataKey:"collections"};return this.baseAuthCall(t,o,null,e)}},{key:"callAddCoreItem",value:function(e){var t={collection:{method:"add core",data:e}},o={set:!0,dataKey:"collections"};return this.baseAuthCall(t,o,null,!0)}},{key:"searchDocumentsCore",value:function(e){var t={collection:{method:"by name",name:e}},o={itemKey:"searchCoreItems",dataKey:"collections"};return this.baseAuthCall(t,o)}},{key:"callDocumentRelated",value:function(e,t){t=t||!1;var o={collection:{method:"related by ID",group:{value:e}}},n={cacheName:"collections",itemKey:"collectionItems",dataKey:"collections"};return this.baseAuthCall(o,n,e,t)}},{key:"callDocumentAllCollections",value:function(e,t){t=t||!1,e=e||"<all>";var o={collection:{method:"all"}},n={fillBy:"value",cacheName:"collections",itemKey:"collectionItems",dataKey:"collections"};return this.baseAuthCall(o,n,e,t)}},{key:"callAddCollectionItem",value:function(e,t){var o={collection:{method:"add collection",group:{value:e},data:t}},n={set:!0,dataKey:"collections"};return this.baseAuthCall(o,n,null,!0)}},{key:"callEditCollectionItem",value:function(e,t,o){var n={collection:{method:"edit collection",group:{value:e,oldValue:o.title.value},data:t}},i={set:!0,dataKey:"collections"};return this.baseAuthCall(n,i,null,!0)}},{key:"callDocumentByOneCollection",value:function(e,t,o,n){var i={document:{method:"by collection",collection:e}};this.filter&&this.filter.length&&(n=!0),t=t?t:this.configService.getDocumentStartValue(),o=o?o:this.configService.getDocumentOffsetValue();var a={cacheName:"documents",itemKey:"documentsItems",dataKey:"documents",useAllData:!0,start:t,end:o};return this.baseAuthCall(i,a,e,n)}},{key:"callDocumentByAccessKey",value:function(e,t,o,n){var i={auth:{accesskey:{longkey:e}},document:{method:"by accesskey"}};this.filter&&this.filter.length&&(n=!0),t=t?t:this.configService.getDocumentStartValue(),o=o?o:this.configService.getDocumentOffsetValue();var a={apiName:"accesskey",cacheName:"documents",itemKey:"documentsItems",dataKey:"documents",useAllData:!0,start:t,end:o};return this.baseCall(i,a,e,n)}},{key:"callDocumentById",value:function(e,t,o){o=o||!1;var n={document:{method:"by ID",id:e}};t&&(n.auth={accesskey:{longkey:t}});var i={cacheName:"document_detail",itemKey:"documentItem",dataKey:"document"};return this.baseAuthCall(n,i,e,o)}},{key:"callUploadFile",value:function(e,t){var o=t.type?t.type:"LETTERBOX",n={document:{method:"new123",fileName:t.name,file:e},activity:{type:o}},i={itemKey:"documentItem",dataKey:"document"};return this.baseAuthCall(n,i,null,!0)}},{key:"callSaveDocumentById",value:function(e,t){var o={document:{method:"change",id:e}};t&&(t.persist&&(o.document.persist=t.persist),t.no&&(o.document.no=t.no),t.title&&(o.document.title=t.title),t.type&&t.type.value&&(o.document.type=t.type),t.date&&(o.document.date=t.date),angular.isDefined(t.text)&&(o.document.text=t.text),t.netvaluegoods&&(o.document.netvaluegoods=t.netvaluegoods),t.totalamount&&(o.document.totalamount=t.totalamount),t.totaltax&&(o.document.totaltax=t.totaltax),t.payment_days&&(o.document.payment_days=t.payment_days),t.payment_date&&(o.document.payment_date=t.payment_date),t.discount_factor&&(o.document.discount_factor=t.discount_factor),t.post_date&&(o.document.post_date=t.post_date),t.deleted&&(o.document.deleted=t.deleted),t.collections&&angular.isArray(t.collections)&&(o.document.collections=t.collections),t.workflow&&(o.document.workflow=t.workflow));var n={itemKey:"documentItem",dataKey:"document"};return this.baseAuthCall(o,n,e,!0)}},{key:"cleanupRelatedLists",value:function(e,t){var o={subSetName:"documents",innerIdName:"id",innerIdValue:t};this.storageService.cleanSelectedRecords(e,o)}},{key:"updateRelatedDocumentCache",value:function(e,t,o){var n={subSetName:"documents",innerIdName:"id",innerIdValue:t,data:o};this.storageService.updateSelectedRecords(e,n)}},{key:"searchDocument",value:function(e,t,o,n){var i={document:{method:"by collection",search:e}};t=t?t:this.configService.getDocumentStartValue(),o=o?o:this.configService.getDocumentOffsetValue();var a={itemKey:"documentsItems",dataKey:"documents",useAllData:!0,start:t,end:o};return this.baseAuthCall(i,a,e,!0)}},{key:"callFileById",value:function(e,t,o){t=t||"ORIGINAL";var n={file:{method:"file by ID",id:e,filetype:t}};o&&(n.auth={accesskey:{longkey:o}});var i={itemKey:"fileItems",dataKey:"file",useAllData:!0};return this.baseAuthCall(n,i,e,!0)}},{key:"setCache",value:function(e,t,o,n,i){if(!this.filter||!this.filter.length){var a=this;a.CheckAuthService.userid&&(o=this.getUserCacheId(o)),e.then(function(e){var r=e.data[n];if(r)if(o){var s=a.configService.getCacheExpirationPeriod(),c=(new Date).getTime()+s,l={id:o,expireDate:c};i?l=angular.merge(l,e.data):l[n]=r,a.storageService.upsertRecord(t,l)}else;})}}},{key:"getCache",value:function(e,t,o){return t?(this.CheckAuthService.userid&&(t=this.getUserCacheId(t)),this.storageService.getSingleRecordPromise(e,t,o)):this.storageService.getAllRecords(e)}},{key:"storeCache",value:function(e,t){var o={};if(t.data&&t.data.collections&&angular.forEach(t.data.collections,function(e,t){e.id&&e.title?o[e.id]=e.title:e.group&&e.group.value&&(o[e.group.value]=e.group)}),Object.keys(o).length)try{var n=JSON.parse(this.$window.localStorage.getItem(e));o=angular.extend(o,n),this.$window.localStorage.setItem(e,JSON.stringify(o))}catch(i){}}},{key:"clearCache",value:function(){this.dataCache=null}}]),e}();t.DocumentsService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r){"ngInject";o(this,i),this.localAccesService=n,this.documentsService=a;var s=this;e.clearLocalData=function(){s.localAccesService.clearLocalData(),t.loggedOut=!0,s.documentsService.allCollections=null,r.go("login")}};n.$inject=["$scope","$rootScope","LocalAccessService","documentsService","$state"],t.ChangeLogController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n){"ngInject";o(this,i);var a=this;this.submitForm=function(e){};this.initXLViewer=function(){e.xldata=[],e.columnDefs=[],e.gridApi={},e.gridOptions={columnDefs:e.columnDefs,data:"xldata",onRegisterApi:function(t){e.gridApi=t}}},this.initXLViewer(),this.resetGrid=function(){e.$apply(function(){e.gridOptions.columnDefs=[]})},e.getFile=function(t){if(e.xlprocessing=!0,t.files&&t.files[0]){var o=new FileReader;o.onload=function(t){var i=o.result,r=n.readXLdata(i),s={};r&&(s=n.workbooktoJson(r)),a.resetGrid(),s.data&&s.data[0]&&e.$apply(function(){e.xldata=s.data[0],e.xlprocessing=!1})},o.readAsBinaryString(t.files[0])}}};n.$inject=["$scope","$timeout","ViewerService"],t.TestController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u,m){"ngInject";o(this,i),this.coreDocs=t.data.collections,this.collections=n.data.collections,e.docs=a.data.documents,e.toggleMode={thisState:c.getState(),alterState:c.getAlterState()},e.cardMode="Card"===e.toggleMode.thisState,u.$on("customerStateChanged",function(t,o){e.toggleMode={thisState:o.thisState,alterState:o.alterState},e.cardMode="Card"===e.toggleMode.thisState})};n.$inject=["$scope","core_docs","collections","docs","baseUrl","$stateParams","ViewModeService","documentsService","ConfigService","$rootScope","$mdSidenav"],t.SearchController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t,n,a,r,s,c,l,d,u,m,g,f,p,v,h){"ngInject";o(this,i),e.accessKey=n?h.decryptCredentials(n):null,v("CustomerController",{$scope:e,storedAccessKey:n,docs:t,category:a,locale:r,baseUrl:s,$stateParams:c,ViewModeService:l,documentsService:d,ConfigService:u,$rootScope:m,$mdDialog:g,$mdSidenav:f,$filter:p})};n.$inject=["$scope","docs","storedAccessKey","category","locale","baseUrl","$stateParams","ViewModeService","documentsService","ConfigService","$rootScope","$mdDialog","$mdSidenav","$filter","$controller","LocalAccessService"],t.AccesskeyController=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i,a){"ngInject";o(this,e),this.$http=t,this.$log=n,this.$q=i,this.constant=a}return e.$inject=["$http","$log","$q","CONSTANT"],n(e,[{key:"getProtocol",value:function(){var e="development"===this.constant.ENV?this.constant.HTTP:this.constant.HTTPS;return e}},{key:"getBaseUrl",value:function(){var e="development"===this.constant.ENV?this.constant.BASEURL_DEV+this.constant.API_ENTRY:this.constant.BASEURL_PROD+this.constant.API_ENTRY;return this.getProtocol(this.constant.ENV)+e}},{key:"userServiceURL",value:function(){return this.getBaseUrl()+"user"}},{key:"accountServiceURL",value:function(){return this.getBaseUrl()+"account"}},{key:"documentServiceURL",value:function(){return this.getBaseUrl()+"document"}},{key:"partnerServiceURL",value:function(){return this.getBaseUrl()+"partner"}},{key:"appName",value:function(){return"365"}},{key:"getDocumentStartValue",value:function(){return 1}},{key:"getDocumentOffsetValue",value:function(){return 25}},{key:"getCacheExpirationPeriod",value:function(){return 12e5}}]),e}();t.ConfigService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i,a){"ngInject";o(this,e),this.$http=t,this.$log=n,this.$q=i,this.ConfigService=a}return e.$inject=["$http","$log","$q","ConfigService"],n(e,[{key:"getLoginModel",value:function(){return{userId:"",passWord:""}}},{key:"getRegistrationModel",value:function(){return{firstName:"",lastName:"",companyName:"",eMailName:"",passWord:"",confirmPassWord:"",iagreewith:!1}}},{key:"getForgetPasswordModel",value:function(){return{email:""}}},{key:"authenticateUser",value:function(e){var t=this.$q.defer(),o={auth:{user:{username:e.userId,password:e.passWord}},user:{method:"by id"}};return o=JSON.stringify(o),this.$http.post(this.ConfigService.userServiceURL(),o).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)})}},{key:"registerUser",value:function(e){var t=this.$q.defer(),o={account:{method:"register",name:e.companyName,firstname:e.firstName,lastname:e.lastName,email:e.eMailName,password:e.passWord,channelcode:"7b3112b0"}};return o=JSON.stringify(o),this.$http.post(this.ConfigService.accountServiceURL(),o).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)})}},{key:"registerInformation",value:function(e){var t=this.$q.defer(),o={account:{method:"register info",confirmcode:e}};return o=JSON.stringify(o),this.$http.post(this.ConfigService.accountServiceURL(),o).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"confirm",value:function(e){var t=this.$q.defer(),o={account:{method:"confirm",email:e.eMailName,confirmcode:e.confirmCode}};return o=JSON.stringify(o),this.$http.post(this.ConfigService.accountServiceURL(),o).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();t.LoginService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i,a,r,s,c,l){"ngInject";o(this,e),this.$http=t,this.$log=n,this.$window=i,this.$indexedDB=a,this.$q=r,this.storageService=s,this.localAccess=c,this.cookies=l,this.userTypes={ru:"Regular User",ak:"Access Key User"}}return e.$inject=["$http","$log","$window","$indexedDB","$q","StorageService","LocalAccessService","$cookies"],n(e,[{key:"checkAuth",value:function(){return this.storageService.getSingleRecordPromise("user","info","data")}},{key:"isStateAccessible",value:function(e,t){if(e.data&&e.data.accessSettings){if(e.data.accessSettings.customPerms,e.data.accessSettings.accesskey)return this.userType="ak",t.accessKey&&(this.accessKey=t.accessKey,this.localAccess.setAccessKeyUserData(this.accessKey)),this.accessKey?!0:!0;if(e.data.accessSettings["public"])return!0;this.userType="ru"}}},{key:"setUser",value:function(e){if(this.userid=e.userid,e.locale){this.localAccess.setUserSetting("locale",e.locale.value);var t=JSON.stringify(e.locale.value);this.cookies.put("COOKIE_LOCALE_LANG",t)}return this.storageService.upsertRecord("user",{user_key:"user",user:e})}},{key:"getUser",value:function(){var e=this.$q.defer();return this.$indexedDB.openStore("user",function(t){t.find("user").then(function(t){e.resolve(t.user)})}),e.promise}}]),e}();t.CheckAuthService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i,a,r,s){"ngInject";o(this,e),this.$http=t,this.$log=n,this.$window=i,this.$indexedDB=r,this.storageService=s,this.$q=a}return e.$inject=["$http","$log","$window","$q","$indexedDB","StorageService"],n(e,[{key:"checkCredentails",value:function(){return null==localStorage.getItem("userinfo")?!1:!0}},{key:"getCKey",value:function(){return"xC3r6y5ptK"}},{key:"encryptCredentials",value:function(e){return CryptoJS.AES.encrypt(JSON.stringify(e),this.getCKey()).toString()}},{key:"decryptCredentials",value:function(e){var t=CryptoJS.AES.decrypt(e,this.getCKey()).toString(CryptoJS.enc.Latin1);return JSON.parse(t)}},{key:"getCredentails",value:function(){return this.storageService.getSingleRecordPromise("user","info","data")}},{key:"setCredentails",value:function(e){var t=this.encryptCredentials(e);this.storageService.upsertRecord("user",{user_key:"info",data:t})}},{key:"removeCredentails",value:function(){this.$window.localStorage.removeItem("userinfo"),this.$window.localStorage.removeItem("user"),this.storageService.clearStorage("user")}},{key:"setAccessKeyUserData",value:function(e){var t=this.encryptCredentials(e);this.storageService.upsertRecord("user",{user_key:"accesskey",data:t})}},{key:"getAccessKeyUserDataEncodedPromise",value:function(){return this.storageService.getSingleRecordPromise("user","accesskey","data")}},{key:"clearLocalData",value:function(){this.$window.localStorage.clear(),this.storageService.clearStorage("user"),this.storageService.clearStorage("core"),this.storageService.clearStorage("collections"),this.storageService.clearStorage("documents"),this.storageService.clearStorage("document_detail"),this.storageService.clearStorage("document_detail")}},{key:"setViewSettings",value:function(e){this.$window.localStorage.setItem("viewSetting",e)}},{key:"getViewSettings",value:function(){return this.$window.localStorage.getItem("viewSetting")}},{key:"setUserSetting",value:function(e,t,o){try{var n=JSON.parse(this.$window.localStorage.getItem("settings"))||{};if(o&&n[e])return!1;n[e]=t;var i=JSON.stringify(n);return this.$window.localStorage.setItem("settings",i),!0}catch(a){return console.log("failed to save settings: ",a),!1}}},{key:"getUserSetting",value:function(e){try{var t=JSON.parse(this.$window.localStorage.getItem("settings"))||{};if(t[e])return t[e]}catch(o){}}}]),e}();t.LocalAccessService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n){"ngInject";o(this,e),this.$log=t,this.$rootScope=n,this.viewMode="Card",this.alternateViewMode="List"}return e.$inject=["$log","$rootScope"],n(e,[{key:"getState",value:function(){return this.viewMode}},{key:"getAlterState",value:function(){return this.alternateViewMode}},{key:"setState",value:function(e,t){return this.viewMode=e,this.alternateViewMode=t,this.$rootScope.$broadcast("customerStateChanged",{thisState:e,alterState:t})}},{key:"setAlterState",value:function(e){return this.alternateViewMode=e}},{key:"getDefaultViewMode",value:function(){return window.innerWidth>860?"Card":"List"}}]),e}();t.ViewModeService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){"ngInject";var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:i,controllerAs:"vm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.NavbarDirective=n;var i=function a(e,t,n,i,r,s,c,l,d,u,m,g,f,p){"ngInject";function v(e,o,n,i,a){h.state=e,h.previousState=o,h.previousStateParams=n,i&&(h.parentState=i),a&&(h.params=a),"customer"==h.state||"accesskeyDocument"==h.state?(s.groupFilters=[],s.filterData={},s.shownGroup=null,s.filters=t.filters):s.filters=null,c.allCollections&&(h.populateCurrentClass(),h.populateCurrentCollection())}o(this,a),this.constant=u,this.displayOptions=!1,this.version=this.constant.VERSION,this.hideHeader=!0,this.storageCache={},s.groupFilters=[],s.filterData={},s.documentsService=c,s.notificationService=g,s.localAccessService=r,s.busy=c.busy,s.dataChanged=!1,s.$watch("documentsService.busy",function(e,t,o){o.busy=e});var h=this;h.coreItems=null,h.accessKeyUser=null,h.currentClass={},h.currentCollection={},this.notifications=s.notificationService.notifications,this.populateCurrentClass=function(){if(h.params.collectionId){var e=c.allCollections.filter(function(e){return e.group.value==h.params.collectionId});e.length>0&&(h.currentClass=e[0].group)}},this.populateCurrentCollection=function(){if(h.params.customerId){var e=c.allCollections.filter(function(e){return e.id==h.params.customerId});e.length>0&&(h.currentCollection=e[0].title)}},this.reloadData=function(){n.go(n.current,{},{reload:!0})},t.infinicast&&(t.infinicast.setRootScope(t),t.$watch("infinicast.dataPool.userCollection",function(e,o,i){if(null!=e){var a=s.notificationService.processNotificationData("userCollection",e,t.infinicast.user.userid);s.notificationService.addNotification(a),-1!==n.href(n.current.name,n.params).indexOf(a.url)&&(s.dataChanged=!0,f.warning("Displayed data has been changed","Attention"))}},!0)),this.testDataUpdate=function(){console.log("test");new Date;t.infinicast.setDataByPathName("userCollection",{id:394247,title:"invoice received",group:{locale:"Workflow",value:"WORKFLOW"}})},this.hideBoxes=function(){h.displayOptions=!1,h.displayNotifications=!1},this.anyBoxIsShown=function(){return h.displayOptions||h.displayNotifications},s.$watch("documentsService.allCollections",function(e,t,o){e&&(h.populateCurrentClass(),h.populateCurrentCollection())},!0),s.$watch("documentsService.coreItems",function(e,t){e&&e!=t&&(h.coreItems=e)}),this.applySearchQuery=function(e){s.searchField=e},s.clearSearchField=function(){s.searchField="",c.searchFilter=""},s.$watch("localAccessService.accessKeyUser",function(e,t,o){e&&e!=t&&(h.accessKeyUser=e)},!0);var y=i.appName();this.appConfig={appName:y},h.toggleMode={thisState:l.getState(),alterState:l.getAlterState()},h.cardMode=h.toggleMode.thisState===(r.getUserSetting("viewMode")||l.getDefaultViewMode()),this.changeState=function(e,t){var o=r.getUserSetting("viewMode");if(o&&o==e){var n=[t,e];e=n[0],t=n[1]}r.setUserSetting("viewMode",e),l.setState(e,t)},t.$on("customerStateChanged",function(e,t){h.toggleMode={thisState:t.thisState,alterState:t.alterState},h.cardMode="Card"===(r.getUserSetting("viewMode")||l.getDefaultViewMode())}),h.state=n.current.name,h.parentState=n.current.parentState,t.$on("$stateChangeSuccess",function(e,t,o,i,a){if(s.dataChanged=!1,h.documentsView="customer"===n.current.name,h.hideHeader="register"===n.current.name||"login"===n.current.name||"confirm"===n.current.name,!h.hideHeader&&!h.coreItems){var r=c.callDocumentsCore();r&&r.then(function(e){e.data&&(h.coreItems=e.data.collections)})}if(h.hideHeader||c.allCollections)v(n.current.name,i.name,a,n.current.parentState,o);else{var l=c.callDocumentAllCollections();l?l.then(function(e){e.data&&(c.allCollections=e.data.collections),v(n.current.name,i.name,a,n.current.parentState,o)}):v(n.current.name,i.name,a,n.current.parentState,o)}}),this.toggle=function(){e("left").toggle()},s.isAppFullscreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},s.isFullScreen=s.isAppFullscreen(),s.fullScreen=function(){function e(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function t(){return document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0}s.isFullScreen?(t(),s.isFullScreen=s.isAppFullscreen()):(e(document.documentElement),
s.isFullScreen=s.isAppFullscreen())},this.toggleFilter=function(){d.when("right").then(function(e){e.toggle()})},s.showEmptyCollections=!1,this.toggleEmptyCollectionFiltering=function(){s.showEmptyCollections=!s.showEmptyCollections,l.showEmptyCollections=s.showEmptyCollections},this.closeMenu=function(){e("left").close()},this.logout=function(){c.clearCache(),r.removeCredentails(),t.loggedOut=!0,n.go("login")},this.navigateBack=function(){h.previousState&&h.previousStateParams&&n.go(h.previousState,{id:h.previousStateParams.id})},this.navigateUp=function(){h.parentState&&(h.parentState==h.previousState?n.go(h.previousState,h.previousStateParams):n.go(h.parentState,h.params))},this.navigateHome=function(){h.accessKeyUser?"accesskeyHome"!==h.state&&n.go("accesskeyHome",{accessKey:h.params.accessKey}):"home"!==h.state&&n.go("home")},s.closeFilter=function(){e("right").close()},s.resetFilter=function(){s.collectionFilter=[],c.filter=null},s.toggleGroup=function(e){s.isGroupShown(e)?s.shownGroup=null:s.shownGroup=e},s.isGroupShown=function(e){return s.shownGroup===e},s.search=function(e){13==e?n.go("search",{searchPhrase:s.searchField}):c.searchFilter=s.searchField},s.applyFilter=function(){s.collectionFilter=[],s.collectionFilterGroupTitles=[],"undefined"!=typeof s.filterData.titleIds&&angular.forEach(s.filterData.titleIds,function(e,t){angular.forEach(e,function(e,o){e?s.groupFilters[t]?s.groupFilters[t]!=o&&(s.filterData.titleIds[t][s.groupFilters[t]]=!1,s.groupFilters[t]=o):s.groupFilters[t]=o:s.groupFilters[t]==o&&(s.groupFilters[t]=null)})}),angular.forEach(s.groupFilters,function(e,t){e&&s.collectionFilter.push({collection:e})}),c.filter=s.collectionFilter,h.params.customerId&&(c.filterCustomerId=h.params.customerId),h.params.accessKey&&(c.filterAccessKey=h.params.accessKey)}};i.$inject=["$mdSidenav","$rootScope","$state","ConfigService","LocalAccessService","$scope","documentsService","ViewModeService","$mdComponentRegistry","CONSTANT","$window","NotificationService","toastr","$timeout"]},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){"ngInject";var e={restrict:"E",templateUrl:"app/components/flyingButton/flyingbutton.html",scope:{creationDate:"=",template:"=template",params:"="},controller:i,controllerAs:"flyB",bindToController:!0,link:function(e,t,o){e.addDialogTemplate="app/"+o.scope+"/"+o.template+".html",e.params=o.params}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.FlyingButtonDirective=n;var i=function a(e,t,n,i,r,s,c,l){"ngInject";o(this,a);var d=this;d.hidden=!1,d.isOpen=!1,d.hover=!1,d.openDialog=function(o,n){i.show({clickOutsideToClose:!0,controller:["$mdDialog","$scope","$timeout","$filter",function(t,o,n,i){this.close=function(){t.cancel()},this.params=d.params,this.errorMessages={},this.errorMessages[5001]=i("i18n")("error.5001"),this.errorMessages[5002]=i("i18n")("error.5002"),this.errors=[];var a=this;this.delayedSubmit=function(){n(function(){a.submit()},100)},this.submit=function(){if(c.busy=!1,this.errors=[],this.formErrors=[],this.addForm.$valid){e.$emit("CallAddMethod",this.addForm);a.addForm.resultPromise&&a.addForm.resultPromise.then(function(e){a.addForm.customErrors&&a.addForm.customErrors.length>0?!function(){var e=a.errorMessages;angular.forEach(a.addForm.customErrors,function(t,o){a.errors.push(e[t.errorCode]),a.formErrors.customError=e[t.errorCode]})}():t.hide()})}}}],controllerAs:"dialog",templateUrl:t.addDialogTemplate,hasBackdrop:!1,targetEvent:o})}};i.$inject=["$rootScope","$scope","$state","$mdDialog","ConfigService","LocalAccessService","documentsService","ViewModeService"]},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){"ngInject";var e={restrict:"E",templateUrl:"app/components/footerbar/footerbar.html",scope:{creationDate:"="},controller:i,controllerAs:"fm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.FooterbarDirective=n;var i=function a(e,t,n,i,r,s,c,l,d,u){"ngInject";function m(e,t,o,n,i){g.state=e,g.previousState=t,g.previousStateParams=o,n&&(g.parentState=n),i&&(g.params=i),u.allCollections&&(g.populateCurrentClass(),g.populateCurrentCollection())}o(this,a),c.documentsService=u,c.localAccessService=d;var g=this;g.state=i.current.name,g.parentState=i.current.parentState,g.accessKeyUser={},g.currentClass={},g.currentCollection={},this.populateCurrentClass=function(){if(g.params.collectionId){var e=u.allCollections.filter(function(e){return e.group.value==g.params.collectionId});e.length>0&&(g.currentClass=e[0].group)}},this.populateCurrentCollection=function(){if(g.params.customerId){var e=u.allCollections.filter(function(e){return e.id==g.params.customerId});e.length>0&&(g.currentCollection=e[0].title)}},c.$watch("documentsService.allCollections",function(e,t,o){e&&(g.populateCurrentClass(),g.populateCurrentCollection())},!0),this.toggle=function(){e("left").toggle()},this.closeMenu=function(){e("left").close()},t.$on("$stateChangeSuccess",function(){g.hideFooter="register"===i.current.name||"login"===i.current.name||"home"===i.current.name||"confirm"===i.current.name});t.$on("$stateChangeSuccess",function(e,t,o,n,a){m(i.current.name,n.name,a,i.current.parentState,o)});this.navigateBack=function(){g.previousState&&g.previousStateParams&&i.go(g.previousState,{id:g.previousStateParams.id})},c.$watch("localAccessService.accessKeyUser",function(e,t,o){e&&e!=t&&(g.accessKeyUser=e)},!0),this.navigateUp=function(){g.parentState&&(g.parentState==g.previousState?i.go(g.previousState,g.previousStateParams):i.go(g.parentState,g.params))},this.navigateHome=function(){"home"!==g.state&&i.go("home")}};i.$inject=["$mdSidenav","$rootScope","$log","$state","$stateParams","$http","$scope","$window","LocalAccessService","documentsService"]},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){"ngInject";var e={restrict:"E",templateUrl:"app/components/sidemenu/sidemenu.html",scope:{creationDate:"="},controller:i,controllerAs:"sm",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.SidemenuDirective=n;var i=function a(e){"ngInject";o(this,a),this.toggle=e("left").toggle()};i.$inject=["$mdSidenav"]},function(e,t){"use strict";function o(e){"ngInject";return function(t,o,n){t.$watch(n.items,function(i){if(i){var a="<div>{{ #TPL#."+n.value+" || #TPL#."+n.defaultvalue+" }}</div>";i.forEach(function(i,r){var s=angular.element(a.replace(/#TPL#/g,n.items+"["+r+"]"));e(s)(t),o.append(s)})}})}}o.$inject=["$compile"],Object.defineProperty(t,"__esModule",{value:!0}),t.NoScopeRepeatDirective=o},function(e,t){"use strict";function o(){"ngInject";return function(e,t,o,n){if(!e)return"";if(o=parseInt(o,10),!o)return e;if(e.length<=o)return e;if(e=e.substr(0,o),t){var i=e.lastIndexOf(" ");-1!=i&&(("."==e.charAt(i-1)||","==e.charAt(i-1))&&(i-=1),e=e.substr(0,i))}return e+(n||" ")}}Object.defineProperty(t,"__esModule",{value:!0}),t.TruncateFilter=o},function(e,t){"use strict";function o(){"ngInject";return function(e,t){return e?e.filter(function(e){return-1==t.indexOf(e.group.value)}):[]}}Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionFilter=o},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t){"ngInject";o(this,e),this.filter=t}return e.$inject=["$filter"],n(e,[{key:"searchCriteria",value:function(e,t){var o=this;return function(n){if(t&&n.count<1)return!1;var i=angular.copy(n);if(i.thumb&&(i.thumb=""),i.date){var a=o.filter("date")(i.date,"dd.MM.yyyy"),r=o.filter("filter")([a],e);if(r.length>0)return!0}if(i.totalamount){var s=o.filter("currency")(i.totalamount,""),c=o.filter("filter")([s],e);if(c.length>0)return!0}return o.filter("filter")([i],e).length>0}}}]),e}();t.SearchService=i},function(e,t){"use strict";function o(){"ngInject";var e=/^[-_a-zA-Z0-9]+(\.[-_a-zA-Z0-9]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$/,t={require:"ngModel",restrict:"A",link:function(t,o,n,i){i&&i.$validators.email&&(i.$validators.email=function(t){return i.$isEmpty(t)||e.test(t)})}};return t}Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateEmail=o},function(e,t){"use strict";function o(){"ngInject";var e={restrict:"A",link:function(e,t,o,n){var i=function(t,o){e(function(){})};t.$on("$stateChangeSuccess",i)}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.AppTitle=o},function(e,t){"use strict";function o(){"ngInject";var e={require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,o,n){n.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.CompareTo=o},function(e,t){"use strict";function o(){"ngInject";var e={restrict:"A",require:"ngModel",replace:!1,link:function(e,t,o,n){var i=o.documentDataValidate;n.$validators.documentDataValidate=function(e){if(!n.$dirty)return!0;if(i)switch(i){case"documentTitle":var t=e&&e.length>0&&e.length<256;return!!t;case"documentDate":var o=new Date(e);return null!=e&&!isNaN(Date.parse(o));case"documentAmount":(+e).toFixed(2);return""!==e&&!isNaN(+e)&&angular.isNumber(+e);default:return!0}return!0}}};return e}Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentDataValidate=o},function(e,t){"use strict";angular.module("ngLocalize.Config",[]).value("localeConf",{basePath:"app/languages",defaultLocale:"EN",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::"}),angular.module("ngLocalize.InstalledLanguages",[]).value("localeSupported",["EN","DE"]).value("localeFallbacks",{en:"EN",de:"DE"})},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i){"ngInject";o(this,e),this.client=t,this.config=n,this.pathTypes=i,this.rootScope=null,this.listening=!1,this.errors=[],this.user=null,this.pathMap=[],this.dataPool={}}return e.$inject=["client","config","pathTypes"],n(e,[{key:"isConfigValid",value:function(){return this.config&&this.config.host&&this.config.scope&&this.config.role?!0:(console.log("wrong config"),!1)}},{key:"setUser",value:function(e){this.user=e}},{key:"isUserValid",value:function(e){return this.user&&this.user.account.uuid?!0:(e||console.log("wrong user"),!1)}},{key:"connect",value:function(){var e=this;this.client.connect(this.config.host,this.config.scope,this.config.role,function(t){t?e.errors.push=t:(console.log("connected"),e.listening=!0,e.initOnChangeDataHandlers(),e.client.onDisconnect(function(){console.log("disconnected")}))})}},{key:"getUserPath",value:function(e,t){var o=this.user.account.uuid;return"/"+e+"/"+o+"/"+t}},{key:"bindOnChangeDelegate",value:function(e,t){this.listening&&this.client.path(e).onDataChange(t)}},{key:"applyOnChangeDataDelegate",value:function(e){var t=this;if(this.listening){var o=this.getPath(e),n=e.name;this.client.path(o).onDataChange(function(e,o,i){t.rootScope.$apply(function(){t.dataPool[n]=e})})}}},{key:"getPath",value:function(e){switch(e.pathType){case this.pathTypes.userCollection:var t=this.user?this.user.account.uuid:"";return"/"+e.pathConfig.type+"/"+t+"/"+e.pathConfig.dataType;default:return null}}},{key:"onChangeDataEntryPoint",value:function(e,t,o){return e}},{key:"initOnChangeDataHandlers",value:function(){var e=this;e.config.paths?angular.forEach(e.config.paths,function(t,o){e.applyOnChangeDataDelegate(t)}):console.log("no valid paths configured")}},{key:"getPathByName",value:function(e){var t=this,o=null;return t.config.paths&&angular.forEach(t.config.paths,function(n,i){return n.name==e?void(o=t.getPath(n)):void 0}),o}},{key:"setOnChangeDelegate",value:function(e,t,o){var n=this.user.account.uuid,i="/"+e+"/"+n+"/"+t;this.bindOnChangeDelegate(i,o)}},{key:"setData",value:function(e,t){this.listening&&this.client.path(e).setData(t)}},{key:"setRootScope",value:function(e){this.rootScope=e}},{key:"setDataByPathName",value:function(e,t){var o=this.getPathByName(e);o&&this.setData(o,t)}},{key:"listen",value:function(){this.listening||this.isConfigValid()&&this.isUserValid()&&this.connect()}}]),e}(),a=function(){function e(){"ngInject";o(this,e),this.pathTypes={userCollection:1},this.client=new Infinicast.InfinicastClient,this.config={}}return n(e,[{key:"setConfig",value:function(e){this.config=e}},{key:"$get",value:function(){return new i(this.client,this.config,this.pathTypes)}}]),e}();t.InfinicastWrapper=a},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t,n,i){"ngInject";o(this,e),this.$q=t,this.ConfigService=n,this.storageService=i,this.notifications=[]}return e.$inject=["$q","ConfigService","StorageService"],n(e,[{key:"processNotificationData",value:function(e,t,o){var n=new Date,i={id:t.id,header:n,title:"default",action:"has been changed",entityName:"Item",url:"/"};switch(e){case"userCollection":return i.header=n,i.entityName=t.group.locale,i.title=t.title,i.url="/"+t.group.value+"/"+t.id,i.originalData=t,this.storageService.cleanSelectedRecordsByCollectionForUser("documents",i.id,o),this.storageService.cleanSelectedRecordsByCollectionForUser("collections",t.group.value,o),i;default:return i}}},{key:"addNotification",value:function(e){var t=this;if(this.notifications.length){var o=!0;angular.forEach(this.notifications,function(t){return e==t?void(o=!1):void 0}),o&&t.notifications.push(e)}else t.notifications.push(e)}},{key:"clearNotifications",value:function(){this.notifications=[]}}]),e}();t.NotificationService=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t){"ngInject";o(this,i),this.template='<div class="dz-preview dz-file-preview"><div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div><div class="dz-filename"><span data-dz-name></div></span><div class="dz-error-message"><span data-dz-errormessage></span><div></div>';var n=this;this.dropzone=null,this.localAcceptHandler=function(e,t){n.sendInterceptPromise(e).then(function(e){})["catch"](function(e){})},this.setSuccess=function(e){e.status="success",e.processing=!1,n.dropzone.emit("success",e,"file uploaded"),n.dropzone.emit("complete",e)},this.setError=function(e,t){e.status="error",e.processing=!1,n.dropzone.emit("error",e,t||"error")},this.sendInterceptPromise=function(o,i){return o.status="queued",e(function(e,i){var a={name:o.name},r=new FileReader;r.onload=function(){n.dropzone.emit("uploadprogress",o,50,o.upload.bytesSent);var i=btoa(r.result);t.callUploadFile(i,a).then(function(e){n.dropzone.emit("uploadprogress",o,100,o.upload.bytesSent),n.setSuccess(o)},function(e){n.setError(o)}),e(r.result)},r.onerror=function(){n.dropzone.emit("error",o,"error"),i(r.result)},r.onprogress=function(e){var t=Math.round(e.loaded/e.total*100);o.upload.bytesSent=e.loaded,n.dropzone.emit("uploadprogress",o,t,o.upload.bytesSent)},r.readAsBinaryString(o),o.status="uploading",o.processing=!0,n.dropzone.emit("processing",o)})},this.acceptAltHandler=function(e,t){n.dropzone.processFile(e)}};n.$inject=["$q","documentsService"],t.UploadService=n},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function i(e,t){"ngInject";o(this,i),this.readOptions={},this.getTestData=function(e){},this.workbooktoJson=function(e){var t=[],o=[];return e.SheetNames.forEach(function(n){var i=XLS.utils.sheet_to_json(e.Sheets[n]);i.length>0&&(t.push(i),o.push(n))}),{data:t,names:o}},this.workbookToCsv=function(e){var t=[];return e.SheetNames.forEach(function(o){var n=XLSX.utils.sheet_to_csv(e.Sheets[o]);n.length>0&&(t.push("SHEET: "+o),t.push(""),t.push(n))}),t.join("\n")},this.readXLdata=function(e,t){return XLSX?(t=t||"binary",XLSX.read(e,{type:t})):null}};n.$inject=["$q","documentsService"],t.ViewerService=n}]),angular.module("xchange").run(["$templateCache",function(e){e.put("app/accesskey/accesskey.html",'<div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!(docs | filter:searchService.searchCriteria(documentsService.searchFilter)).length" class="no-docs">{{\'error.5011\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><div ng-cloak="" infinite-scroll="totalDocCount > pageSize ? more() : null" infinite-scroll-disabled="documentService.busy" infinite-scroll-distance="1" ng-class="cardMode ? \'\' : \'list-box\'" ng-include="cardMode ? \'app/customer/customer.cards.tpl.html\' : \'app/customer/customer.list.tpl.html\'"></div>'),e.put("app/accesskey/home.html",'<div ng-cloak="" ng-class="cardMode ? \'\' : \'list-box\'"><md-content ng-if="cardMode" class="md-padding"><div docgrid="" class="deckgrid"><div grid="" class="a-card column"><a ui-sref="accesskeyDocument({accessKey: accessKey})"><md-card><md-card-title><div class="card-count count-other">{{totalDocCount || \'?\'}}</div><md-card-title-text><span class="md-headline">{{\'Documents\'}}</span></md-card-title-text></md-card-title></md-card></a></div></div></md-content><ons-list ng-if="!cardMode" class="list-offsets"><ons-list-item class="a-card"><div class="a-card"><a ui-sref="accesskeyDocument({accessKey: accessKey})"><div><div class="card-count-list count-other">{{totalDocCount || \'?\'}}</div><span>{{\'Documents\'}}</span></div></a></div></ons-list-item></ons-list></div>'),e.put("app/changelog/changelog.html",'<div ng-cloak="" class="list-box"><md-button ng-click="clearLocalData()" style="cursor: hand;position: fixed;z-index: 2; bottom: 0;right: 0" class="md-raised">{{\'user.clearLocalStorage\' | i18n}}</md-button><ons-list class="list-offsets"><ons-list-header>v 0.3.2</ons-list-header><ons-list-item>Text embed</ons-list-item><ons-list-item>Map response to document on save</ons-list-item><ons-list-item>Angular lazy img</ons-list-item><ons-list-header>v 0.3.1</ons-list-header><ons-list-item>Filters for AK user</ons-list-item><ons-list-item>Reduce number of requests</ons-list-item><ons-list-header>v 0.3.0</ons-list-header><ons-list-item>Search</ons-list-item><ons-list-item>Dialog window menu FF fix</ons-list-item><ons-list-item>Minor bugfixing</ons-list-item><ons-list-header>v 0.2.9</ons-list-header><ons-list-item>Long words break</ons-list-item><ons-list-item>Save active if change detected and form is valid</ons-list-item><ons-list-header>v 0.2.8</ons-list-header><ons-list-item>Styles bug fixing (incorrect margins)</ons-list-item><ons-list-item>Localization completed</ons-list-item><ons-list-item>Clear cache button updated</ons-list-item><ons-list-item>Sign up page for high-res screens</ons-list-item><ons-list-item>General bug fixing</ons-list-item><ons-list-header>v 0.2.7</ons-list-header><ons-list-item>Bug fixing</ons-list-item><ons-list-header>v 0.2.6</ons-list-header><ons-list-item>Expiration and localstorage reset button</ons-list-item><ons-list-header>v 0.2.5</ons-list-header><ons-list-item>Layout updates</ons-list-item><ons-list-item>Fix menu bug for FF</ons-list-item><ons-list-item>User by accesskey info in navbar</ons-list-item><ons-list-item>Modal preview window</ons-list-item><ons-list-item>3dot for mobile</ons-list-item><ons-list-item>Update of document list on change</ons-list-item><ons-list-item>Bug fixes</ons-list-item><ons-list-header>v 0.2.4</ons-list-header><ons-list-item>IE/FF bug fixes</ons-list-item><ons-list-item>Document by access key</ons-list-item><ons-list-item>Card layout</ons-list-item><ons-list-item>Wrong password</ons-list-item><ons-list-item>IE/FF bug fixes</ons-list-item><ons-list-item>enhancement indexDB core+collections</ons-list-item><ons-list-header>v 0.2.3</ons-list-header><ons-list-item>Sprint two</ons-list-item><ons-list-header>v 0.0.19</ons-list-header><ons-list-item>Bug fixes</ons-list-item><ons-list-item>Email validation</ons-list-item><ons-list-header>v 0.0.18</ons-list-header><ons-list-item>Caching update</ons-list-item><ons-list-item>List mode layout update</ons-list-item><ons-list-item>Improved browser compatibility</ons-list-item><ons-list-item>Router bug fixes</ons-list-item><ons-list-item>Menu update</ons-list-item><ons-list-header>v 0.0.17</ons-list-header><ons-list-item>Margins for a list mode</ons-list-item><ons-list-item>Mobile list fix</ons-list-item><ons-list-item>Browser issues</ons-list-item></ons-list></div>'),e.put("app/collection/addDialog.html",'<md-dialog style="width:320px;" aria-label="addCollection" ng-cloak=""><div class="btn-close md-toolbar" ng-click="dialog.close();"><i class="material-icons">close</i></div><form name="dialog.addForm" id="addForm" ng-keyup="$event.keyCode == 13 && dialog.submit()"><md-content class="md-padding"><div name="documentInformation" novalidate=""><label style="font-weight:600">{{dialog.params.currentClass}}</label><div layout="row" style="margin-top: 10px"><md-input-container flex="100" ng-class="dialog.errors.length ? \'md-input-invalid\' : \'\'"><label class="profile-lable">{{\'common.value\'|i18n}}</label> <input type="text" placeholder="{{\'collection.addANewCollection\'|i18n}}" name="value" data-ng-model="dialog.value" class="profile-field" required="" customerror=""><div ng-messages="dialog.addForm.value.$error"><span ng-message="required" class="">{{\'error.5014\'|i18n}}</span> <span ng-message="customError" class="">{{dialog.formErrors.customError}}</span></div></md-input-container></div></div></md-content></form><div ng-show="dialog.errors.length"><div ng-repeat="error in dialog.errors" style="padding:10px;color:red;background-color: #f5f5f5;">{{error}}</div></div></md-dialog>'),e.put("app/collection/collection.cards.tpl.html","<md-content class=\"md-padding\"><div docgrid=\"\" class=\"deckgrid\"><div grid=\"\" ng-repeat=\"card in ((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections))\" class=\"a-card column\"><a ui-sref=\"customer({collectionId: card.group.value, collectionLocale: card.group.locale, customerId: card.id, locale: card.title.locale})\"><md-card><md-button ng-if=\"!{'Type': true, 'WORKFLOW': true, 'Monat': true, 'NEW': true, '' : false}[parentClass]\" class=\"md-icon-button operation\" ng-click=\"collection.editDialog($event, card)\"><i class=\"material-icons\">edit</i></md-button><md-card-title class=\"card-title-mod collection-text\"><div class=\"card-count {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count}}</div><md-card-title-text><span class=\"md-headline\">{{card.title.locale}}</span></md-card-title-text></md-card-title></md-card></a></div></div></md-content>"),e.put("app/collection/collection.html",'<div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections)).length" class="no-docs">{{\'error.5012\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><flying-button template="addDialog" params="params" scope="collection" ng-if="!{\'Monat\': true, \'NEW\': true, \'\' : false}[parentClass]"></flying-button><div ng-cloak="" ng-include="cardMode ? \'app/collection/collection.cards.tpl.html\' : \'app/collection/collection.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div>'),e.put("app/collection/collection.list.tpl.html","<ons-list ng-if=\"((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections)).length > 0\" class=\"list-offsets\"><ons-list-item grid=\"\" ng-repeat=\"card in ((collection.filteredDocs || collection.docs) || (search.filteredDocs || search.collections))\" class=\"\"><div class=\"a-card list-item\"><a ui-sref=\"customer({collectionId: card.group.value, collectionLocale: card.group.locale, customerId: card.id, locale: card.title.locale})\"><div><div class=\"card-count-list {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count}}</div><span>{{card.title.locale}}</span><md-button ng-if=\"!{'Type': true, 'WORKFLOW': true, 'Monat': true, 'NEW': true, '' : false}[parentClass]\" class=\"md-icon-button operation\" ng-click=\"collection.editDialog($event, card)\"><i class=\"material-icons\">edit</i></md-button></div></a></div></ons-list-item></ons-list>"),e.put("app/collection/editDialog.html",'<md-dialog style="width:320px;" aria-label="addCollection" ng-cloak=""><div class="btn-close md-toolbar" ng-click="dialog.close();"><i class="material-icons">close</i></div><form name="dialog.editForm" id="editForm" ng-keyup="$event.keyCode == 13 && dialog.submit()"><md-content class="md-padding"><div name="documentInformation" novalidate=""><div style="padding: 10px 10px 10px 0;">Edit collection...</div><div layout="row"><md-input-container flex="100" ng-class="dialog.errors.length ? \'md-input-invalid\' : \'\'"><label class="profile-lable">Value</label> <input type="text" name="value" data-ng-model="dialog.value" class="profile-field" required="" customerror=""><div ng-messages="dialog.editForm.value.$error"><span ng-message="required" class="">{{\'error.5014\'|i18n}}</span> <span ng-message="customError" class="">{{dialog.formErrors.customError}}</span></div></md-input-container></div><div layout="row" layout-align="left center"><md-input-container flex="100"><label class="profile-lable">Locale</label> <input type="text" name="locale" data-ng-model="dialog.locale" class="profile-field" required=""><div ng-messages="dialog.editForm.locale.$error"><span ng-message="required" class="">{{\'error.5015\'|i18n}}</span></div></md-input-container></div></div></md-content></form><div ng-show="dialog.errors.length"><div ng-repeat="error in dialog.errors" style="padding:10px;color:red;background-color: #f5f5f5;">{{error}}</div></div></md-dialog>'),e.put("app/confirm/confirm.html",'<div class="confirm" style="" layout="row"><div class="" layout="column" flex-gt-xs="33"></div><div class="confirm-form" layout="column" flex="66"><form class="registration-form" name="registration.confirmForm" id="confirmForm" ng-keyup="$event.keyCode == 13 && submitToServer()" novalidate=""><div class="confirmation-label">{{\'user.registrationConfirmation\' | i18n}}</div><div><md-input-container><label class="login-validation-color">{{\'user.confirmationCode\' | i18n}}</label> <input type="text" class="login-validation-border-color" data-ng-model="registration.confirmCode" name="confirmCode" required=""><div ng-messages="registration.confirmForm.confirmCode.$error"><span class="login-validation-color" ng-message="required">{{\'error.5016\'|i18n}}</span></div></md-input-container></div><div><span></span><md-button class="md-raised login-sample-button" data-ng-click="submitToServer()">{{\'user.confirm\' | i18n}}</md-button></div></form></div></div>'),e.put("app/customer/customer.cards.tpl.html",'<md-content class="md-padding" ng-if="docs.length"><div docgrid="" class="docgrid"><div grid="" ng-repeat="card in (filteredDocs || docs)" class="column"><md-card class="main-card view-module ie-fix" ng-click="editDocument($event, card.id);"><md-card-title><md-card-title-media><img class="card-image" lazy-img="{{baseUrl}}file{{card.thumb}}" alt="{{card.title | truncate:true:16:\'...\'}}"></md-card-title-media><md-card-title-text class="mod-card-title"><div class="md-headline mod-card-text">{{card.title|truncate:true:28:\'...\'}}</div><div layout="row"><span class="md-subhead" flex="">{{card.type.locale|truncate:true:28:\'...\'}}</span> <span class="md-subhead" flex="">{{card.workstatus|truncate:true:28:\'...\'}}</span></div><div layout="row"><span class="md-subhead" flex="" style="">{{card.date | date: "dd.MM.yyyy" }}</span> <span class="md-subhead" flex="" style="" ng-if="card.totalamount">{{card.totalamount|currency:\'\'}}</span></div><div layout="row" layout-align="left center" style="padding: 10px 0 12px 0;"><span class="md-subhead secondary-subhead" style="font-size: 16px !important;">{{(card.user.firstname + \' \' + card.user.lastname)|truncate:false:28:\'...\'}}</span></div><div class="list-item-text collection-item-card" ng-repeat="collection in card.collections | collectionFilter:excludeCollections">{{collection.title.locale || collection.title.value}}<span class="">{{$last ? \'\' : \', \'}}&nbsp;</span></div></md-card-title-text></md-card-title></md-card></div></div></md-content>'),e.put("app/customer/customer.html",'<div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!(filteredDocs || docs).length" class="no-docs">{{\'error.5011\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><div ng-cloak="" infinite-scroll="totalDocCount > pageSize ? more() : null" infinite-scroll-disabled="documentService.busy" infinite-scroll-distance="1" ng-class="cardMode ? \'\' : \'list-box\'" ng-include="cardMode ? \'app/customer/customer.cards.tpl.html\' : \'app/customer/customer.list.tpl.html\'"></div>'),e.put("app/customer/customer.list.tpl.html",'<div class="list-offsets doc-list-table" ng-if="docs.length"><div grid="" ng-repeat-start="card in (filteredDocs || docs)" class="grid-item main-card view-list a-card doc-list-row" ng-click="editDocument($event, card.id);"><div class="grid-column main-card column list-item-title mod-card-text list-column-1" title="{{card.title}}">{{card.title}}</div><div class="grid-column list-item-text list-column-2" title="{{card.type.locale || card.type.value}} {{card.workstatus}}">{{card.type.locale || card.type.value }} {{card.workstatus}}</div><div class="grid-column list-item-text list-item-text-r1 list-column-4">{{card.date | date: "dd.MM.yyyy" }}</div><div class="grid-column list-item-text list-item-text-r2 list-column-5" title="{{(card.user.firstname + \' \' + card.user.lastname)}}">{{(card.user.firstname + \' \' + card.user.lastname)}}</div><div class="grid-column list-item-text list-item-text-r4 list-column-6">{{card.totalamount | currency:""}}</div><div class="col-ruler" ng-if="(card.collections | collectionFilter:excludeCollections).length"></div></div><div ng-repeat-end="" class="doc-list-row collection-list grid-nb" ng-click="editDocument($event, card.id);"><div class="grid-column"><div class="list-item-text collection-item" ng-repeat="collection in card.collections | collectionFilter:excludeCollections">{{collection.title.locale || collection.title.value}}<span class="col-separator">{{$last ? \'\' : \', \'}}&nbsp;</span></div></div><div class="grid-column fake-col"></div><div class="grid-column fake-col"></div><div class="grid-column fake-col"></div><div class="grid-column fake-col"></div></div></div>'),
e.put("app/customer/edit.html",'<md-dialog ng-click="$event.stopPropagation();sideMenu=false;showDLdBox=false;" class="edit-doc" style="background-color: #f5f5f5;min-width:1000px;width:1000px;height:100%;min-height:100%;overflow:hidden;" aria-label="documentEdit" ng-cloak=""><md-toolbar style="position:relative;"><div class="md-toolbar-tools"><h2>{{editForm.title}}</h2><span flex=""></span><md-button class="md-icon-button hide-gt-xs" aria-label="editDocSideMenu" ng-click="$event.stopPropagation();toggleSideMenu();"><i class="mdi mdi-dots-vertical" style="top: 14px;right: 70px;font-size: 1.9em;"></i></md-button><md-button class="md-icon-button" ng-click="cancel($event)"><i class="material-icons">close</i></md-button></div></md-toolbar><div ng-if="showSaveConfirmation" class="save-confirmation"><span class="save-confirmation-text" style="">{{\'customer.saveChanges\' | i18n}}</span><md-button class="md-icon-button" ng-click="save(editForm);hideDialog($event);"><i class="material-icons" style="color: #00AA00">done</i></md-button><md-button class="md-icon-button" ng-click="hideDialog($event)"><i class="material-icons" style="color: #aa0000">cancel</i></md-button></div><div layout="row" in-view-container="" class="edit-dialog-container" style="overflow-y: scroll;height: calc(100vh - 64px);"><div class="" flex=""><form id="saveForm" name="saveForm"><div id="main_details"><md-button ng-model="docDetailsSections.mainBlock" aria-label="documentOverviewBtn" class="category-button md-button-toggle md-raised" ng-click="goTo($event, $event, \'main_details\');">{{\'customer.overview\' | i18n}}</md-button><div ng-accordion-body="" ng-class="docDetailsSections.mainBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak=""><md-content class="md-padding" style="padding-bottom: 10px"><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'common.title\' | i18n}}</label> <input type="text" name="title" data-ng-model="editForm.title" document-data-validate="documentTitle" class="profile-field"><div ng-messages="saveForm.title.$error"><div class="" ng-message="documentDataValidate">{{\'error.5017\'|i18n}}</div></div></md-input-container></div><div layout="row" layout-align="left center"><div class="documentIcon"><span style="font-size:13px;font-weight:600;display:block">{{\'common.date\' | i18n}}</span><md-datepicker name="date" ng-model="editForm.documentDate" document-data-validate="documentDate" md-placeholder="Enter date" aria-label="documentDate"></md-datepicker><div ng-messages="saveForm.date.$error"><div class="edit-doc-error" ng-message="documentDataValidate">{{\'error.5013\'|i18n}}</div></div></div></div><div layout="row" layout-align="left center"><md-input-container class="flex"><label class="profile-lable">{{\'common.type\' | i18n}}</label><md-select name="type" ng-model="editForm.type.value"><md-option ng-repeat="type in editForm.types_available" value="{{type.value}}">{{type.locale}}</md-option></md-select></md-input-container></div><md-input-container style="margin-top:28px"><label class="profile-lable">{{\'customer.workStatus\' | i18n}}</label> <input type="text" name="workstatus" data-ng-model="editForm.workstatus" class="profile-field" readonly="readonly"></md-input-container><div style="margin-top:7px"><label style="display:block;color: rgba(0,0,0,0.54);font-size: 12px;padding-bottom: 8px;" class="profile-lable">{{\'customer.description\' | i18n}}</label> <textarea data-ng-model="editForm.text" columns="1" name="text" style="height:15.4vh !important;width:300px">{{editForm.text}}</textarea></div></md-content></div></div></div><div id="doc_stats"><md-button class="md-raised category-button" aria-label="documentEuroBtn" ng-click="goTo($event, \'doc_stats\');">{{\'customer.euro\' | i18n}}</md-button><div ng-accordion-body="" ng-class="docDetailsSections.dataBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak=""><md-content class="md-padding" style="padding-bottom: 10px"><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.supplierId\' | i18n}}</label> <input type="text" name="supplierId" data-ng-model="editForm.supplierID" class="profile-field"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.netAmount\' | i18n}}</label> <input type="text" name="netvaluegoods" ng-model="editForm.netvaluegoods" ng-currency="" currency-symbol="" document-data-validate="documentAmount" class="profile-field"><div ng-messages="saveForm.netvaluegoods.$error"><div class="" ng-message="documentDataValidate">{{\'error.5018\'|i18n}}</div></div></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.taxAmount\' | i18n}}</label> <input type="text" name="totaltax" ng-model="editForm.totaltax" ng-currency="" currency-symbol="" document-data-validate="documentAmount" class="profile-field"><div ng-messages="saveForm.totaltax.$error"><div class="" ng-message="documentDataValidate">{{\'error.5019\'|i18n}}</div></div></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.totalAmount\' | i18n}}</label> <input type="text" name="totalamount" ng-model="editForm.totalamount" ng-currency="" currency-symbol="" document-data-validate="documentAmount" class="profile-field"><div ng-messages="saveForm.totalamount.$error"><div class="" ng-message="documentDataValidate">{{\'error.5020\'|i18n}}</div></div></md-input-container></div></md-content></div></div></div><div id="doc_collections"><md-button class="md-raised category-button" aria-label="documentCollectionsBtn" ng-click="goTo($event, \'doc_collections\');">{{\'customer.collection\' | i18n}}</md-button><div ng-class="docDetailsSections.collectionsBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak=""><md-chips name="collections" ng-model="editForm.typeList" md-autocomplete-snap="" md-require-match="true" md-on-remove="removeChip($chip)" md-transform-chip="transformChip($chip)"><md-autocomplete md-selected-item="selectedItem" md-search-text="searchText" md-items="item in querySearch(searchText)" md-item-text="item.title.locale" md-delay="200" md-no-cache="true" placeholder="{{\'customer.addCollection\' | i18n}}..."><span md-highlight-text="searchText">{{item.group.locale}} :: {{item.title.locale}}</span></md-autocomplete><md-chip-template><span><strong>{{$chip.title.locale}}</strong> <em ng-if="$chip.group.locale">({{$chip.group.locale}})</em></span></md-chip-template></md-chips></div></div></div><div id="doc_info"><md-button class="md-raised category-button" aria-label="documentInfoBtn" ng-click="goTo($event, \'doc_info\');">{{\'customer.info\' | i18n}}</md-button><div ng-accordion-body="" ng-class="docDetailsSections.infoBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-cloak=""><md-content class="md-padding" style="padding-bottom: 10px"><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.filename\' | i18n}}</label> <input type="text" name="filename" data-ng-model="editForm.filename" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.filenamesig\' | i18n}}</label> <input type="text" name="filenamesig" data-ng-model="editForm.filenamesig" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row"><md-input-container class="flex"><label class="profile-lable">{{\'customer.creator\' | i18n}}</label> <input type="text" name="creator" data-ng-model="editForm.creator_name" class="profile-field" ng-readonly="true"></md-input-container></div><div layout="row" layout-align="left center"><div class="date-container"><span class="line-label">{{\'customer.createdOn\' | i18n}}&nbsp;</span> <span class="date-text">{{editForm.createdDate | date: \'dd.MM.yyyy HH:mm\'}}</span></div></div><div layout="row" layout-align="left center"><div class="date-container"><span class="line-label">{{\'customer.updatedOn\' | i18n}}</span><span class="date-text">{{editForm.changedDate | date: \'dd.MM.yyyy HH:mm\'}}</span></div></div></md-content></div></div></div><div id="doc_workflow"><md-button class="md-raised category-button" aria-label="documentWorkflowBtn" ng-click="goTo($event, \'doc_workflow\');">{{\'customer.workflow\' | i18n}}</md-button><div ng-accordion-body="" ng-class="docDetailsSections.workflowBlock ? \'block-expanded\' : \'block-collapsed\'"><div ng-if="editForm.workflow" ng-cloak=""><md-content class="" style="padding-bottom: 10px"><div ng-if="editForm.workflow" layout="row" style="padding: 10px;" layout-align="left center"><div class="breadcrumb flat"><a href="#" ng-class="editForm.workflow.startable ? \'active\' : \'\'">{{\'customer.past\' | i18n}}</a> <a href="#" ng-class="editForm.workflow.running ? \'active\' : \'\'">{{\'customer.current\' | i18n}}</a> <a href="#">{{\'customer.next\' | i18n}}</a></div></div><md-content class="md-padding" style="padding-bottom: 0;" layout="column"><label ng-if="editForm.workflow.startable" class="wf-process">{{\'customer.workflowProcess\' | i18n}}</label><div ng-if="editForm.workflow.startable" flex=""><div class="wf-container" ng-repeat="wfItem in editForm.workflow.startable" ng-click="null"><div class="wf-container-inner"><div>{{wfItem.process}}</div><p>{{ wfItem.desc }}</p><div class="wf-container-sub" ng-if="wfItem.first_step"><label ng-if="editForm.workflow.startable" class="wf-process">{{\'customer.workflowStatus\' | i18n}}</label><div>{{ wfItem.first_step.status }}</div><p>{{ wfItem.first_step.desc }}</p></div></div></div></div><label ng-if="editForm.workflow.running" class="wf-process">{{\'customer.workflowProcess\' | i18n}}</label><div ng-if="editForm.workflow.running" flex=""><div class="wf-container" ng-click="null"><div class="wf-container-inner"><div>{{editForm.workflow.running.process}}</div><p>{{ editForm.workflow.running.desc }}</p><div class="wf-container-sub" ng-if="editForm.workflow.running.first_step"><label ng-if="editForm.workflow.running" class="wf-process">{{\'customer.workflowStatus\' | i18n}}</label><div>{{ editForm.workflow.running.first_step.status }}</div><p>{{ editForm.workflow.running.first_step.desc }}</p></div></div></div></div><div ng-if="editForm.workflow && editForm.workflowTips && !editForm.workflow.running && !editForm.workflow.startable" flex=""><label class="wf-process">{{\'customer.workflow\' | i18n}}</label><div class="wf-container" ng-click="null"><div class="wf-container-inner"><div>{{editForm.workflow}}</div><p>{{ editForm.workflowTips}}</p></div></div></div></md-content></md-content></div></div></div><div id="doc_fileview" style="height:350px;"><md-button class="md-raised category-button" aria-label="documentViewBtn" ng-click="goTo($event, \'doc_fileview\');">{{\'customer.view\' | i18n}}</md-button><div style="position: relative;" in-view="onViewFile($inview) && !documentLoaded && viewFile($inview);"><md-content style="/*overflow-y:scroll;*/" ng-click="focusControl($event);"><div ng-if="documentLoading && fileType!=\'IMG\' && fileType!=\'TXT\'" layout="row" layout-sm="column" layout-align="space-around" style="padding-top: 30px;"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div><div ng-if="documentError" layout="row" layout-sm="column" layout-align="space-around" style="padding-top: 30px;">{{\'error.5008\'|i18n}}</div><div class="pdf-viewer" ng-class="unlockZoom ? \'unlock\' : \'\'" ng-show="fileType==\'PDF\'"><object data="{{trustSrc(documentUrl)}}" type="application/pdf"><img src="{{trustSrc(documentUrlLarge)}}"></object></div><div class="image-view" ng-show="fileType==\'IMG\'"><img id="view_img"></div><div class="text-view" style="padding:10px;" ng-show="fileType==\'TXT\'"><div id="view_txt" style="overflow: scroll;"><pre style="padding: 20px;">{{textData}}</pre></div></div><div class="xl-view" ng-if="fileType==\'XL\'"><div ng-if="!xlprocessing" ui-grid="gridOptions" class="grid"></div></div><div ng-if="showControls && fileType==\'XL\'" class="pdf-controls" ng-click="focusControl($event);"><md-button ng-show="xlsheetNames[xlsheetIndex-1]" class="md-icon-button" ng-click="prevSheet();"><i class="material-icons">keyboard_arrow_left</i></md-button><md-button ng-show="true" class="md-icon-sheet" ng-click="useSheet();">{{xlsheet}}</md-button><md-button ng-show="xlsheetNames[xlsheetIndex+1]" class="md-icon-button" ng-click="nextSheet();"><i class="material-icons">keyboard_arrow_right</i></md-button></div><div ng-if="false" class="pdf-controls" ng-click="focusControl($event);"><md-button ng-show="!unlockZoom" class="md-icon-button" ng-click="unlockToggle();"><i class="material-icons">lock</i></md-button><md-button ng-show="unlockZoom" class="md-icon-button" ng-click="unlockToggle();"><i class="material-icons">lock_open</i></md-button><md-button ng-show="unlockZoom" class="md-icon-button" ng-click="zoomIn();"><i class="material-icons">zoom_in</i></md-button><md-button ng-show="unlockZoom" class="md-icon-button" ng-click="zoomOut()"><i class="material-icons">zoom_out</i></md-button><span flex="100"></span><md-button ng-show="pdfTotalPages" ng-class="(pdfState.page > 1) ? \'\' : \'fade\'" class="md-icon-button" ng-click="pagePrev()"><i class="material-icons">keyboard_arrow_left</i></md-button><md-button ng-show="pdfTotalPages" ng-class="(pdfState.page < pdfTotalPages) ? \'\' : \'fade\'" class="md-icon-button" ng-click="pageNext()"><i class="material-icons">keyboard_arrow_right</i></md-button><div class="pdf-pages"><div class="pdf-current-page"><md-input-container placeholder="page"><input id="pdfPageInput" type="text" size="3" ng-maxlength="3" min="1" max="{{pdfTotalPages}}" name="page" ng-model="pdfState.page" ng-keyup="pdfGoToPage(pdfState.page)" aria-label="documentPdfPageInput" class="profile-field"></md-input-container></div><span style="padding:3px;" ng-if="true">/</span><div class="pdf-all-pages">{{pdfTotalPages || 0}}</div></div></div><div class="file-message" ng-if="fileStatus==\'Unsupported\'"><div>{{\'error.5026\' | i18n}}</div></div></md-content></div></div></form></div><div ng-class="{\'hide-xs\':!sideMenu, \'mobileMenu\': sideMenu}" class="doc-control-container"><div ng-class="{\'hide-xs\':!sideMenu, \'mobile-menu-inner\': sideMenu}" class="doc-control-fixed" ng-if="!mdClosing && editForm"><div style="height: 16px;"></div><div class="doc-control-header">{{\'customer.actions\' | i18n}}</div><div class="doc-control-button" ng-class="saveForm.$valid && formChanged ? \'\' : \'control-disabled\'" ng-click="formChanged && save(editForm);"><i class="mdi mdi-content-save" role="button"></i> {{\'customer.save\' | i18n}}</div><div style="display: inline-block" class="doc-control-button" ng-click="$event.stopPropagation();toggleDownloadBox()"><i class="mdi mdi-menu-down" role="button"></i></div><div style="display: inline-block;width:203px;" class="doc-control-button" ng-click="downloadDoc()"><i class="mdi mdi-download" role="button"></i> {{\'customer.download\' | i18n}}</div><div ng-show="showDLdBox" class="doc-control-left-menu" style=""><div class="doc-control-button" ng-repeat="dlType in editForm.filetypes" ng-click="downloadDoc(dlType)"><i class="mdi mdi-download" role="button"></i>{{dlType}}</div></div><div class="doc-control-button" ng-if="(editForm && editForm.hassignature < 1)" ng-click="signDocument()"><i class="mdi mdi-pen" role="button"></i> {{\'customer.sign\' | i18n}}</div><div style="height: 16px;"></div><div class="doc-control-header">{{\'customer.navigation\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'main_details\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.overview\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_stats\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.euro\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_collections\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.collection\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_info\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.info\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_workflow\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.workflow\' | i18n}}</div><div class="doc-control-button" ng-click="goTo($event, \'doc_fileview\');"><i class="mdi mdi-arrow-right" role="button"></i> {{\'customer.view\' | i18n}}</div></div></div><div style="width:10px;"></div></div></md-dialog>'),e.put("app/login/login.html",'<div class="login-container"><div class="content-container" layout="row" layout-sm="column"><div flex-gt-sm="" class="content-left-border"><div class="login-left-content-settings"><span style="display: block; font-size: 12px;">{{\'user.needAnAccount\' | i18n}}</span><md-button data-ng-click="login.onClickForRegistration()" class="md-raised login-sample-button">{{\'user.createAccount\' | i18n}}</md-button></div></div><div flex-gt-sm="" class="content-right"><div id="signin">{{\'user.signin\' | i18n}}</div><form name="login.loginForm" id="loginForm" ng-keyup="$event.keyCode == 13 && login.onLogin()" novalidate=""><div><md-input-container><label class="login-validation-color">{{\'user.username\' | i18n}}</label> <input type="email" validate-email="" style="color:white !important;border-color: rgb(250, 245, 245) !important;" name="userId" data-ng-model="login.userInfo.userId" required=""><div ng-messages="login.loginForm.userId.$error"><span ng-message="required" class="login-validation-color">{{\'error.5021\' | i18n}}</span><div ng-message="email" class="login-validation-color">{{\'error.5022\' | i18n}}</div></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.password\' | i18n}}</label> <input type="password" style="color:white !important;border-color: rgb(250, 245, 245) !important;" name="passWord" data-ng-model="login.userInfo.passWord" required="" server=""><div ng-messages="login.loginForm.passWord.$error"><span ng-message="required" class="login-validation-color">{{\'error.5024\' | i18n}}</span><div ng-message="server" class="login-validation-color" style="opacity: 1; margin-top: 0px;">{{login.loginForm.serviceErrorMessage}}</div></div></md-input-container></div><div><md-button class="md-raised login-sample-button login-format" data-ng-click="login.onLogin()">{{\'user.signin\' | i18n}}</md-button><span data-ng-click="login.onClickForForgetPassword()" id="Span1" class="login-forgetpassword">{{\'user.forgotYourPassword\' | i18n}}</span></div></form></div></div></div>'),e.put("app/main/addDialog.html",'<md-dialog style="width:320px;" aria-label="addCollection" ng-cloak=""><div class="btn-close md-toolbar" ng-click="dialog.close();"><i class="material-icons">close</i></div><form name="dialog.addForm" id="addForm" ng-keyup="$event.keyCode == 13 && dialog.submit()"><md-content class="md-padding"><div name="documentInformation" novalidate=""><div style="padding: 10px 10px 10px 0;">{{\'main.selectToAddNewClass\'|i18n}}</div><div layout="row" layout-align="left center"><md-input-container class="flex"><label class="profile-lable">{{\'main.class\'|i18n}}</label><md-select ng-change="dialog.delayedSubmit();" ng-model="dialog.addForm.value"><md-option ng-repeat="group in dialog.params.creatableClasses" value="{{group.value}}">{{group.locale}}</md-option></md-select></md-input-container></div></div></md-content></form><div ng-show="dialog.errors.length"><div ng-repeat="error in dialog.errors" style="padding:10px;color:red;background-color: #f5f5f5;">{{error}}</div></div></md-dialog>'),e.put("app/main/main.cards.tpl.html","<md-content class=\"md-padding\"><div docgrid=\"\" class=\"deckgrid\"><div grid=\"\" ng-repeat=\"card in ((main.filteredDocs || main.docs) || search.coreDocs)\" class=\"a-card column\"><a ui-sref=\"collection({collectionId: card.group.value, collectionLocale: card.group.locale})\"><md-card><md-card-title><div class=\"card-count {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count || '?'}}</div><md-card-title-text><span class=\"md-headline\">{{card.group.locale}}</span></md-card-title-text></md-card-title></md-card></a></div></div></md-content>"),e.put("app/main/main.html",'<div class="filter-box" ng-show="documentsService.searchFilter"><md-chips><md-chip ng-click="documentsService.searchFilter=\'\'"><span><strong>{{documentsService.searchFilter}}</strong></span></md-chip></md-chips></div><div ng-show="!((main.filteredDocs || main.docs) || search.coreDocs).length" class="no-docs">{{\'error.5012\' | i18n}}<span ng-show="documentsService.searchFilter">. {{\'common.filter\' | i18n}}: "{{documentsService.searchFilter}}"</span></div><flying-button template="addDialog" scope="main" params="fbParams" ng-if="fbParams.creatableClasses.length"></flying-button><div ng-cloak="" ng-include="cardMode ? \'app/main/main.cards.tpl.html\' : \'app/main/main.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div>'),e.put("app/main/main.list.tpl.html","<ons-list ng-if=\"((main.filteredDocs || main.docs) || (search.coreDocs)).length > 0\" class=\"list-offsets main-list\"><ons-list-item grid=\"\" ng-repeat=\"card in ((main.filteredDocs || main.docs) || search.coreDocs)\" class=\"a-card\"><div class=\"a-card\"><a ui-sref=\"collection({collectionId: card.group.value, collectionLocale: card.group.locale})\"><div><div class=\"card-count-list {{{'CUSTOMER':'count-customer', 'VENDOR':'count-customer', 'Lead':'count-customer', 'Workflow': 'count-workflow', 'Type': 'count-other', 'Inbox': 'count-another', 'Monat': 'count-other', 'Project': 'count-project', '':'count-another'}[card.group.value] || 'count-another'}}\">{{card.count || '?'}}</div><span>{{card.group.locale}}</span></div></a></div></ons-list-item></ons-list>"),e.put("app/register/register.html",'<div class="content-container register-container" style="margin-top:0vh;height:100vh;overflow-y: scroll" layout="row" layout-sm="column"><div flex="" class="content-left-border"><div class="login-left-content-settings"><span id="isAlreadyregistered" style="display: block; font-size: 12px;">{{\'user.alreadyMember\' | i18n}}</span><md-button class="md-raised login-sample-button" ui-sref="login">{{\'user.signin\' | i18n}}</md-button></div></div><div flex="" class="content-right"><div id="signin">{{\'user.registrationIsFree\' | i18n}}*</div><form class="registration-form" name="registration.registrationForm" id="registrationForm" ng-keyup="$event.keyCode == 13 && submitToServer()" novalidate=""><div><md-input-container><label style="color:white !important">{{\'user.firstName\' | i18n}}</label> <input style="color:white !important;border-color: rgb(250, 245, 245) !important;" type="text" ng-model="registration.person.firstName"></md-input-container></div><div><md-input-container><label style="color:white !important">{{\'user.lastName\' | i18n}}</label> <input style="color:white !important;border-color: rgb(250, 245, 245) !important;" type="text" ng-model="registration.person.lastName"></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.companyName\' | i18n}}</label> <input type="text" class="login-validation-border-color" data-ng-model="registration.person.companyName" name="companyName" required=""><div ng-messages="registration.registrationForm.companyName.$error"><span class="login-validation-color" ng-message="required">{{\'error.5016\'|i18n}}</span></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.email\' | i18n}}</label> <input type="email" class="login-validation-border-color" data-ng-model="registration.person.eMailName" name="eMailName" required=""><div ng-messages="registration.registrationForm.eMailName.$error"><span class="login-validation-color" ng-message="required">{{\'error.5021\'|i18n}}</span><div class="login-validation-color" ng-message="email">{{\'error.5022\'|i18n}}</div></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.password\' | i18n}}</label> <input type="password" class="login-validation-border-color" data-ng-model="registration.person.passWord" minlength="3" name="passWord" required=""><div ng-messages="registration.registrationForm.passWord.$error"><span class="login-validation-color" ng-message="required">{{\'error.5023\'|i18n}}</span><div class="login-validation-color" ng-message="minlength">{{\'error.5025\'|i18n}}</div></div></md-input-container></div><div><md-input-container><label class="login-validation-color">{{\'user.confirmPassword\' | i18n}}</label> <input type="password" class="login-validation-border-color" data-ng-model="registration.person.confirmPassWord" minlength="3" compare-to="registration.person.passWord" name="confirmPassWord" required=""><div ng-messages="registration.registrationForm.confirmPassWord.$error"><span class="login-validation-color" ng-message="required">{{\'error.5023\'|i18n}}</span><div class="login-validation-color" ng-message="minlength">{{\'error.5025\'|i18n}}</div><div class="login-validation-color" ng-message="compareTo">{{\'error.5024\'|i18n}}</div></div></md-input-container></div><div><span><md-checkbox data-ng-model="registration.person.iagreewith" class="md-warn"><span>{{\'user.iagreewTnC\' | i18n}}</span></md-checkbox></span><md-button class="md-raised login-sample-button" data-ng-click="submitToServer()">{{\'user.register\' | i18n}}</md-button></div></form></div></div>'),e.put("app/search/search.html",'<div style="padding: 64px 80px 0 80px;"></div><h2 class="search-section">Core</h2><div ng-show="search.coreDocs.length" class="search" ng-cloak="" ng-include="cardMode ? \'app/main/main.cards.tpl.html\' : \'app/main/main.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div><div ng-show="!search.coreDocs.length" class="no-records">No collections found</div><h2 class="search-section">Collections</h2><div class="search" style="padding-top: 0px;" ng-cloak="" ng-include="cardMode ? \'app/collection/collection.cards.tpl.html\' : \'app/collection/collection.list.tpl.html\'" ng-class="cardMode ? \'\' : \'list-box\'"></div><div ng-show="!search.collections.length" class="no-records">No collections found</div><h2 class="search-section">Documents</h2><div class="search docs" ng-cloak="" infinite-scroll="totalDocCount > pageSize ? more() : null" infinite-scroll-disabled="documentService.busy" infinite-scroll-distance="1" ng-class="cardMode ? \'\' : \'list-box\'" ng-include="cardMode ? \'app/customer/customer.cards.tpl.html\' : \'app/customer/customer.list.tpl.html\'"></div><div ng-show="!docs.length" class="no-records">No documents found</div>'),e.put("app/test/test.html",'<br><br><br><br><br><br><br><form name="test.testForm" id="testForm"><input type="file" id="file" name="testFile" onchange="angular.element(this).scope().updateFileContents(this)"></form><div><div ng-if="!xlprocessing" ui-grid="gridOptions" class="grid"></div></div>'),e.put("app/components/flyingButton/dialog.html",""),e.put("app/components/flyingButton/flyingbutton.html",'<md-fab-speed-dial class="md-scale md-fab-bottom-right" style="position: fixed;" ng-click="flyB.openDialog($event, \'test1\')"><md-fab-trigger><md-button aria-label="menu" class="md-fab"><i class="material-icons fly-b-icon">add</i></md-button></md-fab-trigger></md-fab-speed-dial>'),e.put("app/components/footerbar/footerbar.html",'<md-toolbar layout="row" layout-align="center center" class="footer-bar footer" ng-if="!fm.hideFooter"><div layout="row" flex="" class="fill-height"><span class="footer-fix"><span ng-if="fm.state === \'changelog\'" ng-click="fm.navigateHome()">{{\'navbar.changelog\' | i18n | lowercase}}</span> <span ng-if="fm.state === \'accesskeyHome\' || fm.state === \'accesskeyDocument\'">{{fm.accessKeyUser.company || (\'common.company\'|i18n|lowercase)}} <span><i class="material-icons breadcrumb-footer">keyboard_arrow_right</i></span> {{fm.accessKeyUser.name || (\'common.name\'|i18n|lowercase)}}</span> <span ng-if="fm.state === \'search\'" ng-click="fm.navigateHome()">{{\'navbar.search\' | i18n | lowercase}} : "{{fm.params.searchPhrase}}"</span> <span ng-if="fm.state === \'collection\'" ng-click="fm.navigateUp()">{{fm.params.collectionLocale || fm.currentClass.locale}}</span> <span ng-if="fm.state === \'customer\'" ng-click="fm.navigateUp()">{{fm.previousStateParams.collectionLocale || fm.currentClass.locale}}</span> <span ng-if="fm.state === \'customer\' && (fm.params.collectionLocale || fm.currentCollection.locale)"><i class="material-icons breadcrumb-footer">keyboard_arrow_right</i></span> <span ng-if="fm.state === \'customer\'" ng-click="fm.navigateUp()">{{fm.params.locale || fm.currentCollection.locale}}</span></span></div></md-toolbar>'),e.put("app/components/navbar/navbar.box.notifications.html",'<div class="options-popup notification-box" ng-show="vm.displayNotifications"><div class="box-header">{{\'Notifications\'}}<ul class="box-actions"><li><a href="" ng-click="vm.clearNotifications($event)"><i class="mdi mdi-check-all"></i></a></li></ul></div><div class="box-body"><div class="box-item" ng-repeat="notification in vm.notifications"><div class="media"><div class="pull-left"><i class="mdi mdi-alert-box nav-notification-box-icon"></i></div><div class="media-body"><small class="box-small ng-binding">{{notification.entityName}} <a style="color:#444444;" href="{{notification.url}}">{{notification.title}}</a> {{notification.action}}, {{notification.header | date: "dd.MM.yyyy - hh:mm"}}</small> <small class="box-title ng-binding"></small></div></div></div></div><div class="clearfix"></div><a class="box-footer" href="">{{\'\'}}</a></div>'),e.put("app/components/navbar/navbar.box.options.html",'<div class="options-popup" ng-show="vm.displayOptions"><div style="text-align: center;padding:5px;"><i class="mdi mdi-checkbox-blank-circle" style="color: #310055;"></i> <i class="mdi mdi-checkbox-blank-circle" style="color: #212121;"></i> <i class="mdi mdi-checkbox-blank-circle" style="color: #727272;"></i></div><md-divider></md-divider><ul><li ng-click="$event.stopPropagation();fullScreen();vm.displayOptions = !vm.displayOptions"><span class="popup-icon"><i class="mdi" ng-class="isFullScreen ? \'mdi-fullscreen-exit\' : \'mdi-fullscreen\'"></i></span> {{!isFullScreen ? (\'navbar.fullscreen\'|i18n) : (\'navbar.regularscreen\'|i18n)}}</li><li ng-click="$event.stopPropagation();vm.changeState(vm.toggleMode.alterState, vm.toggleMode.thisState);vm.displayOptions = !vm.displayOptions"><span class="popup-icon"><i class="mdi" ng-class="vm.cardMode ? \'mdi-view-list\' : \'mdi-view-module\'"></i></span>&nbsp;{{vm.cardMode ? (\'navbar.list\'|i18n) : (\'navbar.card\'|i18n)}} {{\'navbar.mode\' | i18n}}</li><li ng-if="vm.state === \'collection\'" ng-click="$event.stopPropagation();vm.toggleEmptyCollectionFiltering();vm.displayOptions = !vm.displayOptions"><span class="popup-icon"><i class="mdi" ng-class="!showEmptyCollections ? \'mdi-numeric-0-box-outline\' : \'mdi-numeric-0-box\'"></i></span> {{!showEmptyCollections ? (\'navbar.emptysets\'|i18n) : (\'navbar.emptysetshid\'|i18n)}}</li></ul></div>'),e.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center" class="header md-primary" ng-if="!vm.hideHeader"><md-progress-linear ng-show="busy" md-mode="indeterminate"></md-progress-linear><i class="mdi mdi-menu hamburger" ng-click="vm.toggle()"></i> <span class="nav-mob-header" ng-click="vm.navigateHome()">{{vm.appConfig.appName}}</span> <span class="nav-back" ng-if="vm.state !== \'home\'"><span class="docs-menu-separator-icon" ng-click="vm.navigateUp()"><i class="material-icons">keyboard_arrow_left</i></span></span><div layout="row" flex="" class="fill-height breadcrumbs"><h2 class="md-toolbar-item md-breadcrumb md-headline"><span><span hide-sm="" hide-md="" ng-click="vm.navigateHome()">{{vm.appConfig.appName}}</span> <span class="docs-menu-separator-icon" hide-sm="" hide-md="" ng-if="vm.state !== \'home\'"><i class="material-icons">keyboard_arrow_right</i></span> <span class="nav" ng-if="vm.state === \'accesskeyHome\' || vm.state === \'accesskeyDocument\'">{{vm.accessKeyUser.company || (\'common.company\'|i18n)}} <span class="docs-menu-separator-icon" hide-sm="" hide-md=""><i class="material-icons">keyboard_arrow_right</i></span> {{vm.accessKeyUser.name || (\'common.name\'|i18n)}}</span> <span class="nav" ng-if="vm.state === \'search\'" ng-click="vm.navigateHome()">{{\'navbar.search\' | i18n}}</span> <span ng-if="vm.state === \'search\'" class="docs-menu-separator-icon" hide-sm="" hide-md=""><i class="material-icons">keyboard_arrow_right</i></span> <span class="nav" ng-if="vm.state === \'search\'" ng-click="vm.toggleFilter()">{{vm.params.searchPhrase}}</span> <span class="nav" ng-if="vm.state === \'changelog\'" ng-click="vm.navigateHome()">{{\'navbar.changelog\' | i18n}}</span> <span class="nav" ng-if="vm.state === \'collection\'" ng-click="vm.navigateUp()">{{vm.params.collectionLocale || vm.currentClass.locale}}</span> <span class="nav" ng-if="vm.state === \'customer\'" ng-click="vm.navigateUp()">{{vm.previousStateParams.collectionLocale || vm.currentClass.locale}}</span> <span class="docs-menu-separator-icon" hide-sm="" hide-md="" ng-if="vm.state === \'customer\' && (vm.params.collectionLocale || vm.currentCollection.locale)"><i class="material-icons">keyboard_arrow_right</i></span> <span class="nav" ng-if="vm.state === \'customer\' && (vm.params.locale || vm.currentCollection.locale)" ng-click="vm.navigateUp()">{{vm.params.locale || vm.currentCollection.locale}}</span></span></h2></div><i class="mdi mdi-dots-vertical nav-options" ng-click="$event.stopPropagation();vm.displayOptions = !vm.displayOptions"></i> <i class="mdi mdi-magnify nav-filter" ng-click="vm.displayOptions = false;vm.toggleFilter()"></i> <i class="nav-home" ng-click="vm.navigateHome()"><img src="assets/images/365Header.png" style="width:40px"></i></md-toolbar><div class="options-backdrop" ng-show="vm.anyBoxIsShown()" ng-click="vm.hideBoxes();"></div><ng-include src="\'app/components/navbar/navbar.box.options.html\'"></ng-include><ng-include src="\'app/components/navbar/navbar.box.notifications.html\'"></ng-include><br><md-sidenav class="md-sidenav-left md-whiteframe-z2 sidenav-pos" style="display: flex;flex-direction: column;" md-component-id="left"><md-toolbar layout="row" class="header" style="position:absolute;top:0;"><h2 class="md-toolbar-item md-headline"></h2></md-toolbar><md-content><nav class="menu"><ul><li ng-click="vm.closeMenu();vm.navigateHome();"><a><i class="material-icons">home</i> {{\'navbar.home\' | i18n}}</a></li><li ng-class="ci.group.value == vm.params.collectionId ? \'nav-menu-selected\' : \'\'" ng-click="vm.closeMenu();" ng-repeat="ci in vm.coreItems"><a ui-sref="collection({collectionId: ci.group.value, collectionLocale: ci.group.locale})"><i class="material-icons">keyboard_arrow_right</i>{{ci.group.locale}}</a></li><md-divider></md-divider><li ng-click="vm.closeMenu();"><a ui-sref="changelog"><i class="material-icons">info_outline</i> {{\'navbar.about\' | i18n}}</a></li><li ng-if="vm.coreItems" ng-click="vm.logout();vm.closeMenu();"><a ui-sref="login"><i class="material-icons">exit_to_app</i> {{\'navbar.logout\' | i18n}}</a></li><li ng-if="!vm.coreItems && (vm.state == \'accesskeyDocument\' || vm.state == \'accesskeyHome\')" ng-click="vm.logout();vm.closeMenu();"><a ui-sref="login"><i class="material-icons">exit_to_app</i> {{\'navbar.logout\' | i18n}}</a></li></ul></nav></md-content></md-sidenav><md-sidenav class="md-sidenav-right md-whiteframe-z2 sidenav-pos" md-component-id="right"><md-toolbar class="md-theme-light"><div class="md-toolbar-tools"><h1>{{\'navbar.filter\' | i18n}}</h1><span flex=""></span><md-button class="md-icon-button sidenav-right-close" ng-click="closeFilter()"><i class="material-icons">close</i></md-button></div></md-toolbar><md-content layout-padding="" style="padding-top:72px;"><md-input-container flex="100"><label>{{\'navbar.search\' | i18n}}</label> <span><input type="search" autofocus="autofocus" name="search" data-ng-model="searchField" ng-keyup="search($event.keyCode);" md-autofocus=""></span></md-input-container><span ng-if="searchField"><md-button class="md-icon-button" ng-click="clearSearchField();"><i class="material-icons">close</i></md-button></span><form ng-if="filters"><ons-list ng-model="groupKey"><div ng-repeat="(k,v) in filters"><ons-list-item ng-click="toggleGroup(k)" class="title" ng-class="{active:isGroupShown(k)}"><ons-icon icon="caret-down" ng-if="isGroupShown(k)"></ons-icon><ons-icon icon="caret-right" ng-if="!isGroupShown(k)"></ons-icon>&nbsp;{{ v.group.locale }}<ons-icon class="filter-asterisk" icon="asterisk" ng-if="groupFilters[k]"></ons-icon></ons-list-item><ons-list-item class="item-accordion" ng-repeat="t in filters[k].title" ng-show="isGroupShown(k)"><label class="checkbox"><input ng-model="filterData.titleIds[k][t.id]" type="checkbox" name="titleId" ng-change="applyFilter();"><div class="checkbox__checkmark"></div><span class="ons-checkbox-inner">&nbsp;{{ t.locale || t.value }}</span></label></ons-list-item></div></ons-list></form></md-content></md-sidenav>'),
e.put("app/components/sidemenu/sidemenu.html",'<md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left"><md-toolbar class="md-theme-indigo"><h1 class="md-toolbar-tools">Sidenav Left</h1></md-toolbar><md-content layout-padding=""><md-button ng-click="close()" class="md-primary" hide-gt-md="">Close Sidenav Left</md-button><p hide-md="" show-gt-md="">This sidenav is locked open on your device. To go back to the default behavior, narrow your display.</p></md-content></md-sidenav>'),e.put("app/components/tremulaGrid/tremula.html","")}]);
//# sourceMappingURL=../maps/scripts/app-ef976e336c.js.map
