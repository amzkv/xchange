<md-dialog class="edit-doc" style="top:0;width:100%;height:100%;min-width:100%;min-height:100%;overflow-y:hidden" aria-label="documentEdit" ng-cloak>
  <form>
    <md-toolbar style="position:relative;">
      <div class="md-toolbar-tools">
        <h2>{{documentTitle}}</h2>
        <span flex></span>
        <!--<md-button class="md-icon-button" style="padding-left: 15px;" ng-click="downloadDoc()">
          <i class="material-icons">save</i>
        </md-button>-->
        <md-button class="md-icon-button" ng-click="cancel()">
          <i class="material-icons">close</i>
        </md-button>
      </div>
    </md-toolbar>

    <div style="overflow-y:scroll;height: 100vh;" in-view-container>
      <div style="/*height:calc(100vh - 150px);*/">
        <md-content layout="row">
          <div flex>
            <div id="main_details">
              <!--md-raised-->
              <md-button ng-model="docDetailsSections.mainBlock" class="category-button md-button-toggle md-raised" ng-click="goTo('main_details');">
                {{'Overview'}}
                <!--<md-icon aria-label="main"
                         class="material-icons step md-toggle-icon" ng-class="docDetailsSections.mainBlock ? 'icon-expanded' : 'icon-collapsed'">
                  keyboard_arrow_down
                </md-icon>-->
              </md-button>
              <div ng-accordion-body ng-class="docDetailsSections.mainBlock ? 'block-expanded' : 'block-collapsed'">
                <div ng-cloak>
                  <md-content class="md-padding" style="padding-bottom: 10px">
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Title'}}</label>
                        <input type="text" name="title" data-ng-model="editForm.title" class="profile-field"/>
                      </md-input-container>
                    </div>
                    <div layout="row" layout-align="left center">
                      <div class="documentIcon">
                        <span style="font-size:13px;font-weight:600;display:block">{{'Date'}}</span>
                        <md-datepicker ng-model="editForm.documentDate" md-placeholder="Enter date" aria-label="x"></md-datepicker>
                      </div>
                    </div>
                    <div layout="row" layout-align="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Type'}}</label>
                        <md-select ng-model="editForm.type.value">
                          <md-option ng-repeat="type in editForm.types_available" value="{{type.value}}">
                            {{type.locale}}
                          </md-option>
                        </md-select>
                      </md-input-container>
                    </div>
                    <md-input-container style="margin-top:28px">
                      <label class="profile-lable">{{'Work Status'}}</label>
                      <input type="text" name="displayname" data-ng-model="editForm.workstatus" class="profile-field"  readonly="readonly"/>
                    </md-input-container>
                    <div style="margin-top:7px">
                      <label style="display:block;color: rgba(0,0,0,0.54);font-size: 12px;padding-bottom: 8px;" class="profile-lable">{{'Description'}}</label>
                      <textarea data-ng-model="editForm.description" columns="1" name="remarks" style="height:15.4vh !important;width:300px">{{editForm.description}}</textarea>
                    </div>
                  </md-content>
                </div>
              </div>
            </div>
            <div id="doc_stats">
              <md-button class="md-raised category-button" ng-click="goTo('doc_stats');">
                {{'Euro'}}
                <!--<md-icon aria-label="details"
                         class="material-icons step" ng-class="docDetailsSections.dataBlock ? 'icon-expanded' : 'icon-collapsed'">
                  keyboard_arrow_down
                </md-icon>-->
              </md-button>
              <div ng-accordion-body ng-class="docDetailsSections.dataBlock ? 'block-expanded' : 'block-collapsed'">
                <div ng-cloak>
                  <md-content class="md-padding" style="padding-bottom: 10px">
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Supplier ID'}}</label>
                        <input type="text"  name="title" data-ng-model="editForm.supplierID" class="profile-field"/>
                      </md-input-container>
                    </div>
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Net Amount'}}</label>
                        <input type="text"  name="title" value="{{editForm.netvaluegoods|currency:''}}" class="profile-field" readonly="readonly"/>
                      </md-input-container>
                    </div>

                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Tax Amount'}}</label>
                        <input type="text"  name="title" value="{{editForm.totaltax | currency:''}}" class="profile-field"  readonly="readonly"/>
                      </md-input-container>
                    </div>
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Total Amount'}}</label>
                        <input type="text"  name="title" value="{{editForm.totalamount | currency:''}}" class="profile-field"  readonly="readonly"/>
                      </md-input-container>
                    </div>
                  </md-content>
                </div>
              </div>
            </div>
            <div id="doc_collections">
              <md-button class="md-raised category-button" ng-click="goTo('doc_collections');">
                {{'Collection'}}
                <!--<md-icon aria-label="details"
                         class="material-icons step" ng-class="docDetailsSections.collectionsBlock ? 'icon-expanded' : 'icon-collapsed'">
                  keyboard_arrow_down
                </md-icon>-->
              </md-button>
              <div ng-class="docDetailsSections.collectionsBlock ? 'block-expanded' : 'block-collapsed'">
                <div ng-cloak>
                    <md-chips ng-model="editForm.typeList"
                              md-autocomplete-snap
                              md-require-match="true"
                              md-transform-chip="transformChip($chip)">
                      <md-autocomplete md-selected-item="selectedItem"
                                       md-search-text="searchText"
                                       md-items="item in querySearch(searchText)"
                                       md-item-text="item.title.locale"
                                       md-delay="200"
                                       md-no-cache="true"
                                       placeholder="Add collection...">
                        <span md-highlight-text="searchText">{{item.group.locale}} :: {{item.title.locale}}</span>
                      </md-autocomplete>
                      <md-chip-template>
                          <span>
                              <strong>{{$chip.title.locale}}</strong>
                              <em ng-if="$chip.group.locale">({{$chip.group.locale}})</em>
                          </span>
                      </md-chip-template>
                    </md-chips>
                </div>
              </div>
            </div>
            <div id="doc_info">
              <md-button class="md-raised category-button" ng-click="goTo('doc_info');">
                {{'Info'}}
                <!--<md-icon aria-label="details"
                         class="material-icons step" ng-class="docDetailsSections.infoBlock ? 'icon-expanded' : 'icon-collapsed'">
                  keyboard_arrow_down
                </md-icon>-->
              </md-button>
              <div ng-accordion-body ng-class="docDetailsSections.infoBlock ? 'block-expanded' : 'block-collapsed'">
                <div ng-cloak>
                  <md-content class="md-padding" style="padding-bottom: 10px">
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Filename'}}</label>
                        <input type="text" name="title" data-ng-model="editForm.filename" class="profile-field" ng-readonly="true"/>
                      </md-input-container>
                    </div>
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Signature Filename'}}</label>
                        <input type="text" name="title"  data-ng-model="editForm.filenamesig" class="profile-field" ng-readonly="true"/>
                      </md-input-container>
                    </div>
                    <div layout="row" layout="left center">
                      <md-input-container class="flex">
                        <label class="profile-lable">{{'Creator'}}</label>
                        <input type="text" name="title" data-ng-model="editForm.creator_name" class="profile-field" ng-readonly="true"/>
                      </md-input-container>
                    </div>
                    <div layout="row" layout-align="left center">
                      <div class="date-container">
                        <span class="line-label">{{'Created on'}}&nbsp;</span>
                        <span class="date-text">{{editForm.createdDate | date: 'dd.MM.yyyy HH:mm'}}</span>
                        <!--<md-datepicker class="ro-datepicker"  disabled="disabled" ng-model="editForm.documentDate" md-min-date="editForm.documentDate" md-max-date="editForm.documentDate" md-placeholder="created date" aria-label="x2" readonly="readonly"></md-datepicker>-->
                      </div>
                    </div>
                    <div layout="row" layout-align="left center">
                      <div class="date-container">
                        <span class="line-label">{{'Updated on'}}</span>
                        <!--<input mdc-datetime-picker="" date="true" time="true" type="text" id="datetime" placeholder="Date" min-date="date" ng-model="editForm.changedDate" class="ng-pristine ng-valid ng-isolate-scope md-input ng-touched" aria-invalid="false">-->
                        <!--<md-datepicker class="ro-datepicker" time="true" disabled="disabled" ng-model="editForm.changedDate" md-placeholder="updated date" aria-label="x3" readonly="readonly"></md-datepicker>-->
                        <span class="date-text">{{editForm.changedDate | date: 'dd.MM.yyyy HH:mm'}}</span>
                      </div>
                    </div>
                  </md-content>
                </div>
              </div>
            </div>
            <div id="doc_workflow">
              <md-button class="md-raised category-button" ng-click="goTo('doc_workflow');">
                {{'Workflow'}}
                <!--<md-icon aria-label="details"
                         class="material-icons step" ng-class="docDetailsSections.workflowBlock ? 'icon-expanded' : 'icon-collapsed'">
                  keyboard_arrow_down
                </md-icon>-->
              </md-button>
              <div ng-accordion-body ng-class="docDetailsSections.workflowBlock ? 'block-expanded' : 'block-collapsed'">
                <div ng-cloak>
                  <md-content class="" style="padding-bottom: 10px">
                    <div ng-if="editForm.workflow" layout="row" style="padding: 10px;" layout-align="left center">
                      <div class="breadcrumb flat">
                        <a href="#" ng-class="editForm.workflow.startable ? 'active' : ''">{{'Past'}}</a>
                        <a href="#" ng-class="editForm.workflow.running ? 'active' : ''">{{'Current'}}</a>
                        <a href="#">{{'Next'}}</a>
                      </div>
                    </div>
                    <md-content class="md-padding" style="padding-bottom: 0;" layout="column">
                        <label ng-if="editForm.workflow.startable" class="wf-process">{{'Workflow Process'}}</label>
                        <div ng-if="editForm.workflow.startable" flex>
                          <div class="wf-container" ng-repeat="wfItem in editForm.workflow.startable" ng-click="null">
                            <div class="wf-container-inner">
                              <div>{{wfItem.process}}</div>
                              <p>{{ wfItem.desc }}</p>
                              <div class="wf-container-sub" ng-if="wfItem.first_step">
                                <label ng-if="editForm.workflow.startable" class="wf-process">{{'Workflow Status'}}</label>
                                <div>{{ wfItem.first_step.status }}</div>
                                <p>{{ wfItem.first_step.desc }}</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      <label ng-if="editForm.workflow.running" class="wf-process">{{'Workflow Process'}}</label>
                      <div ng-if="editForm.workflow.running" flex>
                        <div class="wf-container" ng-click="null">
                          <div class="wf-container-inner">
                            <div>{{editForm.workflow.running.process}}</div>
                            <p>{{ editForm.workflow.running.desc }}</p>
                            <div class="wf-container-sub" ng-if="editForm.workflow.running.first_step">
                              <label ng-if="editForm.workflow.running" class="wf-process">{{'Workflow Status'}}</label>
                              <div>{{ editForm.workflow.running.first_step.status }}</div>
                              <p>{{ editForm.workflow.running.first_step.desc }}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div ng-if="editForm.workflow && editForm.workflowTips && !editForm.workflow.running && !editForm.workflow.startable" flex>
                        <label class="wf-process">{{'Workflow'}}</label>
                        <div class="wf-container" ng-click="null">
                          <div class="wf-container-inner">
                            <div>{{editForm.workflow}}</div>
                            <p>{{ editForm.workflowTips}}</p>
                          </div>
                        </div>
                      </div>
                    </md-content>
                    <!--<md-content class="md-padding" layout="column">
                      {{rowDocument.workflow}}
                    </md-content>-->
                  </md-content>
                </div>
              </div>
            </div>
            <div id="doc_fileview" style="height:350px;">
              <md-button class="md-raised category-button" ng-click="goTo('doc_fileview');">
                {{'View'}}
                <!--<md-icon aria-label="details"
                         class="material-icons step" ng-class="docDetailsSections.workflowBlock ? 'icon-expanded' : 'icon-collapsed'">
                  keyboard_arrow_down
                </md-icon>-->
              </md-button>
              <div in-view="onViewFile($inview) && !documentLoaded && viewFile($inview);">
                <md-content style="/*overflow-y:scroll;*/" ng-click="focusControl($event);">
                  <!--<md-progress-linear ng-show="documentLoading" md-mode="indeterminate"></md-progress-linear>-->
                  <div ng-if="documentLoading && fileType=='PDF'" layout="row" layout-sm="column" layout-align="space-around" style="padding-top: 30px;">
                    <md-progress-circular  md-mode="indeterminate"></md-progress-circular>
                  </div>
                  <!--<div ng-if="documentLoading" style="text-align: center;padding: 25px 0 0 0;">Loading...</div>-->
                  <pdf-viewer ng-class="unlockZoom ? 'unlock' : ''" ng-show="fileType=='PDF'"
                              delegate-handle="pdf-container"
                              url=""
                              scale="1.5"
                              show-toolbar="false">
                  </pdf-viewer>
                  <!--<div class="image-container" ng-show="fileType=='IMG'">
                    <canvas id="image_canvas"></canvas>
                  </div>-->
                  <div class="image-view" ng-show="fileType=='IMG'">
                    <img id="view_img"/>
                  </div>
                  <div class="text-view" ng-show="fileType=='TXT'">
                    <div id="view_txt"><pre style="padding: 20px;">{{textData}}</pre></div>
                  </div>

                  <!-- TODO: directive -->
                  <div class="pdf-controls" ng-if="fileType=='PDF' && showControls" ng-click="focusControl($event);">
                    <md-button ng-show="!unlockZoom" class="md-icon-button" ng-click="unlockToggle();">
                      <i class="material-icons">lock</i>
                    </md-button>
                    <md-button ng-show="unlockZoom" class="md-icon-button" ng-click="unlockToggle();">
                      <i class="material-icons">lock_open</i>
                    </md-button>
                    <md-button ng-show="unlockZoom" class="md-icon-button" ng-click="zoomIn();">
                      <i class="material-icons">zoom_in</i>
                    </md-button>
                    <md-button ng-show="unlockZoom" class="md-icon-button" ng-click="zoomOut()">
                      <i class="material-icons">zoom_out</i>
                    </md-button>
                    <span flex="100"></span>
                    <md-button ng-show="pdfTotalPages" ng-class="(pdfState.page > 1) ? '' : 'fade'" class="md-icon-button" ng-click="pagePrev()">
                      <i class="material-icons">keyboard_arrow_left</i>
                    </md-button>
                    <md-button ng-show="pdfTotalPages" ng-class="(pdfState.page < pdfTotalPages) ? '' : 'fade'" class="md-icon-button" ng-click="pageNext()">
                      <i class="material-icons">keyboard_arrow_right</i>
                    </md-button>
                    <div class="pdf-pages">
                      <div class="pdf-current-page">
                        <md-input-container placeholder="page">
                          <input id="pdfPageInput"
                                 type="text"
                                 size="3"
                                 ng-maxlength="3"
                                 min="1"
                                 max="{{pdfTotalPages}}"
                                 name="title"
                                 ng-model="pdfState.page"
                                 ng-keyup="pdfGoToPage(pdfState.page)"
                                 class="profile-field"
                          />
                        </md-input-container>
                      </div><span style="padding:3px;" ng-if="true">/</span>
                      <div class="pdf-all-pages">{{pdfTotalPages || 0}}</div>
                    </div>
                  </div>

                  <div class="file-message" ng-if="fileStatus=='Unsupported'">
                    <div>Unsupported file</div>
                  </div>
                  <!--show toolbat for test-->
                </md-content>
              </div>
            </div>
          </div>
          <div ng-class="{'hide-xs':!sideMenu, 'mobileMenu': sideMenu}" class="doc-control-container">
            <div class="doc-control-fixed">
              <div style="height: 16px;"></div>
              <div class="doc-control-header">
                {{'Actions'}}
              </div>
              <div class="doc-control-button" ng-show="formChanged">
                <i class="mdi mdi-content-save" role="button"></i>
                {{'Save'}}
              </div>
              <div class="doc-control-button" ng-click="downloadDoc()">
                <i class="mdi mdi-download" role="button"></i>
                {{'Download'}}
              </div>
              <div class="doc-control-button" ng-if="(editForm && editForm.hassignature < 1)" ng-click="signDocument()">
                <i class="mdi mdi-pen" role="button"></i>
                {{'Sign'}}
              </div>
              <div style="height: 16px;"></div>
              <div class="doc-control-header">
                {{'Navigation'}}
              </div>
              <div class="doc-control-button" ng-click="goTo('main_details');">
                <i class="mdi mdi-arrow-right" role="button"></i>
                {{'Overview'}}
              </div>
              <div class="doc-control-button" ng-click="goTo('doc_stats');">
                <i class="mdi mdi-arrow-right" role="button"></i>
                {{'Euro'}}
              </div>
              <div class="doc-control-button" ng-click="goTo('doc_collections');">
                <i class="mdi mdi-arrow-right" role="button"></i>
                {{'Collection'}}
              </div>
              <div class="doc-control-button" ng-click="goTo('doc_info');">
                <i class="mdi mdi-arrow-right" role="button"></i>
                {{'Info'}}
              </div>
              <div class="doc-control-button" ng-click="goTo('doc_workflow');">
                <i class="mdi mdi-arrow-right" role="button"></i>
                {{'Workflow'}}
              </div>
              <div class="doc-control-button" ng-click="goTo('doc_fileview');">
                <i class="mdi mdi-arrow-right" role="button"></i>
                {{'View'}}
              </div>
            </div>
          </div>
          <div hide-gt-xs style="width:32px;">
            <div class="side-menu-dot" ng-click="toggleSideMenu();">
              <!--<md-button class="">
                Main
                <md-icon aria-label="doc-controls"
                         class="material-icons">
                  keyboard_arrow_down
                </md-icon>
              </md-button>-->
              <i class="mdi mdi-dots-vertical" role="button"></i>
            </div>
          </div>
        </md-content>
      </div>

    </div>
  </form>
</md-dialog>
